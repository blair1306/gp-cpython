<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>_threadmodule.c source code [codebrowser/Modules/_threadmodule.c] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="bootstate "/>
<link rel="stylesheet" href="../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'codebrowser/Modules/_threadmodule.c'; var root_path = '../..'; var data_path = '../../../data';</script>
<script src='../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='..'>codebrowser</a>/<a href='./'>Modules</a>/<a href='_threadmodule.c.html'>_threadmodule.c</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td></td></tr>
<tr><th id="2">2</th><td><i>/* Thread module */</i></td></tr>
<tr><th id="3">3</th><td><i>/* Interface to Sjoerd's portable C thread library */</i></td></tr>
<tr><th id="4">4</th><td></td></tr>
<tr><th id="5">5</th><td><u>#include <a href="../Include/Python.h.html">"Python.h"</a></u></td></tr>
<tr><th id="6">6</th><td><u>#include <a href="../Include/structmember.h.html">"structmember.h"</a> /* offsetof */</u></td></tr>
<tr><th id="7">7</th><td></td></tr>
<tr><th id="8">8</th><td><u>#<span data-ppcond="8">ifndef</span> <a class="macro" href="../pyconfig.h.html#1396" data-ref="_M/WITH_THREAD">WITH_THREAD</a></u></td></tr>
<tr><th id="9">9</th><td><u>#error "Error!  The rest of Python is not compiled with thread support."</u></td></tr>
<tr><th id="10">10</th><td><u>#error "Rerun configure, adding a --with-threads option."</u></td></tr>
<tr><th id="11">11</th><td><u>#error "Then run `make clean' followed by `make'."</u></td></tr>
<tr><th id="12">12</th><td><u>#<span data-ppcond="8">endif</span></u></td></tr>
<tr><th id="13">13</th><td></td></tr>
<tr><th id="14">14</th><td><u>#include <a href="../Include/pythread.h.html">"pythread.h"</a></u></td></tr>
<tr><th id="15">15</th><td></td></tr>
<tr><th id="16">16</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl def" id="ThreadError" title='ThreadError' data-type='PyObject *' data-ref="ThreadError">ThreadError</dfn>;</td></tr>
<tr><th id="17">17</th><td><em>static</em> <em>long</em> <dfn class="tu decl def" id="nb_threads" title='nb_threads' data-type='long' data-ref="nb_threads">nb_threads</dfn> = <var>0</var>;</td></tr>
<tr><th id="18">18</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl def" id="str_dict" title='str_dict' data-type='PyObject *' data-ref="str_dict">str_dict</dfn>;</td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><a class="macro" href="../Include/object.h.html#150" title="static _Py_Identifier PyId_stderr = { .next = ((void*)0), .string = &quot;stderr&quot;, .object = ((void*)0) }" data-ref="_M/_Py_IDENTIFIER">_Py_IDENTIFIER</a>(stderr);</td></tr>
<tr><th id="21">21</th><td></td></tr>
<tr><th id="22">22</th><td><i>/* Lock objects */</i></td></tr>
<tr><th id="23">23</th><td></td></tr>
<tr><th id="24">24</th><td><b>typedef</b> <b>struct</b> {</td></tr>
<tr><th id="25">25</th><td>    <a class="macro" href="../Include/object.h.html#83" title="PyObject ob_base;" data-ref="_M/PyObject_HEAD">PyObject_HEAD</a></td></tr>
<tr><th id="26">26</th><td>    <a class="typedef" href="../Include/pythread.h.html#PyThread_type_lock" title='PyThread_type_lock' data-type='void *' data-ref="PyThread_type_lock">PyThread_type_lock</a> <dfn class="tu decl" id="(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-type='PyThread_type_lock' data-ref="(anonymous)::lock_lock">lock_lock</dfn>;</td></tr>
<tr><th id="27">27</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::in_weakreflist" title='(anonymous struct)::in_weakreflist' data-type='PyObject *' data-ref="(anonymous)::in_weakreflist">in_weakreflist</dfn>;</td></tr>
<tr><th id="28">28</th><td>    <em>char</em> <dfn class="tu decl" id="(anonymous)::locked" title='(anonymous struct)::locked' data-type='char' data-ref="(anonymous)::locked">locked</dfn>; <i  data-doc="(anonymous)::locked">/* for sanity checking */</i></td></tr>
<tr><th id="29">29</th><td>} <dfn class="typedef" id="lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</dfn>;</td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="32">32</th><td><dfn class="tu decl def" id="lock_dealloc" title='lock_dealloc' data-type='void lock_dealloc(lockobject * self)' data-ref="lock_dealloc">lock_dealloc</dfn>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col1 decl" id="1self" title='self' data-type='lockobject *' data-ref="1self">self</dfn>)</td></tr>
<tr><th id="33">33</th><td>{</td></tr>
<tr><th id="34">34</th><td>    <b>if</b> (<a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::in_weakreflist" title='(anonymous struct)::in_weakreflist' data-use='r' data-ref="(anonymous)::in_weakreflist">in_weakreflist</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="35">35</th><td>        <a class="ref" href="../Include/object.h.html#PyObject_ClearWeakRefs" title='PyObject_ClearWeakRefs' data-ref="PyObject_ClearWeakRefs">PyObject_ClearWeakRefs</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>);</td></tr>
<tr><th id="36">36</th><td>    <b>if</b> (<a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="37">37</th><td>        <i>/* Unlock the lock so it's safe to free it */</i></td></tr>
<tr><th id="38">38</th><td>        <b>if</b> (<a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='r' data-ref="(anonymous)::locked">locked</a>)</td></tr>
<tr><th id="39">39</th><td>            <a class="ref" href="../Include/pythread.h.html#PyThread_release_lock" title='PyThread_release_lock' data-ref="PyThread_release_lock">PyThread_release_lock</a>(<a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a>);</td></tr>
<tr><th id="40">40</th><td>        <a class="ref" href="../Include/pythread.h.html#PyThread_free_lock" title='PyThread_free_lock' data-ref="PyThread_free_lock">PyThread_free_lock</a>(<a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a>);</td></tr>
<tr><th id="41">41</th><td>    }</td></tr>
<tr><th id="42">42</th><td>    <a class="macro" href="../Include/objimpl.h.html#120" title="PyObject_Free" data-ref="_M/PyObject_Del">PyObject_Del</a>(<a class="local col1 ref" href="#1self" title='self' data-ref="1self">self</a>);</td></tr>
<tr><th id="43">43</th><td>}</td></tr>
<tr><th id="44">44</th><td></td></tr>
<tr><th id="45">45</th><td><i  data-doc="acquire_timed">/* Helper to acquire an interruptible lock with a timeout.  If the lock acquire</i></td></tr>
<tr><th id="46">46</th><td><i  data-doc="acquire_timed"> * is interrupted, signal handlers are run, and if they raise an exception,</i></td></tr>
<tr><th id="47">47</th><td><i  data-doc="acquire_timed"> * PY_LOCK_INTR is returned.  Otherwise, PY_LOCK_ACQUIRED or PY_LOCK_FAILURE</i></td></tr>
<tr><th id="48">48</th><td><i  data-doc="acquire_timed"> * are returned, depending on whether the lock can be acquired within the</i></td></tr>
<tr><th id="49">49</th><td><i  data-doc="acquire_timed"> * timeout.</i></td></tr>
<tr><th id="50">50</th><td><i  data-doc="acquire_timed"> */</i></td></tr>
<tr><th id="51">51</th><td><em>static</em> <a class="typedef" href="../Include/pythread.h.html#PyLockStatus" title='PyLockStatus' data-type='enum PyLockStatus' data-ref="PyLockStatus">PyLockStatus</a></td></tr>
<tr><th id="52">52</th><td><dfn class="tu decl def" id="acquire_timed" title='acquire_timed' data-type='PyLockStatus acquire_timed(PyThread_type_lock lock, _PyTime_t timeout)' data-ref="acquire_timed">acquire_timed</dfn>(<a class="typedef" href="../Include/pythread.h.html#PyThread_type_lock" title='PyThread_type_lock' data-type='void *' data-ref="PyThread_type_lock">PyThread_type_lock</a> <dfn class="local col2 decl" id="2lock" title='lock' data-type='PyThread_type_lock' data-ref="2lock">lock</dfn>, <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col3 decl" id="3timeout" title='timeout' data-type='_PyTime_t' data-ref="3timeout">timeout</dfn>)</td></tr>
<tr><th id="53">53</th><td>{</td></tr>
<tr><th id="54">54</th><td>    <a class="typedef" href="../Include/pythread.h.html#PyLockStatus" title='PyLockStatus' data-type='enum PyLockStatus' data-ref="PyLockStatus">PyLockStatus</a> <dfn class="local col4 decl" id="4r" title='r' data-type='PyLockStatus' data-ref="4r">r</dfn>;</td></tr>
<tr><th id="55">55</th><td>    <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col5 decl" id="5endtime" title='endtime' data-type='_PyTime_t' data-ref="5endtime">endtime</dfn> = <var>0</var>;</td></tr>
<tr><th id="56">56</th><td>    <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col6 decl" id="6microseconds" title='microseconds' data-type='_PyTime_t' data-ref="6microseconds">microseconds</dfn>;</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td>    <b>if</b> (<a class="local col3 ref" href="#3timeout" title='timeout' data-ref="3timeout">timeout</a> &gt; <var>0</var>)</td></tr>
<tr><th id="59">59</th><td>        <a class="local col5 ref" href="#5endtime" title='endtime' data-ref="5endtime">endtime</a> = <a class="ref" href="../Include/pytime.h.html#_PyTime_GetMonotonicClock" title='_PyTime_GetMonotonicClock' data-ref="_PyTime_GetMonotonicClock">_PyTime_GetMonotonicClock</a>() + <a class="local col3 ref" href="#3timeout" title='timeout' data-ref="3timeout">timeout</a>;</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td>    <b>do</b> {</td></tr>
<tr><th id="62">62</th><td>        <a class="local col6 ref" href="#6microseconds" title='microseconds' data-ref="6microseconds">microseconds</a> = <a class="ref" href="../Include/pytime.h.html#_PyTime_AsMicroseconds" title='_PyTime_AsMicroseconds' data-ref="_PyTime_AsMicroseconds">_PyTime_AsMicroseconds</a>(<a class="local col3 ref" href="#3timeout" title='timeout' data-ref="3timeout">timeout</a>, <a class="enum" href="../Include/pytime.h.html#_PyTime_ROUND_CEILING" title='_PyTime_ROUND_CEILING' data-ref="_PyTime_ROUND_CEILING">_PyTime_ROUND_CEILING</a>);</td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td>        <i>/* first a simple non-blocking try without releasing the GIL */</i></td></tr>
<tr><th id="65">65</th><td>        <a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_acquire_lock_timed" title='PyThread_acquire_lock_timed' data-ref="PyThread_acquire_lock_timed">PyThread_acquire_lock_timed</a>(<a class="local col2 ref" href="#2lock" title='lock' data-ref="2lock">lock</a>, <var>0</var>, <var>0</var>);</td></tr>
<tr><th id="66">66</th><td>        <b>if</b> (<a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_FAILURE" title='PyLockStatus::PY_LOCK_FAILURE' data-ref="PyLockStatus::PY_LOCK_FAILURE">PY_LOCK_FAILURE</a> &amp;&amp; <a class="local col6 ref" href="#6microseconds" title='microseconds' data-ref="6microseconds">microseconds</a> != <var>0</var>) {</td></tr>
<tr><th id="67">67</th><td>            <a class="macro" href="../Include/ceval.h.html#208" title="{ PyThreadState *_save; _save = PyEval_SaveThread();" data-ref="_M/Py_BEGIN_ALLOW_THREADS">Py_BEGIN_ALLOW_THREADS</a></td></tr>
<tr><th id="68">68</th><td>            <a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_acquire_lock_timed" title='PyThread_acquire_lock_timed' data-ref="PyThread_acquire_lock_timed">PyThread_acquire_lock_timed</a>(<a class="local col2 ref" href="#2lock" title='lock' data-ref="2lock">lock</a>, <a class="local col6 ref" href="#6microseconds" title='microseconds' data-ref="6microseconds">microseconds</a>, <var>1</var>);</td></tr>
<tr><th id="69">69</th><td>            <a class="macro" href="../Include/ceval.h.html#213" title="PyEval_RestoreThread(_save); }" data-ref="_M/Py_END_ALLOW_THREADS">Py_END_ALLOW_THREADS</a></td></tr>
<tr><th id="70">70</th><td>        }</td></tr>
<tr><th id="71">71</th><td></td></tr>
<tr><th id="72">72</th><td>        <b>if</b> (<a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_INTR" title='PyLockStatus::PY_LOCK_INTR' data-ref="PyLockStatus::PY_LOCK_INTR">PY_LOCK_INTR</a>) {</td></tr>
<tr><th id="73">73</th><td>            <i>/* Run signal handlers if we were interrupted.  Propagate</i></td></tr>
<tr><th id="74">74</th><td><i>             * exceptions from signal handlers, such as KeyboardInterrupt, by</i></td></tr>
<tr><th id="75">75</th><td><i>             * passing up PY_LOCK_INTR.  */</i></td></tr>
<tr><th id="76">76</th><td>            <b>if</b> (<a class="ref" href="../Include/ceval.h.html#Py_MakePendingCalls" title='Py_MakePendingCalls' data-ref="Py_MakePendingCalls">Py_MakePendingCalls</a>() &lt; <var>0</var>) {</td></tr>
<tr><th id="77">77</th><td>                <b>return</b> <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_INTR" title='PyLockStatus::PY_LOCK_INTR' data-ref="PyLockStatus::PY_LOCK_INTR">PY_LOCK_INTR</a>;</td></tr>
<tr><th id="78">78</th><td>            }</td></tr>
<tr><th id="79">79</th><td></td></tr>
<tr><th id="80">80</th><td>            <i>/* If we're using a timeout, recompute the timeout after processing</i></td></tr>
<tr><th id="81">81</th><td><i>             * signals, since those can take time.  */</i></td></tr>
<tr><th id="82">82</th><td>            <b>if</b> (<a class="local col3 ref" href="#3timeout" title='timeout' data-ref="3timeout">timeout</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="83">83</th><td>                <a class="local col3 ref" href="#3timeout" title='timeout' data-ref="3timeout">timeout</a> = <a class="local col5 ref" href="#5endtime" title='endtime' data-ref="5endtime">endtime</a> - <a class="ref" href="../Include/pytime.h.html#_PyTime_GetMonotonicClock" title='_PyTime_GetMonotonicClock' data-ref="_PyTime_GetMonotonicClock">_PyTime_GetMonotonicClock</a>();</td></tr>
<tr><th id="84">84</th><td></td></tr>
<tr><th id="85">85</th><td>                <i>/* Check for negative values, since those mean block forever.</i></td></tr>
<tr><th id="86">86</th><td><i>                 */</i></td></tr>
<tr><th id="87">87</th><td>                <b>if</b> (<a class="local col3 ref" href="#3timeout" title='timeout' data-ref="3timeout">timeout</a> &lt; <var>0</var>) {</td></tr>
<tr><th id="88">88</th><td>                    <a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a> = <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_FAILURE" title='PyLockStatus::PY_LOCK_FAILURE' data-ref="PyLockStatus::PY_LOCK_FAILURE">PY_LOCK_FAILURE</a>;</td></tr>
<tr><th id="89">89</th><td>                }</td></tr>
<tr><th id="90">90</th><td>            }</td></tr>
<tr><th id="91">91</th><td>        }</td></tr>
<tr><th id="92">92</th><td>    } <b>while</b> (<a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_INTR" title='PyLockStatus::PY_LOCK_INTR' data-ref="PyLockStatus::PY_LOCK_INTR">PY_LOCK_INTR</a>);  <i>/* Retry if we were interrupted. */</i></td></tr>
<tr><th id="93">93</th><td></td></tr>
<tr><th id="94">94</th><td>    <b>return</b> <a class="local col4 ref" href="#4r" title='r' data-ref="4r">r</a>;</td></tr>
<tr><th id="95">95</th><td>}</td></tr>
<tr><th id="96">96</th><td></td></tr>
<tr><th id="97">97</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="98">98</th><td><dfn class="tu decl def" id="lock_acquire_parse_args" title='lock_acquire_parse_args' data-type='int lock_acquire_parse_args(PyObject * args, PyObject * kwds, _PyTime_t * timeout)' data-ref="lock_acquire_parse_args">lock_acquire_parse_args</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col7 decl" id="7args" title='args' data-type='PyObject *' data-ref="7args">args</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col8 decl" id="8kwds" title='kwds' data-type='PyObject *' data-ref="8kwds">kwds</dfn>,</td></tr>
<tr><th id="99">99</th><td>                        <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> *<dfn class="local col9 decl" id="9timeout" title='timeout' data-type='_PyTime_t *' data-ref="9timeout">timeout</dfn>)</td></tr>
<tr><th id="100">100</th><td>{</td></tr>
<tr><th id="101">101</th><td>    <em>char</em> *<dfn class="local col0 decl" id="10kwlist" title='kwlist' data-type='char *[3]' data-ref="10kwlist">kwlist</dfn>[] = {<q>"blocking"</q>, <q>"timeout"</q>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>};</td></tr>
<tr><th id="102">102</th><td>    <em>int</em> <dfn class="local col1 decl" id="11blocking" title='blocking' data-type='int' data-ref="11blocking">blocking</dfn> = <var>1</var>;</td></tr>
<tr><th id="103">103</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col2 decl" id="12timeout_obj" title='timeout_obj' data-type='PyObject *' data-ref="12timeout_obj">timeout_obj</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="104">104</th><td>    <em>const</em> <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col3 decl" id="13unset_timeout" title='unset_timeout' data-type='const _PyTime_t' data-ref="13unset_timeout">unset_timeout</dfn> = <a class="ref" href="../Include/pytime.h.html#_PyTime_FromSeconds" title='_PyTime_FromSeconds' data-ref="_PyTime_FromSeconds">_PyTime_FromSeconds</a>(-<var>1</var>);</td></tr>
<tr><th id="105">105</th><td></td></tr>
<tr><th id="106">106</th><td>    *<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a> = <a class="local col3 ref" href="#13unset_timeout" title='unset_timeout' data-ref="13unset_timeout">unset_timeout</a> ;</td></tr>
<tr><th id="107">107</th><td></td></tr>
<tr><th id="108">108</th><td>    <b>if</b> (!<a class="ref" href="../Include/modsupport.h.html#PyArg_ParseTupleAndKeywords" title='PyArg_ParseTupleAndKeywords' data-ref="PyArg_ParseTupleAndKeywords">PyArg_ParseTupleAndKeywords</a>(<a class="local col7 ref" href="#7args" title='args' data-ref="7args">args</a>, <a class="local col8 ref" href="#8kwds" title='kwds' data-ref="8kwds">kwds</a>, <q>"|iO:acquire"</q>, <a class="local col0 ref" href="#10kwlist" title='kwlist' data-ref="10kwlist">kwlist</a>,</td></tr>
<tr><th id="109">109</th><td>                                     &amp;<a class="local col1 ref" href="#11blocking" title='blocking' data-ref="11blocking">blocking</a>, &amp;<a class="local col2 ref" href="#12timeout_obj" title='timeout_obj' data-ref="12timeout_obj">timeout_obj</a>))</td></tr>
<tr><th id="110">110</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td>    <b>if</b> (<a class="local col2 ref" href="#12timeout_obj" title='timeout_obj' data-ref="12timeout_obj">timeout_obj</a></td></tr>
<tr><th id="113">113</th><td>        &amp;&amp; <a class="ref" href="../Include/pytime.h.html#_PyTime_FromSecondsObject" title='_PyTime_FromSecondsObject' data-ref="_PyTime_FromSecondsObject">_PyTime_FromSecondsObject</a>(<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a>,</td></tr>
<tr><th id="114">114</th><td>                                     <a class="local col2 ref" href="#12timeout_obj" title='timeout_obj' data-ref="12timeout_obj">timeout_obj</a>, <a class="enum" href="../Include/pytime.h.html#_PyTime_ROUND_CEILING" title='_PyTime_ROUND_CEILING' data-ref="_PyTime_ROUND_CEILING">_PyTime_ROUND_CEILING</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="115">115</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td>    <b>if</b> (!<a class="local col1 ref" href="#11blocking" title='blocking' data-ref="11blocking">blocking</a> &amp;&amp; *<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a> != <a class="local col3 ref" href="#13unset_timeout" title='unset_timeout' data-ref="13unset_timeout">unset_timeout</a> ) {</td></tr>
<tr><th id="118">118</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_ValueError" title='PyExc_ValueError' data-ref="PyExc_ValueError">PyExc_ValueError</a>,</td></tr>
<tr><th id="119">119</th><td>                        <q>"can't specify a timeout for a non-blocking call"</q>);</td></tr>
<tr><th id="120">120</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="121">121</th><td>    }</td></tr>
<tr><th id="122">122</th><td>    <b>if</b> (*<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a> &lt; <var>0</var> &amp;&amp; *<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a> != <a class="local col3 ref" href="#13unset_timeout" title='unset_timeout' data-ref="13unset_timeout">unset_timeout</a>) {</td></tr>
<tr><th id="123">123</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_ValueError" title='PyExc_ValueError' data-ref="PyExc_ValueError">PyExc_ValueError</a>,</td></tr>
<tr><th id="124">124</th><td>                        <q>"timeout value must be positive"</q>);</td></tr>
<tr><th id="125">125</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="126">126</th><td>    }</td></tr>
<tr><th id="127">127</th><td>    <b>if</b> (!<a class="local col1 ref" href="#11blocking" title='blocking' data-ref="11blocking">blocking</a>)</td></tr>
<tr><th id="128">128</th><td>        *<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a> = <var>0</var>;</td></tr>
<tr><th id="129">129</th><td>    <b>else</b> <b>if</b> (*<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a> != <a class="local col3 ref" href="#13unset_timeout" title='unset_timeout' data-ref="13unset_timeout">unset_timeout</a>) {</td></tr>
<tr><th id="130">130</th><td>        <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col4 decl" id="14microseconds" title='microseconds' data-type='_PyTime_t' data-ref="14microseconds">microseconds</dfn>;</td></tr>
<tr><th id="131">131</th><td></td></tr>
<tr><th id="132">132</th><td>        <a class="local col4 ref" href="#14microseconds" title='microseconds' data-ref="14microseconds">microseconds</a> = <a class="ref" href="../Include/pytime.h.html#_PyTime_AsMicroseconds" title='_PyTime_AsMicroseconds' data-ref="_PyTime_AsMicroseconds">_PyTime_AsMicroseconds</a>(*<a class="local col9 ref" href="#9timeout" title='timeout' data-ref="9timeout">timeout</a>, <a class="enum" href="../Include/pytime.h.html#_PyTime_ROUND_CEILING" title='_PyTime_ROUND_CEILING' data-ref="_PyTime_ROUND_CEILING">_PyTime_ROUND_CEILING</a>);</td></tr>
<tr><th id="133">133</th><td>        <b>if</b> (<a class="local col4 ref" href="#14microseconds" title='microseconds' data-ref="14microseconds">microseconds</a> &gt;= <a class="macro" href="../Include/pythread.h.html#45" title="9223372036854775807LL" data-ref="_M/PY_TIMEOUT_MAX">PY_TIMEOUT_MAX</a>) {</td></tr>
<tr><th id="134">134</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_OverflowError" title='PyExc_OverflowError' data-ref="PyExc_OverflowError">PyExc_OverflowError</a>,</td></tr>
<tr><th id="135">135</th><td>                            <q>"timeout value is too large"</q>);</td></tr>
<tr><th id="136">136</th><td>            <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="137">137</th><td>        }</td></tr>
<tr><th id="138">138</th><td>    }</td></tr>
<tr><th id="139">139</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="140">140</th><td>}</td></tr>
<tr><th id="141">141</th><td></td></tr>
<tr><th id="142">142</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="143">143</th><td><dfn class="tu decl def" id="lock_PyThread_acquire_lock" title='lock_PyThread_acquire_lock' data-type='PyObject * lock_PyThread_acquire_lock(lockobject * self, PyObject * args, PyObject * kwds)' data-ref="lock_PyThread_acquire_lock">lock_PyThread_acquire_lock</dfn>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col5 decl" id="15self" title='self' data-type='lockobject *' data-ref="15self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col6 decl" id="16args" title='args' data-type='PyObject *' data-ref="16args">args</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col7 decl" id="17kwds" title='kwds' data-type='PyObject *' data-ref="17kwds">kwds</dfn>)</td></tr>
<tr><th id="144">144</th><td>{</td></tr>
<tr><th id="145">145</th><td>    <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col8 decl" id="18timeout" title='timeout' data-type='_PyTime_t' data-ref="18timeout">timeout</dfn>;</td></tr>
<tr><th id="146">146</th><td>    <a class="typedef" href="../Include/pythread.h.html#PyLockStatus" title='PyLockStatus' data-type='enum PyLockStatus' data-ref="PyLockStatus">PyLockStatus</a> <dfn class="local col9 decl" id="19r" title='r' data-type='PyLockStatus' data-ref="19r">r</dfn>;</td></tr>
<tr><th id="147">147</th><td></td></tr>
<tr><th id="148">148</th><td>    <b>if</b> (<a class="tu ref" href="#lock_acquire_parse_args" title='lock_acquire_parse_args' data-use='c' data-ref="lock_acquire_parse_args">lock_acquire_parse_args</a>(<a class="local col6 ref" href="#16args" title='args' data-ref="16args">args</a>, <a class="local col7 ref" href="#17kwds" title='kwds' data-ref="17kwds">kwds</a>, &amp;<a class="local col8 ref" href="#18timeout" title='timeout' data-ref="18timeout">timeout</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="149">149</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="150">150</th><td></td></tr>
<tr><th id="151">151</th><td>    <a class="local col9 ref" href="#19r" title='r' data-ref="19r">r</a> = <a class="tu ref" href="#acquire_timed" title='acquire_timed' data-use='c' data-ref="acquire_timed">acquire_timed</a>(<a class="local col5 ref" href="#15self" title='self' data-ref="15self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a>, <a class="local col8 ref" href="#18timeout" title='timeout' data-ref="18timeout">timeout</a>);</td></tr>
<tr><th id="152">152</th><td>    <b>if</b> (<a class="local col9 ref" href="#19r" title='r' data-ref="19r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_INTR" title='PyLockStatus::PY_LOCK_INTR' data-ref="PyLockStatus::PY_LOCK_INTR">PY_LOCK_INTR</a>) {</td></tr>
<tr><th id="153">153</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="154">154</th><td>    }</td></tr>
<tr><th id="155">155</th><td></td></tr>
<tr><th id="156">156</th><td>    <b>if</b> (<a class="local col9 ref" href="#19r" title='r' data-ref="19r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_ACQUIRED" title='PyLockStatus::PY_LOCK_ACQUIRED' data-ref="PyLockStatus::PY_LOCK_ACQUIRED">PY_LOCK_ACQUIRED</a>)</td></tr>
<tr><th id="157">157</th><td>        <a class="local col5 ref" href="#15self" title='self' data-ref="15self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='w' data-ref="(anonymous)::locked">locked</a> = <var>1</var>;</td></tr>
<tr><th id="158">158</th><td>    <b>return</b> <a class="ref" href="../Include/boolobject.h.html#PyBool_FromLong" title='PyBool_FromLong' data-ref="PyBool_FromLong">PyBool_FromLong</a>(<a class="local col9 ref" href="#19r" title='r' data-ref="19r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_ACQUIRED" title='PyLockStatus::PY_LOCK_ACQUIRED' data-ref="PyLockStatus::PY_LOCK_ACQUIRED">PY_LOCK_ACQUIRED</a>);</td></tr>
<tr><th id="159">159</th><td>}</td></tr>
<tr><th id="160">160</th><td></td></tr>
<tr><th id="161">161</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char acquire_doc[] = &quot;acquire(blocking=True, timeout=-1) -&gt; bool\n(acquire_lock() is an obsolete synonym)\n\nLock the lock.  Without argument, this blocks if the lock is already\nlocked (even by the same thread), waiting for another thread to release\nthe lock, and return True once the lock is acquired.\nWith an argument, this will only block if the argument is true,\nand the return value reflects whether the lock is acquired.\nThe blocking operation is interruptible.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="acquire_doc" title='acquire_doc' data-ref="acquire_doc">acquire_doc</dfn>,</td></tr>
<tr><th id="162">162</th><td><q>"acquire(blocking=True, timeout=-1) -&gt; bool\n\</q></td></tr>
<tr><th id="163">163</th><td><q>(acquire_lock() is an obsolete synonym)\n\</q></td></tr>
<tr><th id="164">164</th><td><q>\n\</q></td></tr>
<tr><th id="165">165</th><td><q>Lock the lock.  Without argument, this blocks if the lock is already\n\</q></td></tr>
<tr><th id="166">166</th><td><q>locked (even by the same thread), waiting for another thread to release\n\</q></td></tr>
<tr><th id="167">167</th><td><q>the lock, and return True once the lock is acquired.\n\</q></td></tr>
<tr><th id="168">168</th><td><q>With an argument, this will only block if the argument is true,\n\</q></td></tr>
<tr><th id="169">169</th><td><q>and the return value reflects whether the lock is acquired.\n\</q></td></tr>
<tr><th id="170">170</th><td><q>The blocking operation is interruptible."</q>);</td></tr>
<tr><th id="171">171</th><td></td></tr>
<tr><th id="172">172</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="173">173</th><td><dfn class="tu decl def" id="lock_PyThread_release_lock" title='lock_PyThread_release_lock' data-type='PyObject * lock_PyThread_release_lock(lockobject * self)' data-ref="lock_PyThread_release_lock">lock_PyThread_release_lock</dfn>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col0 decl" id="20self" title='self' data-type='lockobject *' data-ref="20self">self</dfn>)</td></tr>
<tr><th id="174">174</th><td>{</td></tr>
<tr><th id="175">175</th><td>    <i>/* Sanity check: the lock must be locked */</i></td></tr>
<tr><th id="176">176</th><td>    <b>if</b> (!<a class="local col0 ref" href="#20self" title='self' data-ref="20self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='r' data-ref="(anonymous)::locked">locked</a>) {</td></tr>
<tr><th id="177">177</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>, <q>"release unlocked lock"</q>);</td></tr>
<tr><th id="178">178</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="179">179</th><td>    }</td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td>    <a class="ref" href="../Include/pythread.h.html#PyThread_release_lock" title='PyThread_release_lock' data-ref="PyThread_release_lock">PyThread_release_lock</a>(<a class="local col0 ref" href="#20self" title='self' data-ref="20self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a>);</td></tr>
<tr><th id="182">182</th><td>    <a class="local col0 ref" href="#20self" title='self' data-ref="20self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='w' data-ref="(anonymous)::locked">locked</a> = <var>0</var>;</td></tr>
<tr><th id="183">183</th><td>    <a class="macro" href="../Include/object.h.html#913" title="return ( _Py_RefTotal++ , ((PyObject *)((&amp;_Py_NoneStruct)))-&gt;ob_refcnt++), (&amp;_Py_NoneStruct)" data-ref="_M/Py_RETURN_NONE">Py_RETURN_NONE</a>;</td></tr>
<tr><th id="184">184</th><td>}</td></tr>
<tr><th id="185">185</th><td></td></tr>
<tr><th id="186">186</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char release_doc[] = &quot;release()\n(release_lock() is an obsolete synonym)\n\nRelease the lock, allowing another thread that is blocked waiting for\nthe lock to acquire the lock.  The lock must be in the locked state,\nbut it needn&apos;t be locked by the same thread that unlocks it.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="release_doc" title='release_doc' data-ref="release_doc">release_doc</dfn>,</td></tr>
<tr><th id="187">187</th><td><q>"release()\n\</q></td></tr>
<tr><th id="188">188</th><td><q>(release_lock() is an obsolete synonym)\n\</q></td></tr>
<tr><th id="189">189</th><td><q>\n\</q></td></tr>
<tr><th id="190">190</th><td><q>Release the lock, allowing another thread that is blocked waiting for\n\</q></td></tr>
<tr><th id="191">191</th><td><q>the lock to acquire the lock.  The lock must be in the locked state,\n\</q></td></tr>
<tr><th id="192">192</th><td><q>but it needn't be locked by the same thread that unlocks it."</q>);</td></tr>
<tr><th id="193">193</th><td></td></tr>
<tr><th id="194">194</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="195">195</th><td><dfn class="tu decl def" id="lock_locked_lock" title='lock_locked_lock' data-type='PyObject * lock_locked_lock(lockobject * self)' data-ref="lock_locked_lock">lock_locked_lock</dfn>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col1 decl" id="21self" title='self' data-type='lockobject *' data-ref="21self">self</dfn>)</td></tr>
<tr><th id="196">196</th><td>{</td></tr>
<tr><th id="197">197</th><td>    <b>return</b> <a class="ref" href="../Include/boolobject.h.html#PyBool_FromLong" title='PyBool_FromLong' data-ref="PyBool_FromLong">PyBool_FromLong</a>((<em>long</em>)<a class="local col1 ref" href="#21self" title='self' data-ref="21self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='r' data-ref="(anonymous)::locked">locked</a>);</td></tr>
<tr><th id="198">198</th><td>}</td></tr>
<tr><th id="199">199</th><td></td></tr>
<tr><th id="200">200</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char locked_doc[] = &quot;locked() -&gt; bool\n(locked_lock() is an obsolete synonym)\n\nReturn whether the lock is in the locked state.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="locked_doc" title='locked_doc' data-ref="locked_doc">locked_doc</dfn>,</td></tr>
<tr><th id="201">201</th><td><q>"locked() -&gt; bool\n\</q></td></tr>
<tr><th id="202">202</th><td><q>(locked_lock() is an obsolete synonym)\n\</q></td></tr>
<tr><th id="203">203</th><td><q>\n\</q></td></tr>
<tr><th id="204">204</th><td><q>Return whether the lock is in the locked state."</q>);</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="207">207</th><td><dfn class="tu decl def" id="lock_repr" title='lock_repr' data-type='PyObject * lock_repr(lockobject * self)' data-ref="lock_repr">lock_repr</dfn>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col2 decl" id="22self" title='self' data-type='lockobject *' data-ref="22self">self</dfn>)</td></tr>
<tr><th id="208">208</th><td>{</td></tr>
<tr><th id="209">209</th><td>    <b>return</b> <a class="ref" href="../Include/unicodeobject.h.html#PyUnicode_FromFormat" title='PyUnicode_FromFormat' data-ref="PyUnicode_FromFormat">PyUnicode_FromFormat</a>(<q>"&lt;%s %s object at %p&gt;"</q>,</td></tr>
<tr><th id="210">210</th><td>        <a class="local col2 ref" href="#22self" title='self' data-ref="22self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='r' data-ref="(anonymous)::locked">locked</a> ? <q>"locked"</q> : <q>"unlocked"</q>, <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col2 ref" href="#22self" title='self' data-ref="22self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_name" title='_typeobject::tp_name' data-ref="_typeobject::tp_name">tp_name</a>, <a class="local col2 ref" href="#22self" title='self' data-ref="22self">self</a>);</td></tr>
<tr><th id="211">211</th><td>}</td></tr>
<tr><th id="212">212</th><td></td></tr>
<tr><th id="213">213</th><td><em>static</em> <a class="typedef" href="../Include/methodobject.h.html#PyMethodDef" title='PyMethodDef' data-type='struct PyMethodDef' data-ref="PyMethodDef">PyMethodDef</a> <dfn class="tu decl def" id="lock_methods" title='lock_methods' data-type='PyMethodDef [9]' data-ref="lock_methods">lock_methods</dfn>[] = {</td></tr>
<tr><th id="214">214</th><td>    {<q>"acquire_lock"</q>, (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_PyThread_acquire_lock" title='lock_PyThread_acquire_lock' data-ref="lock_PyThread_acquire_lock">lock_PyThread_acquire_lock</a>,</td></tr>
<tr><th id="215">215</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a> | <a class="macro" href="../Include/methodobject.h.html#72" title="0x0002" data-ref="_M/METH_KEYWORDS">METH_KEYWORDS</a>, <a class="ref" href="#161" title='acquire_doc' data-ref="acquire_doc">acquire_doc</a>},</td></tr>
<tr><th id="216">216</th><td>    {<q>"acquire"</q>,      (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_PyThread_acquire_lock" title='lock_PyThread_acquire_lock' data-ref="lock_PyThread_acquire_lock">lock_PyThread_acquire_lock</a>,</td></tr>
<tr><th id="217">217</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a> | <a class="macro" href="../Include/methodobject.h.html#72" title="0x0002" data-ref="_M/METH_KEYWORDS">METH_KEYWORDS</a>, <a class="ref" href="#161" title='acquire_doc' data-ref="acquire_doc">acquire_doc</a>},</td></tr>
<tr><th id="218">218</th><td>    {<q>"release_lock"</q>, (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_PyThread_release_lock" title='lock_PyThread_release_lock' data-ref="lock_PyThread_release_lock">lock_PyThread_release_lock</a>,</td></tr>
<tr><th id="219">219</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#186" title='release_doc' data-ref="release_doc">release_doc</a>},</td></tr>
<tr><th id="220">220</th><td>    {<q>"release"</q>,      (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_PyThread_release_lock" title='lock_PyThread_release_lock' data-ref="lock_PyThread_release_lock">lock_PyThread_release_lock</a>,</td></tr>
<tr><th id="221">221</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#186" title='release_doc' data-ref="release_doc">release_doc</a>},</td></tr>
<tr><th id="222">222</th><td>    {<q>"locked_lock"</q>,  (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_locked_lock" title='lock_locked_lock' data-ref="lock_locked_lock">lock_locked_lock</a>,</td></tr>
<tr><th id="223">223</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#200" title='locked_doc' data-ref="locked_doc">locked_doc</a>},</td></tr>
<tr><th id="224">224</th><td>    {<q>"locked"</q>,       (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_locked_lock" title='lock_locked_lock' data-ref="lock_locked_lock">lock_locked_lock</a>,</td></tr>
<tr><th id="225">225</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#200" title='locked_doc' data-ref="locked_doc">locked_doc</a>},</td></tr>
<tr><th id="226">226</th><td>    {<q>"__enter__"</q>,    (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_PyThread_acquire_lock" title='lock_PyThread_acquire_lock' data-ref="lock_PyThread_acquire_lock">lock_PyThread_acquire_lock</a>,</td></tr>
<tr><th id="227">227</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a> | <a class="macro" href="../Include/methodobject.h.html#72" title="0x0002" data-ref="_M/METH_KEYWORDS">METH_KEYWORDS</a>, <a class="ref" href="#161" title='acquire_doc' data-ref="acquire_doc">acquire_doc</a>},</td></tr>
<tr><th id="228">228</th><td>    {<q>"__exit__"</q>,    (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#lock_PyThread_release_lock" title='lock_PyThread_release_lock' data-ref="lock_PyThread_release_lock">lock_PyThread_release_lock</a>,</td></tr>
<tr><th id="229">229</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a>, <a class="ref" href="#186" title='release_doc' data-ref="release_doc">release_doc</a>},</td></tr>
<tr><th id="230">230</th><td>    {<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,           <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>}              <i>/* sentinel */</i></td></tr>
<tr><th id="231">231</th><td>};</td></tr>
<tr><th id="232">232</th><td></td></tr>
<tr><th id="233">233</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyTypeObject" title='PyTypeObject' data-type='struct _typeobject' data-ref="PyTypeObject">PyTypeObject</a> <dfn class="tu decl def" id="Locktype" title='Locktype' data-type='PyTypeObject' data-ref="Locktype">Locktype</dfn> = {</td></tr>
<tr><th id="234">234</th><td>    <a class="macro" href="../Include/object.h.html#89" title="{ { 0, 0, 1, &amp;PyType_Type }, 0 }," data-ref="_M/PyVarObject_HEAD_INIT">PyVarObject_HEAD_INIT</a>(&amp;<a class="ref" href="../Include/object.h.html#PyType_Type" title='PyType_Type' data-ref="PyType_Type">PyType_Type</a>, <var>0</var>)</td></tr>
<tr><th id="235">235</th><td>    <q>"_thread.lock"</q>,                     <i>/*tp_name*/</i></td></tr>
<tr><th id="236">236</th><td>    <b>sizeof</b>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a>),                 <i>/*tp_size*/</i></td></tr>
<tr><th id="237">237</th><td>    <var>0</var>,                                  <i>/*tp_itemsize*/</i></td></tr>
<tr><th id="238">238</th><td>    <i>/* methods */</i></td></tr>
<tr><th id="239">239</th><td>    (<a class="typedef" href="../Include/object.h.html#destructor" title='destructor' data-type='void (*)(PyObject *)' data-ref="destructor">destructor</a>)<a class="tu ref" href="#lock_dealloc" title='lock_dealloc' data-ref="lock_dealloc">lock_dealloc</a>,           <i>/*tp_dealloc*/</i></td></tr>
<tr><th id="240">240</th><td>    <var>0</var>,                                  <i>/*tp_print*/</i></td></tr>
<tr><th id="241">241</th><td>    <var>0</var>,                                  <i>/*tp_getattr*/</i></td></tr>
<tr><th id="242">242</th><td>    <var>0</var>,                                  <i>/*tp_setattr*/</i></td></tr>
<tr><th id="243">243</th><td>    <var>0</var>,                                  <i>/*tp_reserved*/</i></td></tr>
<tr><th id="244">244</th><td>    (<a class="typedef" href="../Include/object.h.html#reprfunc" title='reprfunc' data-type='PyObject *(*)(PyObject *)' data-ref="reprfunc">reprfunc</a>)<a class="tu ref" href="#lock_repr" title='lock_repr' data-ref="lock_repr">lock_repr</a>,                <i>/*tp_repr*/</i></td></tr>
<tr><th id="245">245</th><td>    <var>0</var>,                                  <i>/*tp_as_number*/</i></td></tr>
<tr><th id="246">246</th><td>    <var>0</var>,                                  <i>/*tp_as_sequence*/</i></td></tr>
<tr><th id="247">247</th><td>    <var>0</var>,                                  <i>/*tp_as_mapping*/</i></td></tr>
<tr><th id="248">248</th><td>    <var>0</var>,                                  <i>/*tp_hash*/</i></td></tr>
<tr><th id="249">249</th><td>    <var>0</var>,                                  <i>/*tp_call*/</i></td></tr>
<tr><th id="250">250</th><td>    <var>0</var>,                                  <i>/*tp_str*/</i></td></tr>
<tr><th id="251">251</th><td>    <var>0</var>,                                  <i>/*tp_getattro*/</i></td></tr>
<tr><th id="252">252</th><td>    <var>0</var>,                                  <i>/*tp_setattro*/</i></td></tr>
<tr><th id="253">253</th><td>    <var>0</var>,                                  <i>/*tp_as_buffer*/</i></td></tr>
<tr><th id="254">254</th><td>    <a class="macro" href="../Include/object.h.html#658" title="( 0 | (1UL &lt;&lt; 18) | 0)" data-ref="_M/Py_TPFLAGS_DEFAULT">Py_TPFLAGS_DEFAULT</a>,                 <i>/*tp_flags*/</i></td></tr>
<tr><th id="255">255</th><td>    <var>0</var>,                                  <i>/*tp_doc*/</i></td></tr>
<tr><th id="256">256</th><td>    <var>0</var>,                                  <i>/*tp_traverse*/</i></td></tr>
<tr><th id="257">257</th><td>    <var>0</var>,                                  <i>/*tp_clear*/</i></td></tr>
<tr><th id="258">258</th><td>    <var>0</var>,                                  <i>/*tp_richcompare*/</i></td></tr>
<tr><th id="259">259</th><td>    <span class="macro" title="__builtin_offsetof(lockobject, in_weakreflist)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a>, in_weakreflist), <i>/*tp_weaklistoffset*/</i></td></tr>
<tr><th id="260">260</th><td>    <var>0</var>,                                  <i>/*tp_iter*/</i></td></tr>
<tr><th id="261">261</th><td>    <var>0</var>,                                  <i>/*tp_iternext*/</i></td></tr>
<tr><th id="262">262</th><td>    <a class="tu ref" href="#lock_methods" title='lock_methods' data-ref="lock_methods">lock_methods</a>,                       <i>/*tp_methods*/</i></td></tr>
<tr><th id="263">263</th><td>};</td></tr>
<tr><th id="264">264</th><td></td></tr>
<tr><th id="265">265</th><td><i>/* Recursive lock objects */</i></td></tr>
<tr><th id="266">266</th><td></td></tr>
<tr><th id="267">267</th><td><b>typedef</b> <b>struct</b> {</td></tr>
<tr><th id="268">268</th><td>    <a class="macro" href="../Include/object.h.html#83" title="PyObject ob_base;" data-ref="_M/PyObject_HEAD">PyObject_HEAD</a></td></tr>
<tr><th id="269">269</th><td>    <a class="typedef" href="../Include/pythread.h.html#PyThread_type_lock" title='PyThread_type_lock' data-type='void *' data-ref="PyThread_type_lock">PyThread_type_lock</a> <dfn class="tu decl" id="(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-type='PyThread_type_lock' data-ref="(anonymous)::rlock_lock">rlock_lock</dfn>;</td></tr>
<tr><th id="270">270</th><td>    <em>unsigned</em> <em>long</em> <dfn class="tu decl" id="(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-type='unsigned long' data-ref="(anonymous)::rlock_owner">rlock_owner</dfn>;</td></tr>
<tr><th id="271">271</th><td>    <em>unsigned</em> <em>long</em> <dfn class="tu decl" id="(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-type='unsigned long' data-ref="(anonymous)::rlock_count">rlock_count</dfn>;</td></tr>
<tr><th id="272">272</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::in_weakreflist" title='(anonymous struct)::in_weakreflist' data-type='PyObject *' data-ref="(anonymous)::in_weakreflist">in_weakreflist</dfn>;</td></tr>
<tr><th id="273">273</th><td>} <dfn class="typedef" id="rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</dfn>;</td></tr>
<tr><th id="274">274</th><td></td></tr>
<tr><th id="275">275</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="276">276</th><td><dfn class="tu decl def" id="rlock_dealloc" title='rlock_dealloc' data-type='void rlock_dealloc(rlockobject * self)' data-ref="rlock_dealloc">rlock_dealloc</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col3 decl" id="23self" title='self' data-type='rlockobject *' data-ref="23self">self</dfn>)</td></tr>
<tr><th id="277">277</th><td>{</td></tr>
<tr><th id="278">278</th><td>    <b>if</b> (<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::in_weakreflist" title='(anonymous struct)::in_weakreflist' data-use='r' data-ref="(anonymous)::in_weakreflist">in_weakreflist</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="279">279</th><td>        <a class="ref" href="../Include/object.h.html#PyObject_ClearWeakRefs" title='PyObject_ClearWeakRefs' data-ref="PyObject_ClearWeakRefs">PyObject_ClearWeakRefs</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>);</td></tr>
<tr><th id="280">280</th><td>    <i>/* self-&gt;rlock_lock can be NULL if PyThread_allocate_lock() failed</i></td></tr>
<tr><th id="281">281</th><td><i>       in rlock_new() */</i></td></tr>
<tr><th id="282">282</th><td>    <b>if</b> (<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="283">283</th><td>        <i>/* Unlock the lock so it's safe to free it */</i></td></tr>
<tr><th id="284">284</th><td>        <b>if</b> (<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> &gt; <var>0</var>)</td></tr>
<tr><th id="285">285</th><td>            <a class="ref" href="../Include/pythread.h.html#PyThread_release_lock" title='PyThread_release_lock' data-ref="PyThread_release_lock">PyThread_release_lock</a>(<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>);</td></tr>
<tr><th id="286">286</th><td></td></tr>
<tr><th id="287">287</th><td>        <a class="ref" href="../Include/pythread.h.html#PyThread_free_lock" title='PyThread_free_lock' data-ref="PyThread_free_lock">PyThread_free_lock</a>(<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>);</td></tr>
<tr><th id="288">288</th><td>    }</td></tr>
<tr><th id="289">289</th><td>    <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_free" title='_typeobject::tp_free' data-ref="_typeobject::tp_free">tp_free</a>(<a class="local col3 ref" href="#23self" title='self' data-ref="23self">self</a>);</td></tr>
<tr><th id="290">290</th><td>}</td></tr>
<tr><th id="291">291</th><td></td></tr>
<tr><th id="292">292</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="293">293</th><td><dfn class="tu decl def" id="rlock_acquire" title='rlock_acquire' data-type='PyObject * rlock_acquire(rlockobject * self, PyObject * args, PyObject * kwds)' data-ref="rlock_acquire">rlock_acquire</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col4 decl" id="24self" title='self' data-type='rlockobject *' data-ref="24self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col5 decl" id="25args" title='args' data-type='PyObject *' data-ref="25args">args</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col6 decl" id="26kwds" title='kwds' data-type='PyObject *' data-ref="26kwds">kwds</dfn>)</td></tr>
<tr><th id="294">294</th><td>{</td></tr>
<tr><th id="295">295</th><td>    <a class="typedef" href="../Include/pytime.h.html#_PyTime_t" title='_PyTime_t' data-type='int64_t' data-ref="_PyTime_t">_PyTime_t</a> <dfn class="local col7 decl" id="27timeout" title='timeout' data-type='_PyTime_t' data-ref="27timeout">timeout</dfn>;</td></tr>
<tr><th id="296">296</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col8 decl" id="28tid" title='tid' data-type='unsigned long' data-ref="28tid">tid</dfn>;</td></tr>
<tr><th id="297">297</th><td>    <a class="typedef" href="../Include/pythread.h.html#PyLockStatus" title='PyLockStatus' data-type='enum PyLockStatus' data-ref="PyLockStatus">PyLockStatus</a> <dfn class="local col9 decl" id="29r" title='r' data-type='PyLockStatus' data-ref="29r">r</dfn> = <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_ACQUIRED" title='PyLockStatus::PY_LOCK_ACQUIRED' data-ref="PyLockStatus::PY_LOCK_ACQUIRED">PY_LOCK_ACQUIRED</a>;</td></tr>
<tr><th id="298">298</th><td></td></tr>
<tr><th id="299">299</th><td>    <b>if</b> (<a class="tu ref" href="#lock_acquire_parse_args" title='lock_acquire_parse_args' data-use='c' data-ref="lock_acquire_parse_args">lock_acquire_parse_args</a>(<a class="local col5 ref" href="#25args" title='args' data-ref="25args">args</a>, <a class="local col6 ref" href="#26kwds" title='kwds' data-ref="26kwds">kwds</a>, &amp;<a class="local col7 ref" href="#27timeout" title='timeout' data-ref="27timeout">timeout</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="300">300</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="301">301</th><td></td></tr>
<tr><th id="302">302</th><td>    <a class="local col8 ref" href="#28tid" title='tid' data-ref="28tid">tid</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_get_thread_ident" title='PyThread_get_thread_ident' data-ref="PyThread_get_thread_ident">PyThread_get_thread_ident</a>();</td></tr>
<tr><th id="303">303</th><td>    <b>if</b> (<a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> &gt; <var>0</var> &amp;&amp; <a class="local col8 ref" href="#28tid" title='tid' data-ref="28tid">tid</a> == <a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='r' data-ref="(anonymous)::rlock_owner">rlock_owner</a>) {</td></tr>
<tr><th id="304">304</th><td>        <em>unsigned</em> <em>long</em> <dfn class="local col0 decl" id="30count" title='count' data-type='unsigned long' data-ref="30count">count</dfn> = <a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> + <var>1</var>;</td></tr>
<tr><th id="305">305</th><td>        <b>if</b> (<a class="local col0 ref" href="#30count" title='count' data-ref="30count">count</a> &lt;= <a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a>) {</td></tr>
<tr><th id="306">306</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_OverflowError" title='PyExc_OverflowError' data-ref="PyExc_OverflowError">PyExc_OverflowError</a>,</td></tr>
<tr><th id="307">307</th><td>                            <q>"Internal lock count overflowed"</q>);</td></tr>
<tr><th id="308">308</th><td>            <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="309">309</th><td>        }</td></tr>
<tr><th id="310">310</th><td>        <a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='w' data-ref="(anonymous)::rlock_count">rlock_count</a> = <a class="local col0 ref" href="#30count" title='count' data-ref="30count">count</a>;</td></tr>
<tr><th id="311">311</th><td>        <a class="macro" href="../Include/boolobject.h.html#25" title="return ( _Py_RefTotal++ , ((PyObject *)(((PyObject *) &amp;_Py_TrueStruct)))-&gt;ob_refcnt++), ((PyObject *) &amp;_Py_TrueStruct)" data-ref="_M/Py_RETURN_TRUE">Py_RETURN_TRUE</a>;</td></tr>
<tr><th id="312">312</th><td>    }</td></tr>
<tr><th id="313">313</th><td>    <a class="local col9 ref" href="#29r" title='r' data-ref="29r">r</a> = <a class="tu ref" href="#acquire_timed" title='acquire_timed' data-use='c' data-ref="acquire_timed">acquire_timed</a>(<a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>, <a class="local col7 ref" href="#27timeout" title='timeout' data-ref="27timeout">timeout</a>);</td></tr>
<tr><th id="314">314</th><td>    <b>if</b> (<a class="local col9 ref" href="#29r" title='r' data-ref="29r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_ACQUIRED" title='PyLockStatus::PY_LOCK_ACQUIRED' data-ref="PyLockStatus::PY_LOCK_ACQUIRED">PY_LOCK_ACQUIRED</a>) {</td></tr>
<tr><th id="315">315</th><td>        <a class="macro" href="../../include/assert.h.html#88" title="((self-&gt;rlock_count == 0) ? (void) (0) : __assert_fail (&quot;self-&gt;rlock_count == 0&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 315, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> == <var>0</var>);</td></tr>
<tr><th id="316">316</th><td>        <a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='w' data-ref="(anonymous)::rlock_owner">rlock_owner</a> = <a class="local col8 ref" href="#28tid" title='tid' data-ref="28tid">tid</a>;</td></tr>
<tr><th id="317">317</th><td>        <a class="local col4 ref" href="#24self" title='self' data-ref="24self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='w' data-ref="(anonymous)::rlock_count">rlock_count</a> = <var>1</var>;</td></tr>
<tr><th id="318">318</th><td>    }</td></tr>
<tr><th id="319">319</th><td>    <b>else</b> <b>if</b> (<a class="local col9 ref" href="#29r" title='r' data-ref="29r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_INTR" title='PyLockStatus::PY_LOCK_INTR' data-ref="PyLockStatus::PY_LOCK_INTR">PY_LOCK_INTR</a>) {</td></tr>
<tr><th id="320">320</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="321">321</th><td>    }</td></tr>
<tr><th id="322">322</th><td></td></tr>
<tr><th id="323">323</th><td>    <b>return</b> <a class="ref" href="../Include/boolobject.h.html#PyBool_FromLong" title='PyBool_FromLong' data-ref="PyBool_FromLong">PyBool_FromLong</a>(<a class="local col9 ref" href="#29r" title='r' data-ref="29r">r</a> == <a class="enum" href="../Include/pythread.h.html#PyLockStatus::PY_LOCK_ACQUIRED" title='PyLockStatus::PY_LOCK_ACQUIRED' data-ref="PyLockStatus::PY_LOCK_ACQUIRED">PY_LOCK_ACQUIRED</a>);</td></tr>
<tr><th id="324">324</th><td>}</td></tr>
<tr><th id="325">325</th><td></td></tr>
<tr><th id="326">326</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char rlock_acquire_doc[] = &quot;acquire(blocking=True) -&gt; bool\n\nLock the lock.  `blocking` indicates whether we should wait\nfor the lock to be available or not.  If `blocking` is False\nand another thread holds the lock, the method will return False\nimmediately.  If `blocking` is True and another thread holds\nthe lock, the method will wait for the lock to be released,\ntake it and then return True.\n(note: the blocking operation is interruptible.)\n\nIn all other cases, the method will return True immediately.\nPrecisely, if the current thread already holds the lock, its\ninternal counter is simply incremented. If nobody holds the lock,\nthe lock is taken and its internal counter initialized to 1.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="rlock_acquire_doc" title='rlock_acquire_doc' data-ref="rlock_acquire_doc">rlock_acquire_doc</dfn>,</td></tr>
<tr><th id="327">327</th><td><q>"acquire(blocking=True) -&gt; bool\n\</q></td></tr>
<tr><th id="328">328</th><td><q>\n\</q></td></tr>
<tr><th id="329">329</th><td><q>Lock the lock.  `blocking` indicates whether we should wait\n\</q></td></tr>
<tr><th id="330">330</th><td><q>for the lock to be available or not.  If `blocking` is False\n\</q></td></tr>
<tr><th id="331">331</th><td><q>and another thread holds the lock, the method will return False\n\</q></td></tr>
<tr><th id="332">332</th><td><q>immediately.  If `blocking` is True and another thread holds\n\</q></td></tr>
<tr><th id="333">333</th><td><q>the lock, the method will wait for the lock to be released,\n\</q></td></tr>
<tr><th id="334">334</th><td><q>take it and then return True.\n\</q></td></tr>
<tr><th id="335">335</th><td><q>(note: the blocking operation is interruptible.)\n\</q></td></tr>
<tr><th id="336">336</th><td><q>\n\</q></td></tr>
<tr><th id="337">337</th><td><q>In all other cases, the method will return True immediately.\n\</q></td></tr>
<tr><th id="338">338</th><td><q>Precisely, if the current thread already holds the lock, its\n\</q></td></tr>
<tr><th id="339">339</th><td><q>internal counter is simply incremented. If nobody holds the lock,\n\</q></td></tr>
<tr><th id="340">340</th><td><q>the lock is taken and its internal counter initialized to 1."</q>);</td></tr>
<tr><th id="341">341</th><td></td></tr>
<tr><th id="342">342</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="343">343</th><td><dfn class="tu decl def" id="rlock_release" title='rlock_release' data-type='PyObject * rlock_release(rlockobject * self)' data-ref="rlock_release">rlock_release</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col1 decl" id="31self" title='self' data-type='rlockobject *' data-ref="31self">self</dfn>)</td></tr>
<tr><th id="344">344</th><td>{</td></tr>
<tr><th id="345">345</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col2 decl" id="32tid" title='tid' data-type='unsigned long' data-ref="32tid">tid</dfn> = <a class="ref" href="../Include/pythread.h.html#PyThread_get_thread_ident" title='PyThread_get_thread_ident' data-ref="PyThread_get_thread_ident">PyThread_get_thread_ident</a>();</td></tr>
<tr><th id="346">346</th><td></td></tr>
<tr><th id="347">347</th><td>    <b>if</b> (<a class="local col1 ref" href="#31self" title='self' data-ref="31self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> == <var>0</var> || <a class="local col1 ref" href="#31self" title='self' data-ref="31self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='r' data-ref="(anonymous)::rlock_owner">rlock_owner</a> != <a class="local col2 ref" href="#32tid" title='tid' data-ref="32tid">tid</a>) {</td></tr>
<tr><th id="348">348</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_RuntimeError" title='PyExc_RuntimeError' data-ref="PyExc_RuntimeError">PyExc_RuntimeError</a>,</td></tr>
<tr><th id="349">349</th><td>                        <q>"cannot release un-acquired lock"</q>);</td></tr>
<tr><th id="350">350</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="351">351</th><td>    }</td></tr>
<tr><th id="352">352</th><td>    <b>if</b> (--<a class="local col1 ref" href="#31self" title='self' data-ref="31self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='w' data-ref="(anonymous)::rlock_count">rlock_count</a> == <var>0</var>) {</td></tr>
<tr><th id="353">353</th><td>        <a class="local col1 ref" href="#31self" title='self' data-ref="31self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='w' data-ref="(anonymous)::rlock_owner">rlock_owner</a> = <var>0</var>;</td></tr>
<tr><th id="354">354</th><td>        <a class="ref" href="../Include/pythread.h.html#PyThread_release_lock" title='PyThread_release_lock' data-ref="PyThread_release_lock">PyThread_release_lock</a>(<a class="local col1 ref" href="#31self" title='self' data-ref="31self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>);</td></tr>
<tr><th id="355">355</th><td>    }</td></tr>
<tr><th id="356">356</th><td>    <a class="macro" href="../Include/object.h.html#913" title="return ( _Py_RefTotal++ , ((PyObject *)((&amp;_Py_NoneStruct)))-&gt;ob_refcnt++), (&amp;_Py_NoneStruct)" data-ref="_M/Py_RETURN_NONE">Py_RETURN_NONE</a>;</td></tr>
<tr><th id="357">357</th><td>}</td></tr>
<tr><th id="358">358</th><td></td></tr>
<tr><th id="359">359</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char rlock_release_doc[] = &quot;release()\n\nRelease the lock, allowing another thread that is blocked waiting for\nthe lock to acquire the lock.  The lock must be in the locked state,\nand must be locked by the same thread that unlocks it; otherwise a\n`RuntimeError` is raised.\n\nDo note that if the lock was acquire()d several times in a row by the\ncurrent thread, release() needs to be called as many times for the lock\nto be available for other threads.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="rlock_release_doc" title='rlock_release_doc' data-ref="rlock_release_doc">rlock_release_doc</dfn>,</td></tr>
<tr><th id="360">360</th><td><q>"release()\n\</q></td></tr>
<tr><th id="361">361</th><td><q>\n\</q></td></tr>
<tr><th id="362">362</th><td><q>Release the lock, allowing another thread that is blocked waiting for\n\</q></td></tr>
<tr><th id="363">363</th><td><q>the lock to acquire the lock.  The lock must be in the locked state,\n\</q></td></tr>
<tr><th id="364">364</th><td><q>and must be locked by the same thread that unlocks it; otherwise a\n\</q></td></tr>
<tr><th id="365">365</th><td><q>`RuntimeError` is raised.\n\</q></td></tr>
<tr><th id="366">366</th><td><q>\n\</q></td></tr>
<tr><th id="367">367</th><td><q>Do note that if the lock was acquire()d several times in a row by the\n\</q></td></tr>
<tr><th id="368">368</th><td><q>current thread, release() needs to be called as many times for the lock\n\</q></td></tr>
<tr><th id="369">369</th><td><q>to be available for other threads."</q>);</td></tr>
<tr><th id="370">370</th><td></td></tr>
<tr><th id="371">371</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="372">372</th><td><dfn class="tu decl def" id="rlock_acquire_restore" title='rlock_acquire_restore' data-type='PyObject * rlock_acquire_restore(rlockobject * self, PyObject * args)' data-ref="rlock_acquire_restore">rlock_acquire_restore</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col3 decl" id="33self" title='self' data-type='rlockobject *' data-ref="33self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col4 decl" id="34args" title='args' data-type='PyObject *' data-ref="34args">args</dfn>)</td></tr>
<tr><th id="373">373</th><td>{</td></tr>
<tr><th id="374">374</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col5 decl" id="35owner" title='owner' data-type='unsigned long' data-ref="35owner">owner</dfn>;</td></tr>
<tr><th id="375">375</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col6 decl" id="36count" title='count' data-type='unsigned long' data-ref="36count">count</dfn>;</td></tr>
<tr><th id="376">376</th><td>    <em>int</em> <dfn class="local col7 decl" id="37r" title='r' data-type='int' data-ref="37r">r</dfn> = <var>1</var>;</td></tr>
<tr><th id="377">377</th><td></td></tr>
<tr><th id="378">378</th><td>    <b>if</b> (!<a class="ref" href="../Include/modsupport.h.html#PyArg_ParseTuple" title='PyArg_ParseTuple' data-ref="PyArg_ParseTuple">PyArg_ParseTuple</a>(<a class="local col4 ref" href="#34args" title='args' data-ref="34args">args</a>, <q>"(kk):_acquire_restore"</q>, &amp;<a class="local col6 ref" href="#36count" title='count' data-ref="36count">count</a>, &amp;<a class="local col5 ref" href="#35owner" title='owner' data-ref="35owner">owner</a>))</td></tr>
<tr><th id="379">379</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="380">380</th><td></td></tr>
<tr><th id="381">381</th><td>    <b>if</b> (!<a class="ref" href="../Include/pythread.h.html#PyThread_acquire_lock" title='PyThread_acquire_lock' data-ref="PyThread_acquire_lock">PyThread_acquire_lock</a>(<a class="local col3 ref" href="#33self" title='self' data-ref="33self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>, <var>0</var>)) {</td></tr>
<tr><th id="382">382</th><td>        <a class="macro" href="../Include/ceval.h.html#208" title="{ PyThreadState *_save; _save = PyEval_SaveThread();" data-ref="_M/Py_BEGIN_ALLOW_THREADS">Py_BEGIN_ALLOW_THREADS</a></td></tr>
<tr><th id="383">383</th><td>        <a class="local col7 ref" href="#37r" title='r' data-ref="37r">r</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_acquire_lock" title='PyThread_acquire_lock' data-ref="PyThread_acquire_lock">PyThread_acquire_lock</a>(<a class="local col3 ref" href="#33self" title='self' data-ref="33self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>, <var>1</var>);</td></tr>
<tr><th id="384">384</th><td>        <a class="macro" href="../Include/ceval.h.html#213" title="PyEval_RestoreThread(_save); }" data-ref="_M/Py_END_ALLOW_THREADS">Py_END_ALLOW_THREADS</a></td></tr>
<tr><th id="385">385</th><td>    }</td></tr>
<tr><th id="386">386</th><td>    <b>if</b> (!<a class="local col7 ref" href="#37r" title='r' data-ref="37r">r</a>) {</td></tr>
<tr><th id="387">387</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>, <q>"couldn't acquire lock"</q>);</td></tr>
<tr><th id="388">388</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="389">389</th><td>    }</td></tr>
<tr><th id="390">390</th><td>    <a class="macro" href="../../include/assert.h.html#88" title="((self-&gt;rlock_count == 0) ? (void) (0) : __assert_fail (&quot;self-&gt;rlock_count == 0&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 390, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col3 ref" href="#33self" title='self' data-ref="33self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> == <var>0</var>);</td></tr>
<tr><th id="391">391</th><td>    <a class="local col3 ref" href="#33self" title='self' data-ref="33self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='w' data-ref="(anonymous)::rlock_owner">rlock_owner</a> = <a class="local col5 ref" href="#35owner" title='owner' data-ref="35owner">owner</a>;</td></tr>
<tr><th id="392">392</th><td>    <a class="local col3 ref" href="#33self" title='self' data-ref="33self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='w' data-ref="(anonymous)::rlock_count">rlock_count</a> = <a class="local col6 ref" href="#36count" title='count' data-ref="36count">count</a>;</td></tr>
<tr><th id="393">393</th><td>    <a class="macro" href="../Include/object.h.html#913" title="return ( _Py_RefTotal++ , ((PyObject *)((&amp;_Py_NoneStruct)))-&gt;ob_refcnt++), (&amp;_Py_NoneStruct)" data-ref="_M/Py_RETURN_NONE">Py_RETURN_NONE</a>;</td></tr>
<tr><th id="394">394</th><td>}</td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char rlock_acquire_restore_doc[] = &quot;_acquire_restore(state) -&gt; None\n\nFor internal use by `threading.Condition`.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="rlock_acquire_restore_doc" title='rlock_acquire_restore_doc' data-ref="rlock_acquire_restore_doc">rlock_acquire_restore_doc</dfn>,</td></tr>
<tr><th id="397">397</th><td><q>"_acquire_restore(state) -&gt; None\n\</q></td></tr>
<tr><th id="398">398</th><td><q>\n\</q></td></tr>
<tr><th id="399">399</th><td><q>For internal use by `threading.Condition`."</q>);</td></tr>
<tr><th id="400">400</th><td></td></tr>
<tr><th id="401">401</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="402">402</th><td><dfn class="tu decl def" id="rlock_release_save" title='rlock_release_save' data-type='PyObject * rlock_release_save(rlockobject * self)' data-ref="rlock_release_save">rlock_release_save</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col8 decl" id="38self" title='self' data-type='rlockobject *' data-ref="38self">self</dfn>)</td></tr>
<tr><th id="403">403</th><td>{</td></tr>
<tr><th id="404">404</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col9 decl" id="39owner" title='owner' data-type='unsigned long' data-ref="39owner">owner</dfn>;</td></tr>
<tr><th id="405">405</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col0 decl" id="40count" title='count' data-type='unsigned long' data-ref="40count">count</dfn>;</td></tr>
<tr><th id="406">406</th><td></td></tr>
<tr><th id="407">407</th><td>    <b>if</b> (<a class="local col8 ref" href="#38self" title='self' data-ref="38self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> == <var>0</var>) {</td></tr>
<tr><th id="408">408</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_RuntimeError" title='PyExc_RuntimeError' data-ref="PyExc_RuntimeError">PyExc_RuntimeError</a>,</td></tr>
<tr><th id="409">409</th><td>                        <q>"cannot release un-acquired lock"</q>);</td></tr>
<tr><th id="410">410</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="411">411</th><td>    }</td></tr>
<tr><th id="412">412</th><td></td></tr>
<tr><th id="413">413</th><td>    <a class="local col9 ref" href="#39owner" title='owner' data-ref="39owner">owner</a> = <a class="local col8 ref" href="#38self" title='self' data-ref="38self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='r' data-ref="(anonymous)::rlock_owner">rlock_owner</a>;</td></tr>
<tr><th id="414">414</th><td>    <a class="local col0 ref" href="#40count" title='count' data-ref="40count">count</a> = <a class="local col8 ref" href="#38self" title='self' data-ref="38self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a>;</td></tr>
<tr><th id="415">415</th><td>    <a class="local col8 ref" href="#38self" title='self' data-ref="38self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='w' data-ref="(anonymous)::rlock_count">rlock_count</a> = <var>0</var>;</td></tr>
<tr><th id="416">416</th><td>    <a class="local col8 ref" href="#38self" title='self' data-ref="38self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='w' data-ref="(anonymous)::rlock_owner">rlock_owner</a> = <var>0</var>;</td></tr>
<tr><th id="417">417</th><td>    <a class="ref" href="../Include/pythread.h.html#PyThread_release_lock" title='PyThread_release_lock' data-ref="PyThread_release_lock">PyThread_release_lock</a>(<a class="local col8 ref" href="#38self" title='self' data-ref="38self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a>);</td></tr>
<tr><th id="418">418</th><td>    <b>return</b> <a class="ref" href="../Include/modsupport.h.html#Py_BuildValue" title='Py_BuildValue' data-ref="Py_BuildValue">Py_BuildValue</a>(<q>"kk"</q>, <a class="local col0 ref" href="#40count" title='count' data-ref="40count">count</a>, <a class="local col9 ref" href="#39owner" title='owner' data-ref="39owner">owner</a>);</td></tr>
<tr><th id="419">419</th><td>}</td></tr>
<tr><th id="420">420</th><td></td></tr>
<tr><th id="421">421</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char rlock_release_save_doc[] = &quot;_release_save() -&gt; tuple\n\nFor internal use by `threading.Condition`.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="rlock_release_save_doc" title='rlock_release_save_doc' data-ref="rlock_release_save_doc">rlock_release_save_doc</dfn>,</td></tr>
<tr><th id="422">422</th><td><q>"_release_save() -&gt; tuple\n\</q></td></tr>
<tr><th id="423">423</th><td><q>\n\</q></td></tr>
<tr><th id="424">424</th><td><q>For internal use by `threading.Condition`."</q>);</td></tr>
<tr><th id="425">425</th><td></td></tr>
<tr><th id="426">426</th><td></td></tr>
<tr><th id="427">427</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="428">428</th><td><dfn class="tu decl def" id="rlock_is_owned" title='rlock_is_owned' data-type='PyObject * rlock_is_owned(rlockobject * self)' data-ref="rlock_is_owned">rlock_is_owned</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col1 decl" id="41self" title='self' data-type='rlockobject *' data-ref="41self">self</dfn>)</td></tr>
<tr><th id="429">429</th><td>{</td></tr>
<tr><th id="430">430</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col2 decl" id="42tid" title='tid' data-type='unsigned long' data-ref="42tid">tid</dfn> = <a class="ref" href="../Include/pythread.h.html#PyThread_get_thread_ident" title='PyThread_get_thread_ident' data-ref="PyThread_get_thread_ident">PyThread_get_thread_ident</a>();</td></tr>
<tr><th id="431">431</th><td></td></tr>
<tr><th id="432">432</th><td>    <b>if</b> (<a class="local col1 ref" href="#41self" title='self' data-ref="41self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> &gt; <var>0</var> &amp;&amp; <a class="local col1 ref" href="#41self" title='self' data-ref="41self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='r' data-ref="(anonymous)::rlock_owner">rlock_owner</a> == <a class="local col2 ref" href="#42tid" title='tid' data-ref="42tid">tid</a>) {</td></tr>
<tr><th id="433">433</th><td>        <a class="macro" href="../Include/boolobject.h.html#25" title="return ( _Py_RefTotal++ , ((PyObject *)(((PyObject *) &amp;_Py_TrueStruct)))-&gt;ob_refcnt++), ((PyObject *) &amp;_Py_TrueStruct)" data-ref="_M/Py_RETURN_TRUE">Py_RETURN_TRUE</a>;</td></tr>
<tr><th id="434">434</th><td>    }</td></tr>
<tr><th id="435">435</th><td>    <a class="macro" href="../Include/boolobject.h.html#26" title="return ( _Py_RefTotal++ , ((PyObject *)(((PyObject *) &amp;_Py_FalseStruct)))-&gt;ob_refcnt++), ((PyObject *) &amp;_Py_FalseStruct)" data-ref="_M/Py_RETURN_FALSE">Py_RETURN_FALSE</a>;</td></tr>
<tr><th id="436">436</th><td>}</td></tr>
<tr><th id="437">437</th><td></td></tr>
<tr><th id="438">438</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char rlock_is_owned_doc[] = &quot;_is_owned() -&gt; bool\n\nFor internal use by `threading.Condition`.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="rlock_is_owned_doc" title='rlock_is_owned_doc' data-ref="rlock_is_owned_doc">rlock_is_owned_doc</dfn>,</td></tr>
<tr><th id="439">439</th><td><q>"_is_owned() -&gt; bool\n\</q></td></tr>
<tr><th id="440">440</th><td><q>\n\</q></td></tr>
<tr><th id="441">441</th><td><q>For internal use by `threading.Condition`."</q>);</td></tr>
<tr><th id="442">442</th><td></td></tr>
<tr><th id="443">443</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="444">444</th><td><dfn class="tu decl def" id="rlock_new" title='rlock_new' data-type='PyObject * rlock_new(PyTypeObject * type, PyObject * args, PyObject * kwds)' data-ref="rlock_new">rlock_new</dfn>(<a class="typedef" href="../Include/object.h.html#PyTypeObject" title='PyTypeObject' data-type='struct _typeobject' data-ref="PyTypeObject">PyTypeObject</a> *<dfn class="local col3 decl" id="43type" title='type' data-type='PyTypeObject *' data-ref="43type">type</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col4 decl" id="44args" title='args' data-type='PyObject *' data-ref="44args">args</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col5 decl" id="45kwds" title='kwds' data-type='PyObject *' data-ref="45kwds">kwds</dfn>)</td></tr>
<tr><th id="445">445</th><td>{</td></tr>
<tr><th id="446">446</th><td>    <a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col6 decl" id="46self" title='self' data-type='rlockobject *' data-ref="46self">self</dfn>;</td></tr>
<tr><th id="447">447</th><td></td></tr>
<tr><th id="448">448</th><td>    <a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a> = (<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *) <a class="local col3 ref" href="#43type" title='type' data-ref="43type">type</a>-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_alloc" title='_typeobject::tp_alloc' data-ref="_typeobject::tp_alloc">tp_alloc</a>(<a class="local col3 ref" href="#43type" title='type' data-ref="43type">type</a>, <var>0</var>);</td></tr>
<tr><th id="449">449</th><td>    <b>if</b> (<a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="450">450</th><td>        <a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::in_weakreflist" title='(anonymous struct)::in_weakreflist' data-use='w' data-ref="(anonymous)::in_weakreflist">in_weakreflist</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="451">451</th><td>        <a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='w' data-ref="(anonymous)::rlock_owner">rlock_owner</a> = <var>0</var>;</td></tr>
<tr><th id="452">452</th><td>        <a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='w' data-ref="(anonymous)::rlock_count">rlock_count</a> = <var>0</var>;</td></tr>
<tr><th id="453">453</th><td></td></tr>
<tr><th id="454">454</th><td>        <a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='w' data-ref="(anonymous)::rlock_lock">rlock_lock</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_allocate_lock" title='PyThread_allocate_lock' data-ref="PyThread_allocate_lock">PyThread_allocate_lock</a>();</td></tr>
<tr><th id="455">455</th><td>        <b>if</b> (<a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_lock" title='(anonymous struct)::rlock_lock' data-use='r' data-ref="(anonymous)::rlock_lock">rlock_lock</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="456">456</th><td>            <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(self); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 456, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>);</td></tr>
<tr><th id="457">457</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>, <q>"can't allocate lock"</q>);</td></tr>
<tr><th id="458">458</th><td>            <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="459">459</th><td>        }</td></tr>
<tr><th id="460">460</th><td>    }</td></tr>
<tr><th id="461">461</th><td></td></tr>
<tr><th id="462">462</th><td>    <b>return</b> (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col6 ref" href="#46self" title='self' data-ref="46self">self</a>;</td></tr>
<tr><th id="463">463</th><td>}</td></tr>
<tr><th id="464">464</th><td></td></tr>
<tr><th id="465">465</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="466">466</th><td><dfn class="tu decl def" id="rlock_repr" title='rlock_repr' data-type='PyObject * rlock_repr(rlockobject * self)' data-ref="rlock_repr">rlock_repr</dfn>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a> *<dfn class="local col7 decl" id="47self" title='self' data-type='rlockobject *' data-ref="47self">self</dfn>)</td></tr>
<tr><th id="467">467</th><td>{</td></tr>
<tr><th id="468">468</th><td>    <b>return</b> <a class="ref" href="../Include/unicodeobject.h.html#PyUnicode_FromFormat" title='PyUnicode_FromFormat' data-ref="PyUnicode_FromFormat">PyUnicode_FromFormat</a>(<q>"&lt;%s %s object owner=%ld count=%lu at %p&gt;"</q>,</td></tr>
<tr><th id="469">469</th><td>        <a class="local col7 ref" href="#47self" title='self' data-ref="47self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a> ? <q>"locked"</q> : <q>"unlocked"</q>,</td></tr>
<tr><th id="470">470</th><td>        <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col7 ref" href="#47self" title='self' data-ref="47self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_name" title='_typeobject::tp_name' data-ref="_typeobject::tp_name">tp_name</a>, <a class="local col7 ref" href="#47self" title='self' data-ref="47self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_owner" title='(anonymous struct)::rlock_owner' data-use='r' data-ref="(anonymous)::rlock_owner">rlock_owner</a>,</td></tr>
<tr><th id="471">471</th><td>        <a class="local col7 ref" href="#47self" title='self' data-ref="47self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::rlock_count" title='(anonymous struct)::rlock_count' data-use='r' data-ref="(anonymous)::rlock_count">rlock_count</a>, <a class="local col7 ref" href="#47self" title='self' data-ref="47self">self</a>);</td></tr>
<tr><th id="472">472</th><td>}</td></tr>
<tr><th id="473">473</th><td></td></tr>
<tr><th id="474">474</th><td></td></tr>
<tr><th id="475">475</th><td><em>static</em> <a class="typedef" href="../Include/methodobject.h.html#PyMethodDef" title='PyMethodDef' data-type='struct PyMethodDef' data-ref="PyMethodDef">PyMethodDef</a> <dfn class="tu decl def" id="rlock_methods" title='rlock_methods' data-type='PyMethodDef [8]' data-ref="rlock_methods">rlock_methods</dfn>[] = {</td></tr>
<tr><th id="476">476</th><td>    {<q>"acquire"</q>,      (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_acquire" title='rlock_acquire' data-ref="rlock_acquire">rlock_acquire</a>,</td></tr>
<tr><th id="477">477</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a> | <a class="macro" href="../Include/methodobject.h.html#72" title="0x0002" data-ref="_M/METH_KEYWORDS">METH_KEYWORDS</a>, <a class="ref" href="#326" title='rlock_acquire_doc' data-ref="rlock_acquire_doc">rlock_acquire_doc</a>},</td></tr>
<tr><th id="478">478</th><td>    {<q>"release"</q>,      (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_release" title='rlock_release' data-ref="rlock_release">rlock_release</a>,</td></tr>
<tr><th id="479">479</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#359" title='rlock_release_doc' data-ref="rlock_release_doc">rlock_release_doc</a>},</td></tr>
<tr><th id="480">480</th><td>    {<q>"_is_owned"</q>,     (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_is_owned" title='rlock_is_owned' data-ref="rlock_is_owned">rlock_is_owned</a>,</td></tr>
<tr><th id="481">481</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#438" title='rlock_is_owned_doc' data-ref="rlock_is_owned_doc">rlock_is_owned_doc</a>},</td></tr>
<tr><th id="482">482</th><td>    {<q>"_acquire_restore"</q>, (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_acquire_restore" title='rlock_acquire_restore' data-ref="rlock_acquire_restore">rlock_acquire_restore</a>,</td></tr>
<tr><th id="483">483</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a>, <a class="ref" href="#396" title='rlock_acquire_restore_doc' data-ref="rlock_acquire_restore_doc">rlock_acquire_restore_doc</a>},</td></tr>
<tr><th id="484">484</th><td>    {<q>"_release_save"</q>, (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_release_save" title='rlock_release_save' data-ref="rlock_release_save">rlock_release_save</a>,</td></tr>
<tr><th id="485">485</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#421" title='rlock_release_save_doc' data-ref="rlock_release_save_doc">rlock_release_save_doc</a>},</td></tr>
<tr><th id="486">486</th><td>    {<q>"__enter__"</q>,    (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_acquire" title='rlock_acquire' data-ref="rlock_acquire">rlock_acquire</a>,</td></tr>
<tr><th id="487">487</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a> | <a class="macro" href="../Include/methodobject.h.html#72" title="0x0002" data-ref="_M/METH_KEYWORDS">METH_KEYWORDS</a>, <a class="ref" href="#326" title='rlock_acquire_doc' data-ref="rlock_acquire_doc">rlock_acquire_doc</a>},</td></tr>
<tr><th id="488">488</th><td>    {<q>"__exit__"</q>,    (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#rlock_release" title='rlock_release' data-ref="rlock_release">rlock_release</a>,</td></tr>
<tr><th id="489">489</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a>, <a class="ref" href="#359" title='rlock_release_doc' data-ref="rlock_release_doc">rlock_release_doc</a>},</td></tr>
<tr><th id="490">490</th><td>    {<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,           <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>}              <i>/* sentinel */</i></td></tr>
<tr><th id="491">491</th><td>};</td></tr>
<tr><th id="492">492</th><td></td></tr>
<tr><th id="493">493</th><td></td></tr>
<tr><th id="494">494</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyTypeObject" title='PyTypeObject' data-type='struct _typeobject' data-ref="PyTypeObject">PyTypeObject</a> <dfn class="tu decl def" id="RLocktype" title='RLocktype' data-type='PyTypeObject' data-ref="RLocktype">RLocktype</dfn> = {</td></tr>
<tr><th id="495">495</th><td>    <a class="macro" href="../Include/object.h.html#89" title="{ { 0, 0, 1, &amp;PyType_Type }, 0 }," data-ref="_M/PyVarObject_HEAD_INIT">PyVarObject_HEAD_INIT</a>(&amp;<a class="ref" href="../Include/object.h.html#PyType_Type" title='PyType_Type' data-ref="PyType_Type">PyType_Type</a>, <var>0</var>)</td></tr>
<tr><th id="496">496</th><td>    <q>"_thread.RLock"</q>,                    <i>/*tp_name*/</i></td></tr>
<tr><th id="497">497</th><td>    <b>sizeof</b>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a>),                <i>/*tp_size*/</i></td></tr>
<tr><th id="498">498</th><td>    <var>0</var>,                                  <i>/*tp_itemsize*/</i></td></tr>
<tr><th id="499">499</th><td>    <i>/* methods */</i></td></tr>
<tr><th id="500">500</th><td>    (<a class="typedef" href="../Include/object.h.html#destructor" title='destructor' data-type='void (*)(PyObject *)' data-ref="destructor">destructor</a>)<a class="tu ref" href="#rlock_dealloc" title='rlock_dealloc' data-ref="rlock_dealloc">rlock_dealloc</a>,          <i>/*tp_dealloc*/</i></td></tr>
<tr><th id="501">501</th><td>    <var>0</var>,                                  <i>/*tp_print*/</i></td></tr>
<tr><th id="502">502</th><td>    <var>0</var>,                                  <i>/*tp_getattr*/</i></td></tr>
<tr><th id="503">503</th><td>    <var>0</var>,                                  <i>/*tp_setattr*/</i></td></tr>
<tr><th id="504">504</th><td>    <var>0</var>,                                  <i>/*tp_reserved*/</i></td></tr>
<tr><th id="505">505</th><td>    (<a class="typedef" href="../Include/object.h.html#reprfunc" title='reprfunc' data-type='PyObject *(*)(PyObject *)' data-ref="reprfunc">reprfunc</a>)<a class="tu ref" href="#rlock_repr" title='rlock_repr' data-ref="rlock_repr">rlock_repr</a>,               <i>/*tp_repr*/</i></td></tr>
<tr><th id="506">506</th><td>    <var>0</var>,                                  <i>/*tp_as_number*/</i></td></tr>
<tr><th id="507">507</th><td>    <var>0</var>,                                  <i>/*tp_as_sequence*/</i></td></tr>
<tr><th id="508">508</th><td>    <var>0</var>,                                  <i>/*tp_as_mapping*/</i></td></tr>
<tr><th id="509">509</th><td>    <var>0</var>,                                  <i>/*tp_hash*/</i></td></tr>
<tr><th id="510">510</th><td>    <var>0</var>,                                  <i>/*tp_call*/</i></td></tr>
<tr><th id="511">511</th><td>    <var>0</var>,                                  <i>/*tp_str*/</i></td></tr>
<tr><th id="512">512</th><td>    <var>0</var>,                                  <i>/*tp_getattro*/</i></td></tr>
<tr><th id="513">513</th><td>    <var>0</var>,                                  <i>/*tp_setattro*/</i></td></tr>
<tr><th id="514">514</th><td>    <var>0</var>,                                  <i>/*tp_as_buffer*/</i></td></tr>
<tr><th id="515">515</th><td>    <a class="macro" href="../Include/object.h.html#658" title="( 0 | (1UL &lt;&lt; 18) | 0)" data-ref="_M/Py_TPFLAGS_DEFAULT">Py_TPFLAGS_DEFAULT</a> | <a class="macro" href="../Include/object.h.html#623" title="(1UL &lt;&lt; 10)" data-ref="_M/Py_TPFLAGS_BASETYPE">Py_TPFLAGS_BASETYPE</a>, <i>/* tp_flags */</i></td></tr>
<tr><th id="516">516</th><td>    <var>0</var>,                                  <i>/*tp_doc*/</i></td></tr>
<tr><th id="517">517</th><td>    <var>0</var>,                                  <i>/*tp_traverse*/</i></td></tr>
<tr><th id="518">518</th><td>    <var>0</var>,                                  <i>/*tp_clear*/</i></td></tr>
<tr><th id="519">519</th><td>    <var>0</var>,                                  <i>/*tp_richcompare*/</i></td></tr>
<tr><th id="520">520</th><td>    <span class="macro" title="__builtin_offsetof(rlockobject, in_weakreflist)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="#rlockobject" title='rlockobject' data-type='struct rlockobject' data-ref="rlockobject">rlockobject</a>, in_weakreflist), <i>/*tp_weaklistoffset*/</i></td></tr>
<tr><th id="521">521</th><td>    <var>0</var>,                                  <i>/*tp_iter*/</i></td></tr>
<tr><th id="522">522</th><td>    <var>0</var>,                                  <i>/*tp_iternext*/</i></td></tr>
<tr><th id="523">523</th><td>    <a class="tu ref" href="#rlock_methods" title='rlock_methods' data-ref="rlock_methods">rlock_methods</a>,                      <i>/*tp_methods*/</i></td></tr>
<tr><th id="524">524</th><td>    <var>0</var>,                                  <i>/* tp_members */</i></td></tr>
<tr><th id="525">525</th><td>    <var>0</var>,                                  <i>/* tp_getset */</i></td></tr>
<tr><th id="526">526</th><td>    <var>0</var>,                                  <i>/* tp_base */</i></td></tr>
<tr><th id="527">527</th><td>    <var>0</var>,                                  <i>/* tp_dict */</i></td></tr>
<tr><th id="528">528</th><td>    <var>0</var>,                                  <i>/* tp_descr_get */</i></td></tr>
<tr><th id="529">529</th><td>    <var>0</var>,                                  <i>/* tp_descr_set */</i></td></tr>
<tr><th id="530">530</th><td>    <var>0</var>,                                  <i>/* tp_dictoffset */</i></td></tr>
<tr><th id="531">531</th><td>    <var>0</var>,                                  <i>/* tp_init */</i></td></tr>
<tr><th id="532">532</th><td>    <a class="ref" href="../Include/object.h.html#PyType_GenericAlloc" title='PyType_GenericAlloc' data-ref="PyType_GenericAlloc">PyType_GenericAlloc</a>,                <i>/* tp_alloc */</i></td></tr>
<tr><th id="533">533</th><td>    <a class="tu ref" href="#rlock_new" title='rlock_new' data-ref="rlock_new">rlock_new</a>                           <i>/* tp_new */</i></td></tr>
<tr><th id="534">534</th><td>};</td></tr>
<tr><th id="535">535</th><td></td></tr>
<tr><th id="536">536</th><td><em>static</em> <a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *</td></tr>
<tr><th id="537">537</th><td><dfn class="tu decl def" id="newlockobject" title='newlockobject' data-type='lockobject * newlockobject()' data-ref="newlockobject">newlockobject</dfn>(<em>void</em>)</td></tr>
<tr><th id="538">538</th><td>{</td></tr>
<tr><th id="539">539</th><td>    <a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col8 decl" id="48self" title='self' data-type='lockobject *' data-ref="48self">self</dfn>;</td></tr>
<tr><th id="540">540</th><td>    <a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a> = <a class="macro" href="../Include/objimpl.h.html#136" title="( (lockobject *) _PyObject_New(&amp;Locktype) )" data-ref="_M/PyObject_New">PyObject_New</a>(<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a>, &amp;<a class="tu ref" href="#Locktype" title='Locktype' data-use='a' data-ref="Locktype">Locktype</a>);</td></tr>
<tr><th id="541">541</th><td>    <b>if</b> (<a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="542">542</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="543">543</th><td>    <a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='w' data-ref="(anonymous)::lock_lock">lock_lock</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_allocate_lock" title='PyThread_allocate_lock' data-ref="PyThread_allocate_lock">PyThread_allocate_lock</a>();</td></tr>
<tr><th id="544">544</th><td>    <a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='w' data-ref="(anonymous)::locked">locked</a> = <var>0</var>;</td></tr>
<tr><th id="545">545</th><td>    <a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::in_weakreflist" title='(anonymous struct)::in_weakreflist' data-use='w' data-ref="(anonymous)::in_weakreflist">in_weakreflist</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="546">546</th><td>    <b>if</b> (<a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="547">547</th><td>        <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(self); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 547, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a>);</td></tr>
<tr><th id="548">548</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>, <q>"can't allocate lock"</q>);</td></tr>
<tr><th id="549">549</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="550">550</th><td>    }</td></tr>
<tr><th id="551">551</th><td>    <b>return</b> <a class="local col8 ref" href="#48self" title='self' data-ref="48self">self</a>;</td></tr>
<tr><th id="552">552</th><td>}</td></tr>
<tr><th id="553">553</th><td></td></tr>
<tr><th id="554">554</th><td><i>/* Thread-local objects */</i></td></tr>
<tr><th id="555">555</th><td></td></tr>
<tr><th id="556">556</th><td><u>#include <a href="../Include/structmember.h.html">"structmember.h"</a></u></td></tr>
<tr><th id="557">557</th><td></td></tr>
<tr><th id="558">558</th><td><i>/* Quick overview:</i></td></tr>
<tr><th id="559">559</th><td><i></i></td></tr>
<tr><th id="560">560</th><td><i>   We need to be able to reclaim reference cycles as soon as possible</i></td></tr>
<tr><th id="561">561</th><td><i>   (both when a thread is being terminated, or a thread-local object</i></td></tr>
<tr><th id="562">562</th><td><i>    becomes unreachable from user data).  Constraints:</i></td></tr>
<tr><th id="563">563</th><td><i>   - it must not be possible for thread-state dicts to be involved in</i></td></tr>
<tr><th id="564">564</th><td><i>     reference cycles (otherwise the cyclic GC will refuse to consider</i></td></tr>
<tr><th id="565">565</th><td><i>     objects referenced from a reachable thread-state dict, even though</i></td></tr>
<tr><th id="566">566</th><td><i>     local_dealloc would clear them)</i></td></tr>
<tr><th id="567">567</th><td><i>   - the death of a thread-state dict must still imply destruction of the</i></td></tr>
<tr><th id="568">568</th><td><i>     corresponding local dicts in all thread-local objects.</i></td></tr>
<tr><th id="569">569</th><td><i></i></td></tr>
<tr><th id="570">570</th><td><i>   Our implementation uses small "localdummy" objects in order to break</i></td></tr>
<tr><th id="571">571</th><td><i>   the reference chain. These trivial objects are hashable (using the</i></td></tr>
<tr><th id="572">572</th><td><i>   default scheme of identity hashing) and weakrefable.</i></td></tr>
<tr><th id="573">573</th><td><i>   Each thread-state holds a separate localdummy for each local object</i></td></tr>
<tr><th id="574">574</th><td><i>   (as a /strong reference/),</i></td></tr>
<tr><th id="575">575</th><td><i>   and each thread-local object holds a dict mapping /weak references/</i></td></tr>
<tr><th id="576">576</th><td><i>   of localdummies to local dicts.</i></td></tr>
<tr><th id="577">577</th><td><i></i></td></tr>
<tr><th id="578">578</th><td><i>   Therefore:</i></td></tr>
<tr><th id="579">579</th><td><i>   - only the thread-state dict holds a strong reference to the dummies</i></td></tr>
<tr><th id="580">580</th><td><i>   - only the thread-local object holds a strong reference to the local dicts</i></td></tr>
<tr><th id="581">581</th><td><i>   - only outside objects (application- or library-level) hold strong</i></td></tr>
<tr><th id="582">582</th><td><i>     references to the thread-local objects</i></td></tr>
<tr><th id="583">583</th><td><i>   - as soon as a thread-state dict is destroyed, the weakref callbacks of all</i></td></tr>
<tr><th id="584">584</th><td><i>     dummies attached to that thread are called, and destroy the corresponding</i></td></tr>
<tr><th id="585">585</th><td><i>     local dicts from thread-local objects</i></td></tr>
<tr><th id="586">586</th><td><i>   - as soon as a thread-local object is destroyed, its local dicts are</i></td></tr>
<tr><th id="587">587</th><td><i>     destroyed and its dummies are manually removed from all thread states</i></td></tr>
<tr><th id="588">588</th><td><i>   - the GC can do its work correctly when a thread-local object is dangling,</i></td></tr>
<tr><th id="589">589</th><td><i>     without any interference from the thread-state dicts</i></td></tr>
<tr><th id="590">590</th><td><i></i></td></tr>
<tr><th id="591">591</th><td><i>   As an additional optimization, each localdummy holds a borrowed reference</i></td></tr>
<tr><th id="592">592</th><td><i>   to the corresponding localdict.  This borrowed reference is only used</i></td></tr>
<tr><th id="593">593</th><td><i>   by the thread-local object which has created the localdummy, which should</i></td></tr>
<tr><th id="594">594</th><td><i>   guarantee that the localdict still exists when accessed.</i></td></tr>
<tr><th id="595">595</th><td><i>*/</i></td></tr>
<tr><th id="596">596</th><td></td></tr>
<tr><th id="597">597</th><td><b>typedef</b> <b>struct</b> {</td></tr>
<tr><th id="598">598</th><td>    <a class="macro" href="../Include/object.h.html#83" title="PyObject ob_base;" data-ref="_M/PyObject_HEAD">PyObject_HEAD</a></td></tr>
<tr><th id="599">599</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::localdict" title='(anonymous struct)::localdict' data-type='PyObject *' data-ref="(anonymous)::localdict">localdict</dfn>;        <i  data-doc="(anonymous)::localdict">/* Borrowed reference! */</i></td></tr>
<tr><th id="600">600</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::weakreflist" title='(anonymous struct)::weakreflist' data-type='PyObject *' data-ref="(anonymous)::weakreflist">weakreflist</dfn>;      <i  data-doc="(anonymous)::weakreflist">/* List of weak references to self */</i></td></tr>
<tr><th id="601">601</th><td>} <dfn class="typedef" id="localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</dfn>;</td></tr>
<tr><th id="602">602</th><td></td></tr>
<tr><th id="603">603</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="604">604</th><td><dfn class="tu decl def" id="localdummy_dealloc" title='localdummy_dealloc' data-type='void localdummy_dealloc(localdummyobject * self)' data-ref="localdummy_dealloc">localdummy_dealloc</dfn>(<a class="typedef" href="#localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</a> *<dfn class="local col9 decl" id="49self" title='self' data-type='localdummyobject *' data-ref="49self">self</dfn>)</td></tr>
<tr><th id="605">605</th><td>{</td></tr>
<tr><th id="606">606</th><td>    <b>if</b> (<a class="local col9 ref" href="#49self" title='self' data-ref="49self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::weakreflist" title='(anonymous struct)::weakreflist' data-use='r' data-ref="(anonymous)::weakreflist">weakreflist</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="607">607</th><td>        <a class="ref" href="../Include/object.h.html#PyObject_ClearWeakRefs" title='PyObject_ClearWeakRefs' data-ref="PyObject_ClearWeakRefs">PyObject_ClearWeakRefs</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col9 ref" href="#49self" title='self' data-ref="49self">self</a>);</td></tr>
<tr><th id="608">608</th><td>    <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col9 ref" href="#49self" title='self' data-ref="49self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_free" title='_typeobject::tp_free' data-ref="_typeobject::tp_free">tp_free</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a>*)<a class="local col9 ref" href="#49self" title='self' data-ref="49self">self</a>);</td></tr>
<tr><th id="609">609</th><td>}</td></tr>
<tr><th id="610">610</th><td></td></tr>
<tr><th id="611">611</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyTypeObject" title='PyTypeObject' data-type='struct _typeobject' data-ref="PyTypeObject">PyTypeObject</a> <dfn class="tu decl def" id="localdummytype" title='localdummytype' data-type='PyTypeObject' data-ref="localdummytype">localdummytype</dfn> = {</td></tr>
<tr><th id="612">612</th><td>    <a class="macro" href="../Include/object.h.html#89" title="{ { 0, 0, 1, ((void*)0) }, 0 }," data-ref="_M/PyVarObject_HEAD_INIT">PyVarObject_HEAD_INIT</a>(<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <var>0</var>)</td></tr>
<tr><th id="613">613</th><td>    <i>/* tp_name           */</i> <q>"_thread._localdummy"</q>,</td></tr>
<tr><th id="614">614</th><td>    <i>/* tp_basicsize      */</i> <b>sizeof</b>(<a class="typedef" href="#localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</a>),</td></tr>
<tr><th id="615">615</th><td>    <i>/* tp_itemsize       */</i> <var>0</var>,</td></tr>
<tr><th id="616">616</th><td>    <i>/* tp_dealloc        */</i> (<a class="typedef" href="../Include/object.h.html#destructor" title='destructor' data-type='void (*)(PyObject *)' data-ref="destructor">destructor</a>)<a class="tu ref" href="#localdummy_dealloc" title='localdummy_dealloc' data-ref="localdummy_dealloc">localdummy_dealloc</a>,</td></tr>
<tr><th id="617">617</th><td>    <i>/* tp_print          */</i> <var>0</var>,</td></tr>
<tr><th id="618">618</th><td>    <i>/* tp_getattr        */</i> <var>0</var>,</td></tr>
<tr><th id="619">619</th><td>    <i>/* tp_setattr        */</i> <var>0</var>,</td></tr>
<tr><th id="620">620</th><td>    <i>/* tp_reserved       */</i> <var>0</var>,</td></tr>
<tr><th id="621">621</th><td>    <i>/* tp_repr           */</i> <var>0</var>,</td></tr>
<tr><th id="622">622</th><td>    <i>/* tp_as_number      */</i> <var>0</var>,</td></tr>
<tr><th id="623">623</th><td>    <i>/* tp_as_sequence    */</i> <var>0</var>,</td></tr>
<tr><th id="624">624</th><td>    <i>/* tp_as_mapping     */</i> <var>0</var>,</td></tr>
<tr><th id="625">625</th><td>    <i>/* tp_hash           */</i> <var>0</var>,</td></tr>
<tr><th id="626">626</th><td>    <i>/* tp_call           */</i> <var>0</var>,</td></tr>
<tr><th id="627">627</th><td>    <i>/* tp_str            */</i> <var>0</var>,</td></tr>
<tr><th id="628">628</th><td>    <i>/* tp_getattro       */</i> <var>0</var>,</td></tr>
<tr><th id="629">629</th><td>    <i>/* tp_setattro       */</i> <var>0</var>,</td></tr>
<tr><th id="630">630</th><td>    <i>/* tp_as_buffer      */</i> <var>0</var>,</td></tr>
<tr><th id="631">631</th><td>    <i>/* tp_flags          */</i> <a class="macro" href="../Include/object.h.html#658" title="( 0 | (1UL &lt;&lt; 18) | 0)" data-ref="_M/Py_TPFLAGS_DEFAULT">Py_TPFLAGS_DEFAULT</a>,</td></tr>
<tr><th id="632">632</th><td>    <i>/* tp_doc            */</i> <q>"Thread-local dummy"</q>,</td></tr>
<tr><th id="633">633</th><td>    <i>/* tp_traverse       */</i> <var>0</var>,</td></tr>
<tr><th id="634">634</th><td>    <i>/* tp_clear          */</i> <var>0</var>,</td></tr>
<tr><th id="635">635</th><td>    <i>/* tp_richcompare    */</i> <var>0</var>,</td></tr>
<tr><th id="636">636</th><td>    <i>/* tp_weaklistoffset */</i> <span class="macro" title="__builtin_offsetof(localdummyobject, weakreflist)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="#localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</a>, weakreflist)</td></tr>
<tr><th id="637">637</th><td>};</td></tr>
<tr><th id="638">638</th><td></td></tr>
<tr><th id="639">639</th><td></td></tr>
<tr><th id="640">640</th><td><b>typedef</b> <b>struct</b> {</td></tr>
<tr><th id="641">641</th><td>    <a class="macro" href="../Include/object.h.html#83" title="PyObject ob_base;" data-ref="_M/PyObject_HEAD">PyObject_HEAD</a></td></tr>
<tr><th id="642">642</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::key" title='(anonymous struct)::key' data-type='PyObject *' data-ref="(anonymous)::key">key</dfn>;</td></tr>
<tr><th id="643">643</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::args" title='(anonymous struct)::args' data-type='PyObject *' data-ref="(anonymous)::args">args</dfn>;</td></tr>
<tr><th id="644">644</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::kw" title='(anonymous struct)::kw' data-type='PyObject *' data-ref="(anonymous)::kw">kw</dfn>;</td></tr>
<tr><th id="645">645</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::weakreflist" title='(anonymous struct)::weakreflist' data-type='PyObject *' data-ref="(anonymous)::weakreflist">weakreflist</dfn>;      <i  data-doc="(anonymous)::weakreflist">/* List of weak references to self */</i></td></tr>
<tr><th id="646">646</th><td>    <i  data-doc="(anonymous)::dummies">/* A {localdummy weakref -&gt; localdict} dict */</i></td></tr>
<tr><th id="647">647</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::dummies" title='(anonymous struct)::dummies' data-type='PyObject *' data-ref="(anonymous)::dummies">dummies</dfn>;</td></tr>
<tr><th id="648">648</th><td>    <i  data-doc="(anonymous)::wr_callback">/* The callback for weakrefs to localdummies */</i></td></tr>
<tr><th id="649">649</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="(anonymous)::wr_callback" title='(anonymous struct)::wr_callback' data-type='PyObject *' data-ref="(anonymous)::wr_callback">wr_callback</dfn>;</td></tr>
<tr><th id="650">650</th><td>} <dfn class="typedef" id="localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</dfn>;</td></tr>
<tr><th id="651">651</th><td></td></tr>
<tr><th id="652">652</th><td><i  data-doc="_ldict">/* Forward declaration */</i></td></tr>
<tr><th id="653">653</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<a class="tu decl" href="#_ldict" title='_ldict' data-type='PyObject * _ldict(localobject * self)' data-ref="_ldict">_ldict</a>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col0 decl" id="50self" title='self' data-type='localobject *' data-ref="50self">self</dfn>);</td></tr>
<tr><th id="654">654</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<a class="tu decl" href="#_localdummy_destroyed" title='_localdummy_destroyed' data-type='PyObject * _localdummy_destroyed(PyObject * meth_self, PyObject * dummyweakref)' data-ref="_localdummy_destroyed">_localdummy_destroyed</a>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col1 decl" id="51meth_self" title='meth_self' data-type='PyObject *' data-ref="51meth_self">meth_self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col2 decl" id="52dummyweakref" title='dummyweakref' data-type='PyObject *' data-ref="52dummyweakref">dummyweakref</dfn>);</td></tr>
<tr><th id="655">655</th><td></td></tr>
<tr><th id="656">656</th><td><i  data-doc="_local_create_dummy">/* Create and register the dummy for the current thread.</i></td></tr>
<tr><th id="657">657</th><td><i  data-doc="_local_create_dummy">   Returns a borrowed reference of the corresponding local dict */</i></td></tr>
<tr><th id="658">658</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="659">659</th><td><dfn class="tu decl def" id="_local_create_dummy" title='_local_create_dummy' data-type='PyObject * _local_create_dummy(localobject * self)' data-ref="_local_create_dummy">_local_create_dummy</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col3 decl" id="53self" title='self' data-type='localobject *' data-ref="53self">self</dfn>)</td></tr>
<tr><th id="660">660</th><td>{</td></tr>
<tr><th id="661">661</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col4 decl" id="54tdict" title='tdict' data-type='PyObject *' data-ref="54tdict">tdict</dfn>, *<dfn class="local col5 decl" id="55ldict" title='ldict' data-type='PyObject *' data-ref="55ldict">ldict</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, *<dfn class="local col6 decl" id="56wr" title='wr' data-type='PyObject *' data-ref="56wr">wr</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="662">662</th><td>    <a class="typedef" href="#localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</a> *<dfn class="local col7 decl" id="57dummy" title='dummy' data-type='localdummyobject *' data-ref="57dummy">dummy</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="663">663</th><td>    <em>int</em> <dfn class="local col8 decl" id="58r" title='r' data-type='int' data-ref="58r">r</dfn>;</td></tr>
<tr><th id="664">664</th><td></td></tr>
<tr><th id="665">665</th><td>    <a class="local col4 ref" href="#54tdict" title='tdict' data-ref="54tdict">tdict</a> = <a class="ref" href="../Include/pystate.h.html#PyThreadState_GetDict" title='PyThreadState_GetDict' data-ref="PyThreadState_GetDict">PyThreadState_GetDict</a>();</td></tr>
<tr><th id="666">666</th><td>    <b>if</b> (<a class="local col4 ref" href="#54tdict" title='tdict' data-ref="54tdict">tdict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="667">667</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_SystemError" title='PyExc_SystemError' data-ref="PyExc_SystemError">PyExc_SystemError</a>,</td></tr>
<tr><th id="668">668</th><td>                        <q>"Couldn't get thread-state dictionary"</q>);</td></tr>
<tr><th id="669">669</th><td>        <b>goto</b> <a class="lbl" href="#59err" data-ref="59err">err</a>;</td></tr>
<tr><th id="670">670</th><td>    }</td></tr>
<tr><th id="671">671</th><td></td></tr>
<tr><th id="672">672</th><td>    <a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_New" title='PyDict_New' data-ref="PyDict_New">PyDict_New</a>();</td></tr>
<tr><th id="673">673</th><td>    <b>if</b> (<a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="674">674</th><td>        <b>goto</b> <a class="lbl" href="#59err" data-ref="59err">err</a>;</td></tr>
<tr><th id="675">675</th><td>    <a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a> = (<a class="typedef" href="#localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</a> *) <a class="tu ref" href="#localdummytype" title='localdummytype' data-use='m' data-ref="localdummytype">localdummytype</a>.<a class="ref" href="../Include/object.h.html#_typeobject::tp_alloc" title='_typeobject::tp_alloc' data-ref="_typeobject::tp_alloc">tp_alloc</a>(&amp;<a class="tu ref" href="#localdummytype" title='localdummytype' data-use='a' data-ref="localdummytype">localdummytype</a>, <var>0</var>);</td></tr>
<tr><th id="676">676</th><td>    <b>if</b> (<a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="677">677</th><td>        <b>goto</b> <a class="lbl" href="#59err" data-ref="59err">err</a>;</td></tr>
<tr><th id="678">678</th><td>    <a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a>-&gt;<a class="tu ref" href="#(anonymous)::localdict" title='(anonymous struct)::localdict' data-use='w' data-ref="(anonymous)::localdict">localdict</a> = <a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a>;</td></tr>
<tr><th id="679">679</th><td>    <a class="local col6 ref" href="#56wr" title='wr' data-ref="56wr">wr</a> = <a class="ref" href="../Include/weakrefobject.h.html#PyWeakref_NewRef" title='PyWeakref_NewRef' data-ref="PyWeakref_NewRef">PyWeakref_NewRef</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a>, <a class="local col3 ref" href="#53self" title='self' data-ref="53self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::wr_callback" title='(anonymous struct)::wr_callback' data-use='r' data-ref="(anonymous)::wr_callback">wr_callback</a>);</td></tr>
<tr><th id="680">680</th><td>    <b>if</b> (<a class="local col6 ref" href="#56wr" title='wr' data-ref="56wr">wr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="681">681</th><td>        <b>goto</b> <a class="lbl" href="#59err" data-ref="59err">err</a>;</td></tr>
<tr><th id="682">682</th><td></td></tr>
<tr><th id="683">683</th><td>    <i>/* As a side-effect, this will cache the weakref's hash before the</i></td></tr>
<tr><th id="684">684</th><td><i>       dummy gets deleted */</i></td></tr>
<tr><th id="685">685</th><td>    <a class="local col8 ref" href="#58r" title='r' data-ref="58r">r</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_SetItem" title='PyDict_SetItem' data-ref="PyDict_SetItem">PyDict_SetItem</a>(<a class="local col3 ref" href="#53self" title='self' data-ref="53self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies">dummies</a>, <a class="local col6 ref" href="#56wr" title='wr' data-ref="56wr">wr</a>, <a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a>);</td></tr>
<tr><th id="686">686</th><td>    <b>if</b> (<a class="local col8 ref" href="#58r" title='r' data-ref="58r">r</a> &lt; <var>0</var>)</td></tr>
<tr><th id="687">687</th><td>        <b>goto</b> <a class="lbl" href="#59err" data-ref="59err">err</a>;</td></tr>
<tr><th id="688">688</th><td>    <a class="macro" href="../Include/object.h.html#831" title="do { PyObject *_py_tmp = (PyObject *)(wr); if (_py_tmp != ((void*)0)) { (wr) = ((void*)0); do { PyObject *_py_decref_tmp = (PyObject *)(_py_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 688, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } } while (0)" data-ref="_M/Py_CLEAR">Py_CLEAR</a>(<a class="local col6 ref" href="#56wr" title='wr' data-ref="56wr">wr</a>);</td></tr>
<tr><th id="689">689</th><td>    <a class="local col8 ref" href="#58r" title='r' data-ref="58r">r</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_SetItem" title='PyDict_SetItem' data-ref="PyDict_SetItem">PyDict_SetItem</a>(<a class="local col4 ref" href="#54tdict" title='tdict' data-ref="54tdict">tdict</a>, <a class="local col3 ref" href="#53self" title='self' data-ref="53self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a>, (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a>);</td></tr>
<tr><th id="690">690</th><td>    <b>if</b> (<a class="local col8 ref" href="#58r" title='r' data-ref="58r">r</a> &lt; <var>0</var>)</td></tr>
<tr><th id="691">691</th><td>        <b>goto</b> <a class="lbl" href="#59err" data-ref="59err">err</a>;</td></tr>
<tr><th id="692">692</th><td>    <a class="macro" href="../Include/object.h.html#831" title="do { PyObject *_py_tmp = (PyObject *)(dummy); if (_py_tmp != ((void*)0)) { (dummy) = ((void*)0); do { PyObject *_py_decref_tmp = (PyObject *)(_py_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 692, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } } while (0)" data-ref="_M/Py_CLEAR">Py_CLEAR</a>(<a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a>);</td></tr>
<tr><th id="693">693</th><td></td></tr>
<tr><th id="694">694</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(ldict); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 694, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a>);</td></tr>
<tr><th id="695">695</th><td>    <b>return</b> <a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a>;</td></tr>
<tr><th id="696">696</th><td></td></tr>
<tr><th id="697">697</th><td><dfn class="lbl" id="59err" data-ref="59err">err</dfn>:</td></tr>
<tr><th id="698">698</th><td>    <a class="macro" href="../Include/object.h.html#848" title="do { PyObject *_py_xdecref_tmp = (PyObject *)(ldict); if (_py_xdecref_tmp != ((void*)0)) do { PyObject *_py_decref_tmp = (PyObject *)(_py_xdecref_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 698, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } while (0)" data-ref="_M/Py_XDECREF">Py_XDECREF</a>(<a class="local col5 ref" href="#55ldict" title='ldict' data-ref="55ldict">ldict</a>);</td></tr>
<tr><th id="699">699</th><td>    <a class="macro" href="../Include/object.h.html#848" title="do { PyObject *_py_xdecref_tmp = (PyObject *)(wr); if (_py_xdecref_tmp != ((void*)0)) do { PyObject *_py_decref_tmp = (PyObject *)(_py_xdecref_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 699, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } while (0)" data-ref="_M/Py_XDECREF">Py_XDECREF</a>(<a class="local col6 ref" href="#56wr" title='wr' data-ref="56wr">wr</a>);</td></tr>
<tr><th id="700">700</th><td>    <a class="macro" href="../Include/object.h.html#848" title="do { PyObject *_py_xdecref_tmp = (PyObject *)(dummy); if (_py_xdecref_tmp != ((void*)0)) do { PyObject *_py_decref_tmp = (PyObject *)(_py_xdecref_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 700, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } while (0)" data-ref="_M/Py_XDECREF">Py_XDECREF</a>(<a class="local col7 ref" href="#57dummy" title='dummy' data-ref="57dummy">dummy</a>);</td></tr>
<tr><th id="701">701</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="702">702</th><td>}</td></tr>
<tr><th id="703">703</th><td></td></tr>
<tr><th id="704">704</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="705">705</th><td><dfn class="tu decl def" id="local_new" title='local_new' data-type='PyObject * local_new(PyTypeObject * type, PyObject * args, PyObject * kw)' data-ref="local_new">local_new</dfn>(<a class="typedef" href="../Include/object.h.html#PyTypeObject" title='PyTypeObject' data-type='struct _typeobject' data-ref="PyTypeObject">PyTypeObject</a> *<dfn class="local col0 decl" id="60type" title='type' data-type='PyTypeObject *' data-ref="60type">type</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col1 decl" id="61args" title='args' data-type='PyObject *' data-ref="61args">args</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col2 decl" id="62kw" title='kw' data-type='PyObject *' data-ref="62kw">kw</dfn>)</td></tr>
<tr><th id="706">706</th><td>{</td></tr>
<tr><th id="707">707</th><td>    <a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col3 decl" id="63self" title='self' data-type='localobject *' data-ref="63self">self</dfn>;</td></tr>
<tr><th id="708">708</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col4 decl" id="64wr" title='wr' data-type='PyObject *' data-ref="64wr">wr</dfn>;</td></tr>
<tr><th id="709">709</th><td>    <em>static</em> <a class="typedef" href="../Include/methodobject.h.html#PyMethodDef" title='PyMethodDef' data-type='struct PyMethodDef' data-ref="PyMethodDef">PyMethodDef</a> <dfn class="local col5 decl" id="65wr_callback_def" title='wr_callback_def' data-type='PyMethodDef' data-ref="65wr_callback_def">wr_callback_def</dfn> = {</td></tr>
<tr><th id="710">710</th><td>        <q>"_localdummy_destroyed"</q>, (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>) <a class="tu ref" href="#_localdummy_destroyed" title='_localdummy_destroyed' data-use='r' data-ref="_localdummy_destroyed">_localdummy_destroyed</a>, <a class="macro" href="../Include/methodobject.h.html#75" title="0x0008" data-ref="_M/METH_O">METH_O</a></td></tr>
<tr><th id="711">711</th><td>    };</td></tr>
<tr><th id="712">712</th><td></td></tr>
<tr><th id="713">713</th><td>    <b>if</b> (<a class="local col0 ref" href="#60type" title='type' data-ref="60type">type</a>-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_init" title='_typeobject::tp_init' data-ref="_typeobject::tp_init">tp_init</a> == <a class="ref" href="../Include/object.h.html#PyBaseObject_Type" title='PyBaseObject_Type' data-ref="PyBaseObject_Type">PyBaseObject_Type</a>.<a class="ref" href="../Include/object.h.html#_typeobject::tp_init" title='_typeobject::tp_init' data-ref="_typeobject::tp_init">tp_init</a>) {</td></tr>
<tr><th id="714">714</th><td>        <em>int</em> <dfn class="local col6 decl" id="66rc" title='rc' data-type='int' data-ref="66rc">rc</dfn> = <var>0</var>;</td></tr>
<tr><th id="715">715</th><td>        <b>if</b> (<a class="local col1 ref" href="#61args" title='args' data-ref="61args">args</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="716">716</th><td>            <a class="local col6 ref" href="#66rc" title='rc' data-ref="66rc">rc</a> = <a class="ref" href="../Include/object.h.html#PyObject_IsTrue" title='PyObject_IsTrue' data-ref="PyObject_IsTrue">PyObject_IsTrue</a>(<a class="local col1 ref" href="#61args" title='args' data-ref="61args">args</a>);</td></tr>
<tr><th id="717">717</th><td>        <b>if</b> (<a class="local col6 ref" href="#66rc" title='rc' data-ref="66rc">rc</a> == <var>0</var> &amp;&amp; <a class="local col2 ref" href="#62kw" title='kw' data-ref="62kw">kw</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="718">718</th><td>            <a class="local col6 ref" href="#66rc" title='rc' data-ref="66rc">rc</a> = <a class="ref" href="../Include/object.h.html#PyObject_IsTrue" title='PyObject_IsTrue' data-ref="PyObject_IsTrue">PyObject_IsTrue</a>(<a class="local col2 ref" href="#62kw" title='kw' data-ref="62kw">kw</a>);</td></tr>
<tr><th id="719">719</th><td>        <b>if</b> (<a class="local col6 ref" href="#66rc" title='rc' data-ref="66rc">rc</a> != <var>0</var>) {</td></tr>
<tr><th id="720">720</th><td>            <b>if</b> (<a class="local col6 ref" href="#66rc" title='rc' data-ref="66rc">rc</a> &gt; <var>0</var>)</td></tr>
<tr><th id="721">721</th><td>                <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_TypeError" title='PyExc_TypeError' data-ref="PyExc_TypeError">PyExc_TypeError</a>,</td></tr>
<tr><th id="722">722</th><td>                          <q>"Initialization arguments are not supported"</q>);</td></tr>
<tr><th id="723">723</th><td>            <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="724">724</th><td>        }</td></tr>
<tr><th id="725">725</th><td>    }</td></tr>
<tr><th id="726">726</th><td></td></tr>
<tr><th id="727">727</th><td>    <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a> = (<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *)<a class="local col0 ref" href="#60type" title='type' data-ref="60type">type</a>-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_alloc" title='_typeobject::tp_alloc' data-ref="_typeobject::tp_alloc">tp_alloc</a>(<a class="local col0 ref" href="#60type" title='type' data-ref="60type">type</a>, <var>0</var>);</td></tr>
<tr><th id="728">728</th><td>    <b>if</b> (<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="729">729</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="730">730</th><td></td></tr>
<tr><th id="731">731</th><td>    <a class="macro" href="../Include/object.h.html#841" title="do { PyObject *_py_xincref_tmp = (PyObject *)(args); if (_py_xincref_tmp != ((void*)0)) ( _Py_RefTotal++ , ((PyObject *)(_py_xincref_tmp))-&gt;ob_refcnt++); } while (0)" data-ref="_M/Py_XINCREF">Py_XINCREF</a>(<a class="local col1 ref" href="#61args" title='args' data-ref="61args">args</a>);</td></tr>
<tr><th id="732">732</th><td>    <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::args" title='(anonymous struct)::args' data-use='w' data-ref="(anonymous)::args">args</a> = <a class="local col1 ref" href="#61args" title='args' data-ref="61args">args</a>;</td></tr>
<tr><th id="733">733</th><td>    <a class="macro" href="../Include/object.h.html#841" title="do { PyObject *_py_xincref_tmp = (PyObject *)(kw); if (_py_xincref_tmp != ((void*)0)) ( _Py_RefTotal++ , ((PyObject *)(_py_xincref_tmp))-&gt;ob_refcnt++); } while (0)" data-ref="_M/Py_XINCREF">Py_XINCREF</a>(<a class="local col2 ref" href="#62kw" title='kw' data-ref="62kw">kw</a>);</td></tr>
<tr><th id="734">734</th><td>    <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::kw" title='(anonymous struct)::kw' data-use='w' data-ref="(anonymous)::kw">kw</a> = <a class="local col2 ref" href="#62kw" title='kw' data-ref="62kw">kw</a>;</td></tr>
<tr><th id="735">735</th><td>    <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='w' data-ref="(anonymous)::key">key</a> = <a class="ref" href="../Include/unicodeobject.h.html#PyUnicode_FromFormat" title='PyUnicode_FromFormat' data-ref="PyUnicode_FromFormat">PyUnicode_FromFormat</a>(<q>"thread.local.%p"</q>, <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>);</td></tr>
<tr><th id="736">736</th><td>    <b>if</b> (<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="737">737</th><td>        <b>goto</b> <a class="lbl" href="#67err" data-ref="67err">err</a>;</td></tr>
<tr><th id="738">738</th><td></td></tr>
<tr><th id="739">739</th><td>    <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='w' data-ref="(anonymous)::dummies">dummies</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_New" title='PyDict_New' data-ref="PyDict_New">PyDict_New</a>();</td></tr>
<tr><th id="740">740</th><td>    <b>if</b> (<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies">dummies</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="741">741</th><td>        <b>goto</b> <a class="lbl" href="#67err" data-ref="67err">err</a>;</td></tr>
<tr><th id="742">742</th><td></td></tr>
<tr><th id="743">743</th><td>    <i>/* We use a weak reference to self in the callback closure</i></td></tr>
<tr><th id="744">744</th><td><i>       in order to avoid spurious reference cycles */</i></td></tr>
<tr><th id="745">745</th><td>    <a class="local col4 ref" href="#64wr" title='wr' data-ref="64wr">wr</a> = <a class="ref" href="../Include/weakrefobject.h.html#PyWeakref_NewRef" title='PyWeakref_NewRef' data-ref="PyWeakref_NewRef">PyWeakref_NewRef</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="746">746</th><td>    <b>if</b> (<a class="local col4 ref" href="#64wr" title='wr' data-ref="64wr">wr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="747">747</th><td>        <b>goto</b> <a class="lbl" href="#67err" data-ref="67err">err</a>;</td></tr>
<tr><th id="748">748</th><td>    <a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::wr_callback" title='(anonymous struct)::wr_callback' data-use='w' data-ref="(anonymous)::wr_callback">wr_callback</a> = <a class="ref" href="../Include/methodobject.h.html#PyCFunction_NewEx" title='PyCFunction_NewEx' data-ref="PyCFunction_NewEx">PyCFunction_NewEx</a>(&amp;<a class="local col5 ref" href="#65wr_callback_def" title='wr_callback_def' data-ref="65wr_callback_def">wr_callback_def</a>, <a class="local col4 ref" href="#64wr" title='wr' data-ref="64wr">wr</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="749">749</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(wr); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 749, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col4 ref" href="#64wr" title='wr' data-ref="64wr">wr</a>);</td></tr>
<tr><th id="750">750</th><td>    <b>if</b> (<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::wr_callback" title='(anonymous struct)::wr_callback' data-use='r' data-ref="(anonymous)::wr_callback">wr_callback</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="751">751</th><td>        <b>goto</b> <a class="lbl" href="#67err" data-ref="67err">err</a>;</td></tr>
<tr><th id="752">752</th><td></td></tr>
<tr><th id="753">753</th><td>    <b>if</b> (<a class="tu ref" href="#_local_create_dummy" title='_local_create_dummy' data-use='c' data-ref="_local_create_dummy">_local_create_dummy</a>(<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>) == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="754">754</th><td>        <b>goto</b> <a class="lbl" href="#67err" data-ref="67err">err</a>;</td></tr>
<tr><th id="755">755</th><td></td></tr>
<tr><th id="756">756</th><td>    <b>return</b> (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>;</td></tr>
<tr><th id="757">757</th><td></td></tr>
<tr><th id="758">758</th><td>  <dfn class="lbl" id="67err" data-ref="67err">err</dfn>:</td></tr>
<tr><th id="759">759</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(self); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 759, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col3 ref" href="#63self" title='self' data-ref="63self">self</a>);</td></tr>
<tr><th id="760">760</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="761">761</th><td>}</td></tr>
<tr><th id="762">762</th><td></td></tr>
<tr><th id="763">763</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="764">764</th><td><dfn class="tu decl def" id="local_traverse" title='local_traverse' data-type='int local_traverse(localobject * self, visitproc visit, void * arg)' data-ref="local_traverse">local_traverse</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col8 decl" id="68self" title='self' data-type='localobject *' data-ref="68self">self</dfn>, <a class="typedef" href="../Include/object.h.html#visitproc" title='visitproc' data-type='int (*)(PyObject *, void *)' data-ref="visitproc">visitproc</a> <dfn class="local col9 decl" id="69visit" title='visit' data-type='visitproc' data-ref="69visit">visit</dfn>, <em>void</em> *<dfn class="local col0 decl" id="70arg" title='arg' data-type='void *' data-ref="70arg">arg</dfn>)</td></tr>
<tr><th id="765">765</th><td>{</td></tr>
<tr><th id="766">766</th><td>    <a class="macro" href="../Include/objimpl.h.html#351" title="do { if (self-&gt;args) { int vret = visit((PyObject *)(self-&gt;args), arg); if (vret) return vret; } } while (0)" data-ref="_M/Py_VISIT">Py_VISIT</a>(<a class="local col8 ref" href="#68self" title='self' data-ref="68self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::args" title='(anonymous struct)::args' data-use='r' data-ref="(anonymous)::args">args</a>);</td></tr>
<tr><th id="767">767</th><td>    <a class="macro" href="../Include/objimpl.h.html#351" title="do { if (self-&gt;kw) { int vret = visit((PyObject *)(self-&gt;kw), arg); if (vret) return vret; } } while (0)" data-ref="_M/Py_VISIT">Py_VISIT</a>(<a class="local col8 ref" href="#68self" title='self' data-ref="68self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::kw" title='(anonymous struct)::kw' data-use='r' data-ref="(anonymous)::kw">kw</a>);</td></tr>
<tr><th id="768">768</th><td>    <a class="macro" href="../Include/objimpl.h.html#351" title="do { if (self-&gt;dummies) { int vret = visit((PyObject *)(self-&gt;dummies), arg); if (vret) return vret; } } while (0)" data-ref="_M/Py_VISIT">Py_VISIT</a>(<a class="local col8 ref" href="#68self" title='self' data-ref="68self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies">dummies</a>);</td></tr>
<tr><th id="769">769</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="770">770</th><td>}</td></tr>
<tr><th id="771">771</th><td></td></tr>
<tr><th id="772">772</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="773">773</th><td><dfn class="tu decl def" id="local_clear" title='local_clear' data-type='int local_clear(localobject * self)' data-ref="local_clear">local_clear</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col1 decl" id="71self" title='self' data-type='localobject *' data-ref="71self">self</dfn>)</td></tr>
<tr><th id="774">774</th><td>{</td></tr>
<tr><th id="775">775</th><td>    <a class="typedef" href="../Include/pystate.h.html#PyThreadState" title='PyThreadState' data-type='struct _ts' data-ref="PyThreadState">PyThreadState</a> *<dfn class="local col2 decl" id="72tstate" title='tstate' data-type='PyThreadState *' data-ref="72tstate">tstate</dfn>;</td></tr>
<tr><th id="776">776</th><td>    <a class="macro" href="../Include/object.h.html#831" title="do { PyObject *_py_tmp = (PyObject *)(self-&gt;args); if (_py_tmp != ((void*)0)) { (self-&gt;args) = ((void*)0); do { PyObject *_py_decref_tmp = (PyObject *)(_py_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 776, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } } while (0)" data-ref="_M/Py_CLEAR">Py_CLEAR</a>(<a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::args" title='(anonymous struct)::args' data-use='r' data-ref="(anonymous)::args"><a class="tu ref" href="#(anonymous)::args" title='(anonymous struct)::args' data-use='w' data-ref="(anonymous)::args">args</a></a>);</td></tr>
<tr><th id="777">777</th><td>    <a class="macro" href="../Include/object.h.html#831" title="do { PyObject *_py_tmp = (PyObject *)(self-&gt;kw); if (_py_tmp != ((void*)0)) { (self-&gt;kw) = ((void*)0); do { PyObject *_py_decref_tmp = (PyObject *)(_py_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 777, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } } while (0)" data-ref="_M/Py_CLEAR">Py_CLEAR</a>(<a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::kw" title='(anonymous struct)::kw' data-use='r' data-ref="(anonymous)::kw"><a class="tu ref" href="#(anonymous)::kw" title='(anonymous struct)::kw' data-use='w' data-ref="(anonymous)::kw">kw</a></a>);</td></tr>
<tr><th id="778">778</th><td>    <a class="macro" href="../Include/object.h.html#831" title="do { PyObject *_py_tmp = (PyObject *)(self-&gt;dummies); if (_py_tmp != ((void*)0)) { (self-&gt;dummies) = ((void*)0); do { PyObject *_py_decref_tmp = (PyObject *)(_py_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 778, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } } while (0)" data-ref="_M/Py_CLEAR">Py_CLEAR</a>(<a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies"><a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='w' data-ref="(anonymous)::dummies">dummies</a></a>);</td></tr>
<tr><th id="779">779</th><td>    <a class="macro" href="../Include/object.h.html#831" title="do { PyObject *_py_tmp = (PyObject *)(self-&gt;wr_callback); if (_py_tmp != ((void*)0)) { (self-&gt;wr_callback) = ((void*)0); do { PyObject *_py_decref_tmp = (PyObject *)(_py_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 779, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } } while (0)" data-ref="_M/Py_CLEAR">Py_CLEAR</a>(<a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::wr_callback" title='(anonymous struct)::wr_callback' data-use='r' data-ref="(anonymous)::wr_callback"><a class="tu ref" href="#(anonymous)::wr_callback" title='(anonymous struct)::wr_callback' data-use='w' data-ref="(anonymous)::wr_callback">wr_callback</a></a>);</td></tr>
<tr><th id="780">780</th><td>    <i>/* Remove all strong references to dummies from the thread states */</i></td></tr>
<tr><th id="781">781</th><td>    <b>if</b> (<a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a></td></tr>
<tr><th id="782">782</th><td>        &amp;&amp; (<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a> = <a class="ref" href="../Include/pystate.h.html#PyThreadState_Get" title='PyThreadState_Get' data-ref="PyThreadState_Get">PyThreadState_Get</a>())</td></tr>
<tr><th id="783">783</th><td>        &amp;&amp; <a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::interp" title='_ts::interp' data-ref="_ts::interp">interp</a>) {</td></tr>
<tr><th id="784">784</th><td>        <b>for</b>(<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a> = <a class="ref" href="../Include/pystate.h.html#PyInterpreterState_ThreadHead" title='PyInterpreterState_ThreadHead' data-ref="PyInterpreterState_ThreadHead">PyInterpreterState_ThreadHead</a>(<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::interp" title='_ts::interp' data-ref="_ts::interp">interp</a>);</td></tr>
<tr><th id="785">785</th><td>            <a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>;</td></tr>
<tr><th id="786">786</th><td>            <a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a> = <a class="ref" href="../Include/pystate.h.html#PyThreadState_Next" title='PyThreadState_Next' data-ref="PyThreadState_Next">PyThreadState_Next</a>(<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>))</td></tr>
<tr><th id="787">787</th><td>            <b>if</b> (<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::dict" title='_ts::dict' data-ref="_ts::dict">dict</a> &amp;&amp;</td></tr>
<tr><th id="788">788</th><td>                <a class="ref" href="../Include/dictobject.h.html#PyDict_GetItem" title='PyDict_GetItem' data-ref="PyDict_GetItem">PyDict_GetItem</a>(<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::dict" title='_ts::dict' data-ref="_ts::dict">dict</a>, <a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a>))</td></tr>
<tr><th id="789">789</th><td>                <a class="ref" href="../Include/dictobject.h.html#PyDict_DelItem" title='PyDict_DelItem' data-ref="PyDict_DelItem">PyDict_DelItem</a>(<a class="local col2 ref" href="#72tstate" title='tstate' data-ref="72tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::dict" title='_ts::dict' data-ref="_ts::dict">dict</a>, <a class="local col1 ref" href="#71self" title='self' data-ref="71self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a>);</td></tr>
<tr><th id="790">790</th><td>    }</td></tr>
<tr><th id="791">791</th><td>    <b>return</b> <var>0</var>;</td></tr>
<tr><th id="792">792</th><td>}</td></tr>
<tr><th id="793">793</th><td></td></tr>
<tr><th id="794">794</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="795">795</th><td><dfn class="tu decl def" id="local_dealloc" title='local_dealloc' data-type='void local_dealloc(localobject * self)' data-ref="local_dealloc">local_dealloc</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col3 decl" id="73self" title='self' data-type='localobject *' data-ref="73self">self</dfn>)</td></tr>
<tr><th id="796">796</th><td>{</td></tr>
<tr><th id="797">797</th><td>    <i>/* Weakrefs must be invalidated right now, otherwise they can be used</i></td></tr>
<tr><th id="798">798</th><td><i>       from code called below, which is very dangerous since Py_REFCNT(self) == 0 */</i></td></tr>
<tr><th id="799">799</th><td>    <b>if</b> (<a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::weakreflist" title='(anonymous struct)::weakreflist' data-use='r' data-ref="(anonymous)::weakreflist">weakreflist</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="800">800</th><td>        <a class="ref" href="../Include/object.h.html#PyObject_ClearWeakRefs" title='PyObject_ClearWeakRefs' data-ref="PyObject_ClearWeakRefs">PyObject_ClearWeakRefs</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>);</td></tr>
<tr><th id="801">801</th><td></td></tr>
<tr><th id="802">802</th><td>    <a class="ref" href="../Include/objimpl.h.html#PyObject_GC_UnTrack" title='PyObject_GC_UnTrack' data-ref="PyObject_GC_UnTrack">PyObject_GC_UnTrack</a>(<a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>);</td></tr>
<tr><th id="803">803</th><td></td></tr>
<tr><th id="804">804</th><td>    <a class="tu ref" href="#local_clear" title='local_clear' data-use='c' data-ref="local_clear">local_clear</a>(<a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>);</td></tr>
<tr><th id="805">805</th><td>    <a class="macro" href="../Include/object.h.html#848" title="do { PyObject *_py_xdecref_tmp = (PyObject *)(self-&gt;key); if (_py_xdecref_tmp != ((void*)0)) do { PyObject *_py_decref_tmp = (PyObject *)(_py_xdecref_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 805, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } while (0)" data-ref="_M/Py_XDECREF">Py_XDECREF</a>(<a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a>);</td></tr>
<tr><th id="806">806</th><td>    <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_free" title='_typeobject::tp_free' data-ref="_typeobject::tp_free">tp_free</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a>*)<a class="local col3 ref" href="#73self" title='self' data-ref="73self">self</a>);</td></tr>
<tr><th id="807">807</th><td>}</td></tr>
<tr><th id="808">808</th><td></td></tr>
<tr><th id="809">809</th><td><i  data-doc="_ldict">/* Returns a borrowed reference to the local dict, creating it if necessary */</i></td></tr>
<tr><th id="810">810</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="811">811</th><td><dfn class="tu decl def" id="_ldict" title='_ldict' data-type='PyObject * _ldict(localobject * self)' data-ref="_ldict">_ldict</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col4 decl" id="74self" title='self' data-type='localobject *' data-ref="74self">self</dfn>)</td></tr>
<tr><th id="812">812</th><td>{</td></tr>
<tr><th id="813">813</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col5 decl" id="75tdict" title='tdict' data-type='PyObject *' data-ref="75tdict">tdict</dfn>, *<dfn class="local col6 decl" id="76ldict" title='ldict' data-type='PyObject *' data-ref="76ldict">ldict</dfn>, *<dfn class="local col7 decl" id="77dummy" title='dummy' data-type='PyObject *' data-ref="77dummy">dummy</dfn>;</td></tr>
<tr><th id="814">814</th><td></td></tr>
<tr><th id="815">815</th><td>    <a class="local col5 ref" href="#75tdict" title='tdict' data-ref="75tdict">tdict</a> = <a class="ref" href="../Include/pystate.h.html#PyThreadState_GetDict" title='PyThreadState_GetDict' data-ref="PyThreadState_GetDict">PyThreadState_GetDict</a>();</td></tr>
<tr><th id="816">816</th><td>    <b>if</b> (<a class="local col5 ref" href="#75tdict" title='tdict' data-ref="75tdict">tdict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="817">817</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_SystemError" title='PyExc_SystemError' data-ref="PyExc_SystemError">PyExc_SystemError</a>,</td></tr>
<tr><th id="818">818</th><td>                        <q>"Couldn't get thread-state dictionary"</q>);</td></tr>
<tr><th id="819">819</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="820">820</th><td>    }</td></tr>
<tr><th id="821">821</th><td></td></tr>
<tr><th id="822">822</th><td>    <a class="local col7 ref" href="#77dummy" title='dummy' data-ref="77dummy">dummy</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_GetItem" title='PyDict_GetItem' data-ref="PyDict_GetItem">PyDict_GetItem</a>(<a class="local col5 ref" href="#75tdict" title='tdict' data-ref="75tdict">tdict</a>, <a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a>);</td></tr>
<tr><th id="823">823</th><td>    <b>if</b> (<a class="local col7 ref" href="#77dummy" title='dummy' data-ref="77dummy">dummy</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="824">824</th><td>        <a class="local col6 ref" href="#76ldict" title='ldict' data-ref="76ldict">ldict</a> = <a class="tu ref" href="#_local_create_dummy" title='_local_create_dummy' data-use='c' data-ref="_local_create_dummy">_local_create_dummy</a>(<a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>);</td></tr>
<tr><th id="825">825</th><td>        <b>if</b> (<a class="local col6 ref" href="#76ldict" title='ldict' data-ref="76ldict">ldict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="826">826</th><td>            <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="827">827</th><td></td></tr>
<tr><th id="828">828</th><td>        <b>if</b> (<a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_init" title='_typeobject::tp_init' data-ref="_typeobject::tp_init">tp_init</a> != <a class="ref" href="../Include/object.h.html#PyBaseObject_Type" title='PyBaseObject_Type' data-ref="PyBaseObject_Type">PyBaseObject_Type</a>.<a class="ref" href="../Include/object.h.html#_typeobject::tp_init" title='_typeobject::tp_init' data-ref="_typeobject::tp_init">tp_init</a> &amp;&amp;</td></tr>
<tr><th id="829">829</th><td>            <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_init" title='_typeobject::tp_init' data-ref="_typeobject::tp_init">tp_init</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a>*)<a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>,</td></tr>
<tr><th id="830">830</th><td>                                   <a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::args" title='(anonymous struct)::args' data-use='r' data-ref="(anonymous)::args">args</a>, <a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::kw" title='(anonymous struct)::kw' data-use='r' data-ref="(anonymous)::kw">kw</a>) &lt; <var>0</var>) {</td></tr>
<tr><th id="831">831</th><td>            <i>/* we need to get rid of ldict from thread so</i></td></tr>
<tr><th id="832">832</th><td><i>               we create a new one the next time we do an attr</i></td></tr>
<tr><th id="833">833</th><td><i>               access */</i></td></tr>
<tr><th id="834">834</th><td>            <a class="ref" href="../Include/dictobject.h.html#PyDict_DelItem" title='PyDict_DelItem' data-ref="PyDict_DelItem">PyDict_DelItem</a>(<a class="local col5 ref" href="#75tdict" title='tdict' data-ref="75tdict">tdict</a>, <a class="local col4 ref" href="#74self" title='self' data-ref="74self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::key" title='(anonymous struct)::key' data-use='r' data-ref="(anonymous)::key">key</a>);</td></tr>
<tr><th id="835">835</th><td>            <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="836">836</th><td>        }</td></tr>
<tr><th id="837">837</th><td>    }</td></tr>
<tr><th id="838">838</th><td>    <b>else</b> {</td></tr>
<tr><th id="839">839</th><td>        <a class="macro" href="../../include/assert.h.html#88" title="(((((PyObject*)(dummy))-&gt;ob_type) == &amp;localdummytype) ? (void) (0) : __assert_fail (&quot;Py_TYPE(dummy) == &amp;localdummytype&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 839, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(dummy))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col7 ref" href="#77dummy" title='dummy' data-ref="77dummy">dummy</a>) == &amp;<a class="tu ref" href="#localdummytype" title='localdummytype' data-use='a' data-ref="localdummytype">localdummytype</a>);</td></tr>
<tr><th id="840">840</th><td>        <a class="local col6 ref" href="#76ldict" title='ldict' data-ref="76ldict">ldict</a> = ((<a class="typedef" href="#localdummyobject" title='localdummyobject' data-type='struct localdummyobject' data-ref="localdummyobject">localdummyobject</a> *) <a class="local col7 ref" href="#77dummy" title='dummy' data-ref="77dummy">dummy</a>)-&gt;<a class="tu ref" href="#(anonymous)::localdict" title='(anonymous struct)::localdict' data-use='r' data-ref="(anonymous)::localdict">localdict</a>;</td></tr>
<tr><th id="841">841</th><td>    }</td></tr>
<tr><th id="842">842</th><td></td></tr>
<tr><th id="843">843</th><td>    <b>return</b> <a class="local col6 ref" href="#76ldict" title='ldict' data-ref="76ldict">ldict</a>;</td></tr>
<tr><th id="844">844</th><td>}</td></tr>
<tr><th id="845">845</th><td></td></tr>
<tr><th id="846">846</th><td><em>static</em> <em>int</em></td></tr>
<tr><th id="847">847</th><td><dfn class="tu decl def" id="local_setattro" title='local_setattro' data-type='int local_setattro(localobject * self, PyObject * name, PyObject * v)' data-ref="local_setattro">local_setattro</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col8 decl" id="78self" title='self' data-type='localobject *' data-ref="78self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col9 decl" id="79name" title='name' data-type='PyObject *' data-ref="79name">name</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col0 decl" id="80v" title='v' data-type='PyObject *' data-ref="80v">v</dfn>)</td></tr>
<tr><th id="848">848</th><td>{</td></tr>
<tr><th id="849">849</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col1 decl" id="81ldict" title='ldict' data-type='PyObject *' data-ref="81ldict">ldict</dfn>;</td></tr>
<tr><th id="850">850</th><td>    <em>int</em> <dfn class="local col2 decl" id="82r" title='r' data-type='int' data-ref="82r">r</dfn>;</td></tr>
<tr><th id="851">851</th><td></td></tr>
<tr><th id="852">852</th><td>    <a class="local col1 ref" href="#81ldict" title='ldict' data-ref="81ldict">ldict</a> = <a class="tu ref" href="#_ldict" title='_ldict' data-use='c' data-ref="_ldict">_ldict</a>(<a class="local col8 ref" href="#78self" title='self' data-ref="78self">self</a>);</td></tr>
<tr><th id="853">853</th><td>    <b>if</b> (<a class="local col1 ref" href="#81ldict" title='ldict' data-ref="81ldict">ldict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="854">854</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="855">855</th><td></td></tr>
<tr><th id="856">856</th><td>    <a class="local col2 ref" href="#82r" title='r' data-ref="82r">r</a> = <a class="ref" href="../Include/object.h.html#PyObject_RichCompareBool" title='PyObject_RichCompareBool' data-ref="PyObject_RichCompareBool">PyObject_RichCompareBool</a>(<a class="local col9 ref" href="#79name" title='name' data-ref="79name">name</a>, <a class="tu ref" href="#str_dict" title='str_dict' data-use='r' data-ref="str_dict">str_dict</a>, <a class="macro" href="../Include/object.h.html#929" title="2" data-ref="_M/Py_EQ">Py_EQ</a>);</td></tr>
<tr><th id="857">857</th><td>    <b>if</b> (<a class="local col2 ref" href="#82r" title='r' data-ref="82r">r</a> == <var>1</var>) {</td></tr>
<tr><th id="858">858</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_Format" title='PyErr_Format' data-ref="PyErr_Format">PyErr_Format</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_AttributeError" title='PyExc_AttributeError' data-ref="PyExc_AttributeError">PyExc_AttributeError</a>,</td></tr>
<tr><th id="859">859</th><td>                     <q>"'%.50s' object attribute '%U' is read-only"</q>,</td></tr>
<tr><th id="860">860</th><td>                     <a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col8 ref" href="#78self" title='self' data-ref="78self">self</a>)-&gt;<a class="ref" href="../Include/object.h.html#_typeobject::tp_name" title='_typeobject::tp_name' data-ref="_typeobject::tp_name">tp_name</a>, <a class="local col9 ref" href="#79name" title='name' data-ref="79name">name</a>);</td></tr>
<tr><th id="861">861</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="862">862</th><td>    }</td></tr>
<tr><th id="863">863</th><td>    <b>if</b> (<a class="local col2 ref" href="#82r" title='r' data-ref="82r">r</a> == -<var>1</var>)</td></tr>
<tr><th id="864">864</th><td>        <b>return</b> -<var>1</var>;</td></tr>
<tr><th id="865">865</th><td></td></tr>
<tr><th id="866">866</th><td>    <b>return</b> <a class="ref" href="../Include/object.h.html#_PyObject_GenericSetAttrWithDict" title='_PyObject_GenericSetAttrWithDict' data-ref="_PyObject_GenericSetAttrWithDict">_PyObject_GenericSetAttrWithDict</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)<a class="local col8 ref" href="#78self" title='self' data-ref="78self">self</a>, <a class="local col9 ref" href="#79name" title='name' data-ref="79name">name</a>, <a class="local col0 ref" href="#80v" title='v' data-ref="80v">v</a>, <a class="local col1 ref" href="#81ldict" title='ldict' data-ref="81ldict">ldict</a>);</td></tr>
<tr><th id="867">867</th><td>}</td></tr>
<tr><th id="868">868</th><td></td></tr>
<tr><th id="869">869</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<a class="tu decl" href="#local_getattro" title='local_getattro' data-type='PyObject * local_getattro(localobject * , PyObject * )' data-ref="local_getattro">local_getattro</a>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *);</td></tr>
<tr><th id="870">870</th><td></td></tr>
<tr><th id="871">871</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyTypeObject" title='PyTypeObject' data-type='struct _typeobject' data-ref="PyTypeObject">PyTypeObject</a> <dfn class="tu decl def" id="localtype" title='localtype' data-type='PyTypeObject' data-ref="localtype">localtype</dfn> = {</td></tr>
<tr><th id="872">872</th><td>    <a class="macro" href="../Include/object.h.html#89" title="{ { 0, 0, 1, ((void*)0) }, 0 }," data-ref="_M/PyVarObject_HEAD_INIT">PyVarObject_HEAD_INIT</a>(<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>, <var>0</var>)</td></tr>
<tr><th id="873">873</th><td>    <i>/* tp_name           */</i> <q>"_thread._local"</q>,</td></tr>
<tr><th id="874">874</th><td>    <i>/* tp_basicsize      */</i> <b>sizeof</b>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a>),</td></tr>
<tr><th id="875">875</th><td>    <i>/* tp_itemsize       */</i> <var>0</var>,</td></tr>
<tr><th id="876">876</th><td>    <i>/* tp_dealloc        */</i> (<a class="typedef" href="../Include/object.h.html#destructor" title='destructor' data-type='void (*)(PyObject *)' data-ref="destructor">destructor</a>)<a class="tu ref" href="#local_dealloc" title='local_dealloc' data-ref="local_dealloc">local_dealloc</a>,</td></tr>
<tr><th id="877">877</th><td>    <i>/* tp_print          */</i> <var>0</var>,</td></tr>
<tr><th id="878">878</th><td>    <i>/* tp_getattr        */</i> <var>0</var>,</td></tr>
<tr><th id="879">879</th><td>    <i>/* tp_setattr        */</i> <var>0</var>,</td></tr>
<tr><th id="880">880</th><td>    <i>/* tp_reserved       */</i> <var>0</var>,</td></tr>
<tr><th id="881">881</th><td>    <i>/* tp_repr           */</i> <var>0</var>,</td></tr>
<tr><th id="882">882</th><td>    <i>/* tp_as_number      */</i> <var>0</var>,</td></tr>
<tr><th id="883">883</th><td>    <i>/* tp_as_sequence    */</i> <var>0</var>,</td></tr>
<tr><th id="884">884</th><td>    <i>/* tp_as_mapping     */</i> <var>0</var>,</td></tr>
<tr><th id="885">885</th><td>    <i>/* tp_hash           */</i> <var>0</var>,</td></tr>
<tr><th id="886">886</th><td>    <i>/* tp_call           */</i> <var>0</var>,</td></tr>
<tr><th id="887">887</th><td>    <i>/* tp_str            */</i> <var>0</var>,</td></tr>
<tr><th id="888">888</th><td>    <i>/* tp_getattro       */</i> (<a class="typedef" href="../Include/object.h.html#getattrofunc" title='getattrofunc' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="getattrofunc">getattrofunc</a>)<a class="tu ref" href="#local_getattro" title='local_getattro' data-ref="local_getattro">local_getattro</a>,</td></tr>
<tr><th id="889">889</th><td>    <i>/* tp_setattro       */</i> (<a class="typedef" href="../Include/object.h.html#setattrofunc" title='setattrofunc' data-type='int (*)(PyObject *, PyObject *, PyObject *)' data-ref="setattrofunc">setattrofunc</a>)<a class="tu ref" href="#local_setattro" title='local_setattro' data-ref="local_setattro">local_setattro</a>,</td></tr>
<tr><th id="890">890</th><td>    <i>/* tp_as_buffer      */</i> <var>0</var>,</td></tr>
<tr><th id="891">891</th><td>    <i>/* tp_flags          */</i> <a class="macro" href="../Include/object.h.html#658" title="( 0 | (1UL &lt;&lt; 18) | 0)" data-ref="_M/Py_TPFLAGS_DEFAULT">Py_TPFLAGS_DEFAULT</a> | <a class="macro" href="../Include/object.h.html#623" title="(1UL &lt;&lt; 10)" data-ref="_M/Py_TPFLAGS_BASETYPE">Py_TPFLAGS_BASETYPE</a></td></tr>
<tr><th id="892">892</th><td>                                               | <a class="macro" href="../Include/object.h.html#632" title="(1UL &lt;&lt; 14)" data-ref="_M/Py_TPFLAGS_HAVE_GC">Py_TPFLAGS_HAVE_GC</a>,</td></tr>
<tr><th id="893">893</th><td>    <i>/* tp_doc            */</i> <q>"Thread-local data"</q>,</td></tr>
<tr><th id="894">894</th><td>    <i>/* tp_traverse       */</i> (<a class="typedef" href="../Include/object.h.html#traverseproc" title='traverseproc' data-type='int (*)(PyObject *, visitproc, void *)' data-ref="traverseproc">traverseproc</a>)<a class="tu ref" href="#local_traverse" title='local_traverse' data-ref="local_traverse">local_traverse</a>,</td></tr>
<tr><th id="895">895</th><td>    <i>/* tp_clear          */</i> (<a class="typedef" href="../Include/object.h.html#inquiry" title='inquiry' data-type='int (*)(PyObject *)' data-ref="inquiry">inquiry</a>)<a class="tu ref" href="#local_clear" title='local_clear' data-ref="local_clear">local_clear</a>,</td></tr>
<tr><th id="896">896</th><td>    <i>/* tp_richcompare    */</i> <var>0</var>,</td></tr>
<tr><th id="897">897</th><td>    <i>/* tp_weaklistoffset */</i> <span class="macro" title="__builtin_offsetof(localobject, weakreflist)" data-ref="_M/offsetof">offsetof</span>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a>, weakreflist),</td></tr>
<tr><th id="898">898</th><td>    <i>/* tp_iter           */</i> <var>0</var>,</td></tr>
<tr><th id="899">899</th><td>    <i>/* tp_iternext       */</i> <var>0</var>,</td></tr>
<tr><th id="900">900</th><td>    <i>/* tp_methods        */</i> <var>0</var>,</td></tr>
<tr><th id="901">901</th><td>    <i>/* tp_members        */</i> <var>0</var>,</td></tr>
<tr><th id="902">902</th><td>    <i>/* tp_getset         */</i> <var>0</var>,</td></tr>
<tr><th id="903">903</th><td>    <i>/* tp_base           */</i> <var>0</var>,</td></tr>
<tr><th id="904">904</th><td>    <i>/* tp_dict           */</i> <var>0</var>, <i>/* internal use */</i></td></tr>
<tr><th id="905">905</th><td>    <i>/* tp_descr_get      */</i> <var>0</var>,</td></tr>
<tr><th id="906">906</th><td>    <i>/* tp_descr_set      */</i> <var>0</var>,</td></tr>
<tr><th id="907">907</th><td>    <i>/* tp_dictoffset     */</i> <var>0</var>,</td></tr>
<tr><th id="908">908</th><td>    <i>/* tp_init           */</i> <var>0</var>,</td></tr>
<tr><th id="909">909</th><td>    <i>/* tp_alloc          */</i> <var>0</var>,</td></tr>
<tr><th id="910">910</th><td>    <i>/* tp_new            */</i> <a class="tu ref" href="#local_new" title='local_new' data-ref="local_new">local_new</a>,</td></tr>
<tr><th id="911">911</th><td>    <i>/* tp_free           */</i> <var>0</var>, <i>/* Low-level free-mem routine */</i></td></tr>
<tr><th id="912">912</th><td>    <i>/* tp_is_gc          */</i> <var>0</var>, <i>/* For PyObject_IS_GC */</i></td></tr>
<tr><th id="913">913</th><td>};</td></tr>
<tr><th id="914">914</th><td></td></tr>
<tr><th id="915">915</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="916">916</th><td><dfn class="tu decl def" id="local_getattro" title='local_getattro' data-type='PyObject * local_getattro(localobject * self, PyObject * name)' data-ref="local_getattro">local_getattro</dfn>(<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col3 decl" id="83self" title='self' data-type='localobject *' data-ref="83self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col4 decl" id="84name" title='name' data-type='PyObject *' data-ref="84name">name</dfn>)</td></tr>
<tr><th id="917">917</th><td>{</td></tr>
<tr><th id="918">918</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col5 decl" id="85ldict" title='ldict' data-type='PyObject *' data-ref="85ldict">ldict</dfn>, *<dfn class="local col6 decl" id="86value" title='value' data-type='PyObject *' data-ref="86value">value</dfn>;</td></tr>
<tr><th id="919">919</th><td>    <em>int</em> <dfn class="local col7 decl" id="87r" title='r' data-type='int' data-ref="87r">r</dfn>;</td></tr>
<tr><th id="920">920</th><td></td></tr>
<tr><th id="921">921</th><td>    <a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a> = <a class="tu ref" href="#_ldict" title='_ldict' data-use='c' data-ref="_ldict">_ldict</a>(<a class="local col3 ref" href="#83self" title='self' data-ref="83self">self</a>);</td></tr>
<tr><th id="922">922</th><td>    <b>if</b> (<a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="923">923</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="924">924</th><td></td></tr>
<tr><th id="925">925</th><td>    <a class="local col7 ref" href="#87r" title='r' data-ref="87r">r</a> = <a class="ref" href="../Include/object.h.html#PyObject_RichCompareBool" title='PyObject_RichCompareBool' data-ref="PyObject_RichCompareBool">PyObject_RichCompareBool</a>(<a class="local col4 ref" href="#84name" title='name' data-ref="84name">name</a>, <a class="tu ref" href="#str_dict" title='str_dict' data-use='r' data-ref="str_dict">str_dict</a>, <a class="macro" href="../Include/object.h.html#929" title="2" data-ref="_M/Py_EQ">Py_EQ</a>);</td></tr>
<tr><th id="926">926</th><td>    <b>if</b> (<a class="local col7 ref" href="#87r" title='r' data-ref="87r">r</a> == <var>1</var>) {</td></tr>
<tr><th id="927">927</th><td>        <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(ldict))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(<a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a>);</td></tr>
<tr><th id="928">928</th><td>        <b>return</b> <a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a>;</td></tr>
<tr><th id="929">929</th><td>    }</td></tr>
<tr><th id="930">930</th><td>    <b>if</b> (<a class="local col7 ref" href="#87r" title='r' data-ref="87r">r</a> == -<var>1</var>)</td></tr>
<tr><th id="931">931</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="932">932</th><td></td></tr>
<tr><th id="933">933</th><td>    <b>if</b> (<a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(self))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col3 ref" href="#83self" title='self' data-ref="83self">self</a>) != &amp;<a class="tu ref" href="#localtype" title='localtype' data-use='a' data-ref="localtype">localtype</a>)</td></tr>
<tr><th id="934">934</th><td>        <i>/* use generic lookup for subtypes */</i></td></tr>
<tr><th id="935">935</th><td>        <b>return</b> <a class="ref" href="../Include/object.h.html#_PyObject_GenericGetAttrWithDict" title='_PyObject_GenericGetAttrWithDict' data-ref="_PyObject_GenericGetAttrWithDict">_PyObject_GenericGetAttrWithDict</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)<a class="local col3 ref" href="#83self" title='self' data-ref="83self">self</a>, <a class="local col4 ref" href="#84name" title='name' data-ref="84name">name</a>, <a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a>);</td></tr>
<tr><th id="936">936</th><td></td></tr>
<tr><th id="937">937</th><td>    <i>/* Optimization: just look in dict ourselves */</i></td></tr>
<tr><th id="938">938</th><td>    <a class="local col6 ref" href="#86value" title='value' data-ref="86value">value</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_GetItem" title='PyDict_GetItem' data-ref="PyDict_GetItem">PyDict_GetItem</a>(<a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a>, <a class="local col4 ref" href="#84name" title='name' data-ref="84name">name</a>);</td></tr>
<tr><th id="939">939</th><td>    <b>if</b> (<a class="local col6 ref" href="#86value" title='value' data-ref="86value">value</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="940">940</th><td>        <i>/* Fall back on generic to get __class__ and __dict__ */</i></td></tr>
<tr><th id="941">941</th><td>        <b>return</b> <a class="ref" href="../Include/object.h.html#_PyObject_GenericGetAttrWithDict" title='_PyObject_GenericGetAttrWithDict' data-ref="_PyObject_GenericGetAttrWithDict">_PyObject_GenericGetAttrWithDict</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)<a class="local col3 ref" href="#83self" title='self' data-ref="83self">self</a>, <a class="local col4 ref" href="#84name" title='name' data-ref="84name">name</a>, <a class="local col5 ref" href="#85ldict" title='ldict' data-ref="85ldict">ldict</a>);</td></tr>
<tr><th id="942">942</th><td></td></tr>
<tr><th id="943">943</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(value))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(<a class="local col6 ref" href="#86value" title='value' data-ref="86value">value</a>);</td></tr>
<tr><th id="944">944</th><td>    <b>return</b> <a class="local col6 ref" href="#86value" title='value' data-ref="86value">value</a>;</td></tr>
<tr><th id="945">945</th><td>}</td></tr>
<tr><th id="946">946</th><td></td></tr>
<tr><th id="947">947</th><td><i  data-doc="_localdummy_destroyed">/* Called when a dummy is destroyed. */</i></td></tr>
<tr><th id="948">948</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="949">949</th><td><dfn class="tu decl def" id="_localdummy_destroyed" title='_localdummy_destroyed' data-type='PyObject * _localdummy_destroyed(PyObject * localweakref, PyObject * dummyweakref)' data-ref="_localdummy_destroyed">_localdummy_destroyed</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col8 decl" id="88localweakref" title='localweakref' data-type='PyObject *' data-ref="88localweakref">localweakref</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col9 decl" id="89dummyweakref" title='dummyweakref' data-type='PyObject *' data-ref="89dummyweakref">dummyweakref</dfn>)</td></tr>
<tr><th id="950">950</th><td>{</td></tr>
<tr><th id="951">951</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col0 decl" id="90obj" title='obj' data-type='PyObject *' data-ref="90obj">obj</dfn>;</td></tr>
<tr><th id="952">952</th><td>    <a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *<dfn class="local col1 decl" id="91self" title='self' data-type='localobject *' data-ref="91self">self</dfn>;</td></tr>
<tr><th id="953">953</th><td>    <a class="macro" href="../../include/assert.h.html#88" title="((((((PyObject*)(localweakref))-&gt;ob_type) == (&amp;_PyWeakref_RefType) || PyType_IsSubtype((((PyObject*)(localweakref))-&gt;ob_type), (&amp;_PyWeakref_RefType)))) ? (void) (0) : __assert_fail (&quot;PyWeakref_CheckRef(localweakref)&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 953, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="macro" href="../Include/weakrefobject.h.html#47" title="((((PyObject*)(localweakref))-&gt;ob_type) == (&amp;_PyWeakref_RefType) || PyType_IsSubtype((((PyObject*)(localweakref))-&gt;ob_type), (&amp;_PyWeakref_RefType)))" data-ref="_M/PyWeakref_CheckRef">PyWeakref_CheckRef</a>(<a class="local col8 ref" href="#88localweakref" title='localweakref' data-ref="88localweakref">localweakref</a>));</td></tr>
<tr><th id="954">954</th><td>    <a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a> = <a class="macro" href="../Include/weakrefobject.h.html#77" title="((((PyObject*)(((PyWeakReference *)(localweakref))-&gt;wr_object))-&gt;ob_refcnt) &gt; 0 ? ((PyWeakReference *)(localweakref))-&gt;wr_object : (&amp;_Py_NoneStruct))" data-ref="_M/PyWeakref_GET_OBJECT">PyWeakref_GET_OBJECT</a>(<a class="local col8 ref" href="#88localweakref" title='localweakref' data-ref="88localweakref">localweakref</a>);</td></tr>
<tr><th id="955">955</th><td>    <b>if</b> (<a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a> == <a class="macro" href="../Include/object.h.html#910" title="(&amp;_Py_NoneStruct)" data-ref="_M/Py_None">Py_None</a>)</td></tr>
<tr><th id="956">956</th><td>        <a class="macro" href="../Include/object.h.html#913" title="return ( _Py_RefTotal++ , ((PyObject *)((&amp;_Py_NoneStruct)))-&gt;ob_refcnt++), (&amp;_Py_NoneStruct)" data-ref="_M/Py_RETURN_NONE">Py_RETURN_NONE</a>;</td></tr>
<tr><th id="957">957</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(obj))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(<a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a>);</td></tr>
<tr><th id="958">958</th><td>    <a class="macro" href="../../include/assert.h.html#88" title="((((((PyObject*)(obj))-&gt;ob_type) == (&amp;localtype) || PyType_IsSubtype((((PyObject*)(obj))-&gt;ob_type), (&amp;localtype)))) ? (void) (0) : __assert_fail (&quot;PyObject_TypeCheck(obj, &amp;localtype)&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 958, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="macro" href="../Include/object.h.html#486" title="((((PyObject*)(obj))-&gt;ob_type) == (&amp;localtype) || PyType_IsSubtype((((PyObject*)(obj))-&gt;ob_type), (&amp;localtype)))" data-ref="_M/PyObject_TypeCheck">PyObject_TypeCheck</a>(<a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a>, &amp;<a class="tu ref" href="#localtype" title='localtype' data-use='a' data-ref="localtype">localtype</a>));</td></tr>
<tr><th id="959">959</th><td>    <i>/* If the thread-local object is still alive and not being cleared,</i></td></tr>
<tr><th id="960">960</th><td><i>       remove the corresponding local dict */</i></td></tr>
<tr><th id="961">961</th><td>    <a class="local col1 ref" href="#91self" title='self' data-ref="91self">self</a> = (<a class="typedef" href="#localobject" title='localobject' data-type='struct localobject' data-ref="localobject">localobject</a> *) <a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a>;</td></tr>
<tr><th id="962">962</th><td>    <b>if</b> (<a class="local col1 ref" href="#91self" title='self' data-ref="91self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies">dummies</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="963">963</th><td>        <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col2 decl" id="92ldict" title='ldict' data-type='PyObject *' data-ref="92ldict">ldict</dfn>;</td></tr>
<tr><th id="964">964</th><td>        <a class="local col2 ref" href="#92ldict" title='ldict' data-ref="92ldict">ldict</a> = <a class="ref" href="../Include/dictobject.h.html#PyDict_GetItem" title='PyDict_GetItem' data-ref="PyDict_GetItem">PyDict_GetItem</a>(<a class="local col1 ref" href="#91self" title='self' data-ref="91self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies">dummies</a>, <a class="local col9 ref" href="#89dummyweakref" title='dummyweakref' data-ref="89dummyweakref">dummyweakref</a>);</td></tr>
<tr><th id="965">965</th><td>        <b>if</b> (<a class="local col2 ref" href="#92ldict" title='ldict' data-ref="92ldict">ldict</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="966">966</th><td>            <a class="ref" href="../Include/dictobject.h.html#PyDict_DelItem" title='PyDict_DelItem' data-ref="PyDict_DelItem">PyDict_DelItem</a>(<a class="local col1 ref" href="#91self" title='self' data-ref="91self">self</a>-&gt;<a class="tu ref" href="#(anonymous)::dummies" title='(anonymous struct)::dummies' data-use='r' data-ref="(anonymous)::dummies">dummies</a>, <a class="local col9 ref" href="#89dummyweakref" title='dummyweakref' data-ref="89dummyweakref">dummyweakref</a>);</td></tr>
<tr><th id="967">967</th><td>        }</td></tr>
<tr><th id="968">968</th><td>        <b>if</b> (<a class="ref" href="../Include/pyerrors.h.html#PyErr_Occurred" title='PyErr_Occurred' data-ref="PyErr_Occurred">PyErr_Occurred</a>())</td></tr>
<tr><th id="969">969</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_WriteUnraisable" title='PyErr_WriteUnraisable' data-ref="PyErr_WriteUnraisable">PyErr_WriteUnraisable</a>(<a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a>);</td></tr>
<tr><th id="970">970</th><td>    }</td></tr>
<tr><th id="971">971</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(obj); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 971, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col0 ref" href="#90obj" title='obj' data-ref="90obj">obj</a>);</td></tr>
<tr><th id="972">972</th><td>    <a class="macro" href="../Include/object.h.html#913" title="return ( _Py_RefTotal++ , ((PyObject *)((&amp;_Py_NoneStruct)))-&gt;ob_refcnt++), (&amp;_Py_NoneStruct)" data-ref="_M/Py_RETURN_NONE">Py_RETURN_NONE</a>;</td></tr>
<tr><th id="973">973</th><td>}</td></tr>
<tr><th id="974">974</th><td></td></tr>
<tr><th id="975">975</th><td><i>/* Module functions */</i></td></tr>
<tr><th id="976">976</th><td></td></tr>
<tr><th id="977">977</th><td><b>struct</b> <dfn class="type def" id="bootstate" title='bootstate' data-ref="bootstate">bootstate</dfn> {</td></tr>
<tr><th id="978">978</th><td>    <a class="typedef" href="../Include/pystate.h.html#PyInterpreterState" title='PyInterpreterState' data-type='struct _is' data-ref="PyInterpreterState">PyInterpreterState</a> *<dfn class="tu decl" id="bootstate::interp" title='bootstate::interp' data-type='PyInterpreterState *' data-ref="bootstate::interp">interp</dfn>;</td></tr>
<tr><th id="979">979</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="bootstate::func" title='bootstate::func' data-type='PyObject *' data-ref="bootstate::func">func</dfn>;</td></tr>
<tr><th id="980">980</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="bootstate::args" title='bootstate::args' data-type='PyObject *' data-ref="bootstate::args">args</dfn>;</td></tr>
<tr><th id="981">981</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="tu decl" id="bootstate::keyw" title='bootstate::keyw' data-type='PyObject *' data-ref="bootstate::keyw">keyw</dfn>;</td></tr>
<tr><th id="982">982</th><td>    <a class="typedef" href="../Include/pystate.h.html#PyThreadState" title='PyThreadState' data-type='struct _ts' data-ref="PyThreadState">PyThreadState</a> *<dfn class="tu decl" id="bootstate::tstate" title='bootstate::tstate' data-type='PyThreadState *' data-ref="bootstate::tstate">tstate</dfn>;</td></tr>
<tr><th id="983">983</th><td>};</td></tr>
<tr><th id="984">984</th><td></td></tr>
<tr><th id="985">985</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="986">986</th><td><dfn class="tu decl def" id="t_bootstrap" title='t_bootstrap' data-type='void t_bootstrap(void * boot_raw)' data-ref="t_bootstrap">t_bootstrap</dfn>(<em>void</em> *<dfn class="local col3 decl" id="93boot_raw" title='boot_raw' data-type='void *' data-ref="93boot_raw">boot_raw</dfn>)</td></tr>
<tr><th id="987">987</th><td>{</td></tr>
<tr><th id="988">988</th><td>    <b>struct</b> <a class="type" href="#bootstate" title='bootstate' data-ref="bootstate">bootstate</a> *<dfn class="local col4 decl" id="94boot" title='boot' data-type='struct bootstate *' data-ref="94boot">boot</dfn> = (<b>struct</b> <a class="type" href="#bootstate" title='bootstate' data-ref="bootstate">bootstate</a> *) <a class="local col3 ref" href="#93boot_raw" title='boot_raw' data-ref="93boot_raw">boot_raw</a>;</td></tr>
<tr><th id="989">989</th><td>    <a class="typedef" href="../Include/pystate.h.html#PyThreadState" title='PyThreadState' data-type='struct _ts' data-ref="PyThreadState">PyThreadState</a> *<dfn class="local col5 decl" id="95tstate" title='tstate' data-type='PyThreadState *' data-ref="95tstate">tstate</dfn>;</td></tr>
<tr><th id="990">990</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col6 decl" id="96res" title='res' data-type='PyObject *' data-ref="96res">res</dfn>;</td></tr>
<tr><th id="991">991</th><td></td></tr>
<tr><th id="992">992</th><td>    <a class="local col5 ref" href="#95tstate" title='tstate' data-ref="95tstate">tstate</a> = <a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::tstate" title='bootstate::tstate' data-use='r' data-ref="bootstate::tstate">tstate</a>;</td></tr>
<tr><th id="993">993</th><td>    <a class="local col5 ref" href="#95tstate" title='tstate' data-ref="95tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::thread_id" title='_ts::thread_id' data-ref="_ts::thread_id">thread_id</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_get_thread_ident" title='PyThread_get_thread_ident' data-ref="PyThread_get_thread_ident">PyThread_get_thread_ident</a>();</td></tr>
<tr><th id="994">994</th><td>    <a class="ref" href="../Include/pystate.h.html#_PyThreadState_Init" title='_PyThreadState_Init' data-ref="_PyThreadState_Init">_PyThreadState_Init</a>(<a class="local col5 ref" href="#95tstate" title='tstate' data-ref="95tstate">tstate</a>);</td></tr>
<tr><th id="995">995</th><td>    <a class="ref" href="../Include/ceval.h.html#PyEval_AcquireThread" title='PyEval_AcquireThread' data-ref="PyEval_AcquireThread">PyEval_AcquireThread</a>(<a class="local col5 ref" href="#95tstate" title='tstate' data-ref="95tstate">tstate</a>);</td></tr>
<tr><th id="996">996</th><td>    <a class="tu ref" href="#nb_threads" title='nb_threads' data-use='w' data-ref="nb_threads">nb_threads</a>++;</td></tr>
<tr><th id="997">997</th><td>    <a class="local col6 ref" href="#96res" title='res' data-ref="96res">res</a> = <a class="ref" href="../Include/abstract.h.html#PyObject_Call" title='PyObject_Call' data-ref="PyObject_Call">PyObject_Call</a>(<a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::func" title='bootstate::func' data-use='r' data-ref="bootstate::func">func</a>, <a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::args" title='bootstate::args' data-use='r' data-ref="bootstate::args">args</a>, <a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::keyw" title='bootstate::keyw' data-use='r' data-ref="bootstate::keyw">keyw</a>);</td></tr>
<tr><th id="998">998</th><td>    <b>if</b> (<a class="local col6 ref" href="#96res" title='res' data-ref="96res">res</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="999">999</th><td>        <b>if</b> (<a class="ref" href="../Include/pyerrors.h.html#PyErr_ExceptionMatches" title='PyErr_ExceptionMatches' data-ref="PyErr_ExceptionMatches">PyErr_ExceptionMatches</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_SystemExit" title='PyExc_SystemExit' data-ref="PyExc_SystemExit">PyExc_SystemExit</a>))</td></tr>
<tr><th id="1000">1000</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_Clear" title='PyErr_Clear' data-ref="PyErr_Clear">PyErr_Clear</a>();</td></tr>
<tr><th id="1001">1001</th><td>        <b>else</b> {</td></tr>
<tr><th id="1002">1002</th><td>            <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col7 decl" id="97file" title='file' data-type='PyObject *' data-ref="97file">file</dfn>;</td></tr>
<tr><th id="1003">1003</th><td>            <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col8 decl" id="98exc" title='exc' data-type='PyObject *' data-ref="98exc">exc</dfn>, *<dfn class="local col9 decl" id="99value" title='value' data-type='PyObject *' data-ref="99value">value</dfn>, *<dfn class="local col0 decl" id="100tb" title='tb' data-type='PyObject *' data-ref="100tb">tb</dfn>;</td></tr>
<tr><th id="1004">1004</th><td>            <a class="ref" href="../Include/sysmodule.h.html#PySys_WriteStderr" title='PySys_WriteStderr' data-ref="PySys_WriteStderr">PySys_WriteStderr</a>(</td></tr>
<tr><th id="1005">1005</th><td>                <q>"Unhandled exception in thread started by "</q>);</td></tr>
<tr><th id="1006">1006</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_Fetch" title='PyErr_Fetch' data-ref="PyErr_Fetch">PyErr_Fetch</a>(&amp;<a class="local col8 ref" href="#98exc" title='exc' data-ref="98exc">exc</a>, &amp;<a class="local col9 ref" href="#99value" title='value' data-ref="99value">value</a>, &amp;<a class="local col0 ref" href="#100tb" title='tb' data-ref="100tb">tb</a>);</td></tr>
<tr><th id="1007">1007</th><td>            <a class="local col7 ref" href="#97file" title='file' data-ref="97file">file</a> = <a class="ref" href="../Include/sysmodule.h.html#_PySys_GetObjectId" title='_PySys_GetObjectId' data-ref="_PySys_GetObjectId">_PySys_GetObjectId</a>(&amp;<a class="ref" href="#20" title='PyId_stderr' data-ref="PyId_stderr">PyId_stderr</a>);</td></tr>
<tr><th id="1008">1008</th><td>            <b>if</b> (<a class="local col7 ref" href="#97file" title='file' data-ref="97file">file</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; <a class="local col7 ref" href="#97file" title='file' data-ref="97file">file</a> != <a class="macro" href="../Include/object.h.html#910" title="(&amp;_Py_NoneStruct)" data-ref="_M/Py_None">Py_None</a>)</td></tr>
<tr><th id="1009">1009</th><td>                <a class="ref" href="../Include/fileobject.h.html#PyFile_WriteObject" title='PyFile_WriteObject' data-ref="PyFile_WriteObject">PyFile_WriteObject</a>(<a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::func" title='bootstate::func' data-use='r' data-ref="bootstate::func">func</a>, <a class="local col7 ref" href="#97file" title='file' data-ref="97file">file</a>, <var>0</var>);</td></tr>
<tr><th id="1010">1010</th><td>            <b>else</b></td></tr>
<tr><th id="1011">1011</th><td>                <a class="ref" href="../Include/object.h.html#PyObject_Print" title='PyObject_Print' data-ref="PyObject_Print">PyObject_Print</a>(<a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::func" title='bootstate::func' data-use='r' data-ref="bootstate::func">func</a>, <a class="macro" href="../../include/stdio.h.html#174" title="stderr" data-ref="_M/stderr">stderr</a>, <var>0</var>);</td></tr>
<tr><th id="1012">1012</th><td>            <a class="ref" href="../Include/sysmodule.h.html#PySys_WriteStderr" title='PySys_WriteStderr' data-ref="PySys_WriteStderr">PySys_WriteStderr</a>(<q>"\n"</q>);</td></tr>
<tr><th id="1013">1013</th><td>            <a class="ref" href="../Include/pyerrors.h.html#PyErr_Restore" title='PyErr_Restore' data-ref="PyErr_Restore">PyErr_Restore</a>(<a class="local col8 ref" href="#98exc" title='exc' data-ref="98exc">exc</a>, <a class="local col9 ref" href="#99value" title='value' data-ref="99value">value</a>, <a class="local col0 ref" href="#100tb" title='tb' data-ref="100tb">tb</a>);</td></tr>
<tr><th id="1014">1014</th><td>            <a class="ref" href="../Include/pythonrun.h.html#PyErr_PrintEx" title='PyErr_PrintEx' data-ref="PyErr_PrintEx">PyErr_PrintEx</a>(<var>0</var>);</td></tr>
<tr><th id="1015">1015</th><td>        }</td></tr>
<tr><th id="1016">1016</th><td>    }</td></tr>
<tr><th id="1017">1017</th><td>    <b>else</b></td></tr>
<tr><th id="1018">1018</th><td>        <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(res); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1018, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col6 ref" href="#96res" title='res' data-ref="96res">res</a>);</td></tr>
<tr><th id="1019">1019</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(boot-&gt;func); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1019, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::func" title='bootstate::func' data-use='r' data-ref="bootstate::func">func</a>);</td></tr>
<tr><th id="1020">1020</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(boot-&gt;args); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1020, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::args" title='bootstate::args' data-use='r' data-ref="bootstate::args">args</a>);</td></tr>
<tr><th id="1021">1021</th><td>    <a class="macro" href="../Include/object.h.html#848" title="do { PyObject *_py_xdecref_tmp = (PyObject *)(boot-&gt;keyw); if (_py_xdecref_tmp != ((void*)0)) do { PyObject *_py_decref_tmp = (PyObject *)(_py_xdecref_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1021, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } while (0)" data-ref="_M/Py_XDECREF">Py_XDECREF</a>(<a class="local col4 ref" href="#94boot" title='boot' data-ref="94boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::keyw" title='bootstate::keyw' data-use='r' data-ref="bootstate::keyw">keyw</a>);</td></tr>
<tr><th id="1022">1022</th><td>    <a class="macro" href="../Include/pymem.h.html#158" title="PyMem_FREE" data-ref="_M/PyMem_DEL">PyMem_DEL</a>(<a class="local col3 ref" href="#93boot_raw" title='boot_raw' data-ref="93boot_raw">boot_raw</a>);</td></tr>
<tr><th id="1023">1023</th><td>    <a class="tu ref" href="#nb_threads" title='nb_threads' data-use='w' data-ref="nb_threads">nb_threads</a>--;</td></tr>
<tr><th id="1024">1024</th><td>    <a class="ref" href="../Include/pystate.h.html#PyThreadState_Clear" title='PyThreadState_Clear' data-ref="PyThreadState_Clear">PyThreadState_Clear</a>(<a class="local col5 ref" href="#95tstate" title='tstate' data-ref="95tstate">tstate</a>);</td></tr>
<tr><th id="1025">1025</th><td>    <a class="ref" href="../Include/pystate.h.html#PyThreadState_DeleteCurrent" title='PyThreadState_DeleteCurrent' data-ref="PyThreadState_DeleteCurrent">PyThreadState_DeleteCurrent</a>();</td></tr>
<tr><th id="1026">1026</th><td>    <a class="ref" href="../Include/pythread.h.html#PyThread_exit_thread" title='PyThread_exit_thread' data-ref="PyThread_exit_thread">PyThread_exit_thread</a>();</td></tr>
<tr><th id="1027">1027</th><td>}</td></tr>
<tr><th id="1028">1028</th><td></td></tr>
<tr><th id="1029">1029</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1030">1030</th><td><dfn class="tu decl def" id="thread_PyThread_start_new_thread" title='thread_PyThread_start_new_thread' data-type='PyObject * thread_PyThread_start_new_thread(PyObject * self, PyObject * fargs)' data-ref="thread_PyThread_start_new_thread">thread_PyThread_start_new_thread</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col1 decl" id="101self" title='self' data-type='PyObject *' data-ref="101self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col2 decl" id="102fargs" title='fargs' data-type='PyObject *' data-ref="102fargs">fargs</dfn>)</td></tr>
<tr><th id="1031">1031</th><td>{</td></tr>
<tr><th id="1032">1032</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col3 decl" id="103func" title='func' data-type='PyObject *' data-ref="103func">func</dfn>, *<dfn class="local col4 decl" id="104args" title='args' data-type='PyObject *' data-ref="104args">args</dfn>, *<dfn class="local col5 decl" id="105keyw" title='keyw' data-type='PyObject *' data-ref="105keyw">keyw</dfn> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1033">1033</th><td>    <b>struct</b> <a class="type" href="#bootstate" title='bootstate' data-ref="bootstate">bootstate</a> *<dfn class="local col6 decl" id="106boot" title='boot' data-type='struct bootstate *' data-ref="106boot">boot</dfn>;</td></tr>
<tr><th id="1034">1034</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col7 decl" id="107ident" title='ident' data-type='unsigned long' data-ref="107ident">ident</dfn>;</td></tr>
<tr><th id="1035">1035</th><td></td></tr>
<tr><th id="1036">1036</th><td>    <b>if</b> (!<a class="ref" href="../Include/modsupport.h.html#PyArg_UnpackTuple" title='PyArg_UnpackTuple' data-ref="PyArg_UnpackTuple">PyArg_UnpackTuple</a>(<a class="local col2 ref" href="#102fargs" title='fargs' data-ref="102fargs">fargs</a>, <q>"start_new_thread"</q>, <var>2</var>, <var>3</var>,</td></tr>
<tr><th id="1037">1037</th><td>                           &amp;<a class="local col3 ref" href="#103func" title='func' data-ref="103func">func</a>, &amp;<a class="local col4 ref" href="#104args" title='args' data-ref="104args">args</a>, &amp;<a class="local col5 ref" href="#105keyw" title='keyw' data-ref="105keyw">keyw</a>))</td></tr>
<tr><th id="1038">1038</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1039">1039</th><td>    <b>if</b> (!<a class="ref" href="../Include/object.h.html#PyCallable_Check" title='PyCallable_Check' data-ref="PyCallable_Check">PyCallable_Check</a>(<a class="local col3 ref" href="#103func" title='func' data-ref="103func">func</a>)) {</td></tr>
<tr><th id="1040">1040</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_TypeError" title='PyExc_TypeError' data-ref="PyExc_TypeError">PyExc_TypeError</a>,</td></tr>
<tr><th id="1041">1041</th><td>                        <q>"first arg must be callable"</q>);</td></tr>
<tr><th id="1042">1042</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1043">1043</th><td>    }</td></tr>
<tr><th id="1044">1044</th><td>    <b>if</b> (!<a class="macro" href="../Include/tupleobject.h.html#39" title="((((((PyObject*)(args))-&gt;ob_type))-&gt;tp_flags &amp; ((1UL &lt;&lt; 26))) != 0)" data-ref="_M/PyTuple_Check">PyTuple_Check</a>(<a class="local col4 ref" href="#104args" title='args' data-ref="104args">args</a>)) {</td></tr>
<tr><th id="1045">1045</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_TypeError" title='PyExc_TypeError' data-ref="PyExc_TypeError">PyExc_TypeError</a>,</td></tr>
<tr><th id="1046">1046</th><td>                        <q>"2nd arg must be a tuple"</q>);</td></tr>
<tr><th id="1047">1047</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1048">1048</th><td>    }</td></tr>
<tr><th id="1049">1049</th><td>    <b>if</b> (<a class="local col5 ref" href="#105keyw" title='keyw' data-ref="105keyw">keyw</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span> &amp;&amp; !<a class="macro" href="../Include/dictobject.h.html#58" title="((((((PyObject*)(keyw))-&gt;ob_type))-&gt;tp_flags &amp; ((1UL &lt;&lt; 29))) != 0)" data-ref="_M/PyDict_Check">PyDict_Check</a>(<a class="local col5 ref" href="#105keyw" title='keyw' data-ref="105keyw">keyw</a>)) {</td></tr>
<tr><th id="1050">1050</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_TypeError" title='PyExc_TypeError' data-ref="PyExc_TypeError">PyExc_TypeError</a>,</td></tr>
<tr><th id="1051">1051</th><td>                        <q>"optional 3rd arg must be a dictionary"</q>);</td></tr>
<tr><th id="1052">1052</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1053">1053</th><td>    }</td></tr>
<tr><th id="1054">1054</th><td>    <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a> = <a class="macro" href="../Include/pymem.h.html#137" title="( ((size_t)(1) &gt; ((Py_ssize_t)(((size_t)-1)&gt;&gt;1)) / sizeof(struct bootstate)) ? ((void*)0) : ( (struct bootstate *) PyMem_Malloc((1) * sizeof(struct bootstate)) ) )" data-ref="_M/PyMem_NEW">PyMem_NEW</a>(<b>struct</b> <a class="type" href="#bootstate" title='bootstate' data-ref="bootstate">bootstate</a>, <var>1</var>);</td></tr>
<tr><th id="1055">1055</th><td>    <b>if</b> (<a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1056">1056</th><td>        <b>return</b> <a class="ref" href="../Include/pyerrors.h.html#PyErr_NoMemory" title='PyErr_NoMemory' data-ref="PyErr_NoMemory">PyErr_NoMemory</a>();</td></tr>
<tr><th id="1057">1057</th><td>    <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::interp" title='bootstate::interp' data-use='w' data-ref="bootstate::interp">interp</a> = <a class="macro" href="../Include/pystate.h.html#251" title="((PyThreadState*)__c11_atomic_load(&amp;(&amp;_PyThreadState_Current)-&gt;_value, _Py_memory_order_relaxed))" data-ref="_M/PyThreadState_GET">PyThreadState_GET</a>()-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::interp" title='_ts::interp' data-ref="_ts::interp">interp</a>;</td></tr>
<tr><th id="1058">1058</th><td>    <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::func" title='bootstate::func' data-use='w' data-ref="bootstate::func">func</a> = <a class="local col3 ref" href="#103func" title='func' data-ref="103func">func</a>;</td></tr>
<tr><th id="1059">1059</th><td>    <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::args" title='bootstate::args' data-use='w' data-ref="bootstate::args">args</a> = <a class="local col4 ref" href="#104args" title='args' data-ref="104args">args</a>;</td></tr>
<tr><th id="1060">1060</th><td>    <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::keyw" title='bootstate::keyw' data-use='w' data-ref="bootstate::keyw">keyw</a> = <a class="local col5 ref" href="#105keyw" title='keyw' data-ref="105keyw">keyw</a>;</td></tr>
<tr><th id="1061">1061</th><td>    <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::tstate" title='bootstate::tstate' data-use='w' data-ref="bootstate::tstate">tstate</a> = <a class="ref" href="../Include/pystate.h.html#_PyThreadState_Prealloc" title='_PyThreadState_Prealloc' data-ref="_PyThreadState_Prealloc">_PyThreadState_Prealloc</a>(<a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::interp" title='bootstate::interp' data-use='r' data-ref="bootstate::interp">interp</a>);</td></tr>
<tr><th id="1062">1062</th><td>    <b>if</b> (<a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::tstate" title='bootstate::tstate' data-use='r' data-ref="bootstate::tstate">tstate</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="1063">1063</th><td>        <a class="macro" href="../Include/pymem.h.html#158" title="PyMem_FREE" data-ref="_M/PyMem_DEL">PyMem_DEL</a>(<a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>);</td></tr>
<tr><th id="1064">1064</th><td>        <b>return</b> <a class="ref" href="../Include/pyerrors.h.html#PyErr_NoMemory" title='PyErr_NoMemory' data-ref="PyErr_NoMemory">PyErr_NoMemory</a>();</td></tr>
<tr><th id="1065">1065</th><td>    }</td></tr>
<tr><th id="1066">1066</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(func))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(<a class="local col3 ref" href="#103func" title='func' data-ref="103func">func</a>);</td></tr>
<tr><th id="1067">1067</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(args))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(<a class="local col4 ref" href="#104args" title='args' data-ref="104args">args</a>);</td></tr>
<tr><th id="1068">1068</th><td>    <a class="macro" href="../Include/object.h.html#841" title="do { PyObject *_py_xincref_tmp = (PyObject *)(keyw); if (_py_xincref_tmp != ((void*)0)) ( _Py_RefTotal++ , ((PyObject *)(_py_xincref_tmp))-&gt;ob_refcnt++); } while (0)" data-ref="_M/Py_XINCREF">Py_XINCREF</a>(<a class="local col5 ref" href="#105keyw" title='keyw' data-ref="105keyw">keyw</a>);</td></tr>
<tr><th id="1069">1069</th><td>    <a class="ref" href="../Include/ceval.h.html#PyEval_InitThreads" title='PyEval_InitThreads' data-ref="PyEval_InitThreads">PyEval_InitThreads</a>(); <i>/* Start the interpreter's thread-awareness */</i></td></tr>
<tr><th id="1070">1070</th><td>    <a class="local col7 ref" href="#107ident" title='ident' data-ref="107ident">ident</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_start_new_thread" title='PyThread_start_new_thread' data-ref="PyThread_start_new_thread">PyThread_start_new_thread</a>(<a class="tu ref" href="#t_bootstrap" title='t_bootstrap' data-use='r' data-ref="t_bootstrap">t_bootstrap</a>, (<em>void</em>*) <a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>);</td></tr>
<tr><th id="1071">1071</th><td>    <b>if</b> (<a class="local col7 ref" href="#107ident" title='ident' data-ref="107ident">ident</a> == <a class="macro" href="../Include/pythread.h.html#21" title="((unsigned long)-1)" data-ref="_M/PYTHREAD_INVALID_THREAD_ID">PYTHREAD_INVALID_THREAD_ID</a>) {</td></tr>
<tr><th id="1072">1072</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>, <q>"can't start new thread"</q>);</td></tr>
<tr><th id="1073">1073</th><td>        <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(func); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1073, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col3 ref" href="#103func" title='func' data-ref="103func">func</a>);</td></tr>
<tr><th id="1074">1074</th><td>        <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(args); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1074, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col4 ref" href="#104args" title='args' data-ref="104args">args</a>);</td></tr>
<tr><th id="1075">1075</th><td>        <a class="macro" href="../Include/object.h.html#848" title="do { PyObject *_py_xdecref_tmp = (PyObject *)(keyw); if (_py_xdecref_tmp != ((void*)0)) do { PyObject *_py_decref_tmp = (PyObject *)(_py_xdecref_tmp); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1075, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0); } while (0)" data-ref="_M/Py_XDECREF">Py_XDECREF</a>(<a class="local col5 ref" href="#105keyw" title='keyw' data-ref="105keyw">keyw</a>);</td></tr>
<tr><th id="1076">1076</th><td>        <a class="ref" href="../Include/pystate.h.html#PyThreadState_Clear" title='PyThreadState_Clear' data-ref="PyThreadState_Clear">PyThreadState_Clear</a>(<a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>-&gt;<a class="tu ref" href="#bootstate::tstate" title='bootstate::tstate' data-use='r' data-ref="bootstate::tstate">tstate</a>);</td></tr>
<tr><th id="1077">1077</th><td>        <a class="macro" href="../Include/pymem.h.html#158" title="PyMem_FREE" data-ref="_M/PyMem_DEL">PyMem_DEL</a>(<a class="local col6 ref" href="#106boot" title='boot' data-ref="106boot">boot</a>);</td></tr>
<tr><th id="1078">1078</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1079">1079</th><td>    }</td></tr>
<tr><th id="1080">1080</th><td>    <b>return</b> <a class="ref" href="../Include/longobject.h.html#PyLong_FromUnsignedLong" title='PyLong_FromUnsignedLong' data-ref="PyLong_FromUnsignedLong">PyLong_FromUnsignedLong</a>(<a class="local col7 ref" href="#107ident" title='ident' data-ref="107ident">ident</a>);</td></tr>
<tr><th id="1081">1081</th><td>}</td></tr>
<tr><th id="1082">1082</th><td></td></tr>
<tr><th id="1083">1083</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char start_new_doc[] = &quot;start_new_thread(function, args[, kwargs])\n(start_new() is an obsolete synonym)\n\nStart a new thread and return its identifier.  The thread will call the\nfunction with positional arguments from the tuple args and keyword arguments\ntaken from the optional dictionary kwargs.  The thread exits when the\nfunction returns; the return value is ignored.  The thread will also exit\nwhen the function raises an unhandled exception; a stack trace will be\nprinted unless the exception is SystemExit.\n&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="start_new_doc" title='start_new_doc' data-ref="start_new_doc">start_new_doc</dfn>,</td></tr>
<tr><th id="1084">1084</th><td><q>"start_new_thread(function, args[, kwargs])\n\</q></td></tr>
<tr><th id="1085">1085</th><td><q>(start_new() is an obsolete synonym)\n\</q></td></tr>
<tr><th id="1086">1086</th><td><q>\n\</q></td></tr>
<tr><th id="1087">1087</th><td><q>Start a new thread and return its identifier.  The thread will call the\n\</q></td></tr>
<tr><th id="1088">1088</th><td><q>function with positional arguments from the tuple args and keyword arguments\n\</q></td></tr>
<tr><th id="1089">1089</th><td><q>taken from the optional dictionary kwargs.  The thread exits when the\n\</q></td></tr>
<tr><th id="1090">1090</th><td><q>function returns; the return value is ignored.  The thread will also exit\n\</q></td></tr>
<tr><th id="1091">1091</th><td><q>when the function raises an unhandled exception; a stack trace will be\n\</q></td></tr>
<tr><th id="1092">1092</th><td><q>printed unless the exception is SystemExit.\n"</q>);</td></tr>
<tr><th id="1093">1093</th><td></td></tr>
<tr><th id="1094">1094</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1095">1095</th><td><dfn class="tu decl def" id="thread_PyThread_exit_thread" title='thread_PyThread_exit_thread' data-type='PyObject * thread_PyThread_exit_thread(PyObject * self)' data-ref="thread_PyThread_exit_thread">thread_PyThread_exit_thread</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col8 decl" id="108self" title='self' data-type='PyObject *' data-ref="108self">self</dfn>)</td></tr>
<tr><th id="1096">1096</th><td>{</td></tr>
<tr><th id="1097">1097</th><td>    <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetNone" title='PyErr_SetNone' data-ref="PyErr_SetNone">PyErr_SetNone</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_SystemExit" title='PyExc_SystemExit' data-ref="PyExc_SystemExit">PyExc_SystemExit</a>);</td></tr>
<tr><th id="1098">1098</th><td>    <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1099">1099</th><td>}</td></tr>
<tr><th id="1100">1100</th><td></td></tr>
<tr><th id="1101">1101</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char exit_doc[] = &quot;exit()\n(exit_thread() is an obsolete synonym)\n\nThis is synonymous to ``raise SystemExit&apos;&apos;.  It will cause the current\nthread to exit silently unless the exception is caught.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="exit_doc" title='exit_doc' data-ref="exit_doc">exit_doc</dfn>,</td></tr>
<tr><th id="1102">1102</th><td><q>"exit()\n\</q></td></tr>
<tr><th id="1103">1103</th><td><q>(exit_thread() is an obsolete synonym)\n\</q></td></tr>
<tr><th id="1104">1104</th><td><q>\n\</q></td></tr>
<tr><th id="1105">1105</th><td><q>This is synonymous to ``raise SystemExit''.  It will cause the current\n\</q></td></tr>
<tr><th id="1106">1106</th><td><q>thread to exit silently unless the exception is caught."</q>);</td></tr>
<tr><th id="1107">1107</th><td></td></tr>
<tr><th id="1108">1108</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1109">1109</th><td><dfn class="tu decl def" id="thread_PyThread_interrupt_main" title='thread_PyThread_interrupt_main' data-type='PyObject * thread_PyThread_interrupt_main(PyObject * self)' data-ref="thread_PyThread_interrupt_main">thread_PyThread_interrupt_main</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> * <dfn class="local col9 decl" id="109self" title='self' data-type='PyObject *' data-ref="109self">self</dfn>)</td></tr>
<tr><th id="1110">1110</th><td>{</td></tr>
<tr><th id="1111">1111</th><td>    <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetInterrupt" title='PyErr_SetInterrupt' data-ref="PyErr_SetInterrupt">PyErr_SetInterrupt</a>();</td></tr>
<tr><th id="1112">1112</th><td>    <a class="macro" href="../Include/object.h.html#913" title="return ( _Py_RefTotal++ , ((PyObject *)((&amp;_Py_NoneStruct)))-&gt;ob_refcnt++), (&amp;_Py_NoneStruct)" data-ref="_M/Py_RETURN_NONE">Py_RETURN_NONE</a>;</td></tr>
<tr><th id="1113">1113</th><td>}</td></tr>
<tr><th id="1114">1114</th><td></td></tr>
<tr><th id="1115">1115</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char interrupt_doc[] = &quot;interrupt_main()\n\nRaise a KeyboardInterrupt in the main thread.\nA subthread can use this function to interrupt the main thread.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="interrupt_doc" title='interrupt_doc' data-ref="interrupt_doc">interrupt_doc</dfn>,</td></tr>
<tr><th id="1116">1116</th><td><q>"interrupt_main()\n\</q></td></tr>
<tr><th id="1117">1117</th><td><q>\n\</q></td></tr>
<tr><th id="1118">1118</th><td><q>Raise a KeyboardInterrupt in the main thread.\n\</q></td></tr>
<tr><th id="1119">1119</th><td><q>A subthread can use this function to interrupt the main thread."</q></td></tr>
<tr><th id="1120">1120</th><td>);</td></tr>
<tr><th id="1121">1121</th><td></td></tr>
<tr><th id="1122">1122</th><td><em>static</em> <a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<a class="tu decl" href="#newlockobject" title='newlockobject' data-type='lockobject * newlockobject()' data-ref="newlockobject">newlockobject</a>(<em>void</em>);</td></tr>
<tr><th id="1123">1123</th><td></td></tr>
<tr><th id="1124">1124</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1125">1125</th><td><dfn class="tu decl def" id="thread_PyThread_allocate_lock" title='thread_PyThread_allocate_lock' data-type='PyObject * thread_PyThread_allocate_lock(PyObject * self)' data-ref="thread_PyThread_allocate_lock">thread_PyThread_allocate_lock</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col0 decl" id="110self" title='self' data-type='PyObject *' data-ref="110self">self</dfn>)</td></tr>
<tr><th id="1126">1126</th><td>{</td></tr>
<tr><th id="1127">1127</th><td>    <b>return</b> (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="tu ref" href="#newlockobject" title='newlockobject' data-use='c' data-ref="newlockobject">newlockobject</a>();</td></tr>
<tr><th id="1128">1128</th><td>}</td></tr>
<tr><th id="1129">1129</th><td></td></tr>
<tr><th id="1130">1130</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char allocate_doc[] = &quot;allocate_lock() -&gt; lock object\n(allocate() is an obsolete synonym)\n\nCreate a new lock object. See help(type(threading.Lock())) for\ninformation about locks.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="allocate_doc" title='allocate_doc' data-ref="allocate_doc">allocate_doc</dfn>,</td></tr>
<tr><th id="1131">1131</th><td><q>"allocate_lock() -&gt; lock object\n\</q></td></tr>
<tr><th id="1132">1132</th><td><q>(allocate() is an obsolete synonym)\n\</q></td></tr>
<tr><th id="1133">1133</th><td><q>\n\</q></td></tr>
<tr><th id="1134">1134</th><td><q>Create a new lock object. See help(type(threading.Lock())) for\n\</q></td></tr>
<tr><th id="1135">1135</th><td><q>information about locks."</q>);</td></tr>
<tr><th id="1136">1136</th><td></td></tr>
<tr><th id="1137">1137</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1138">1138</th><td><dfn class="tu decl def" id="thread_get_ident" title='thread_get_ident' data-type='PyObject * thread_get_ident(PyObject * self)' data-ref="thread_get_ident">thread_get_ident</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col1 decl" id="111self" title='self' data-type='PyObject *' data-ref="111self">self</dfn>)</td></tr>
<tr><th id="1139">1139</th><td>{</td></tr>
<tr><th id="1140">1140</th><td>    <em>unsigned</em> <em>long</em> <dfn class="local col2 decl" id="112ident" title='ident' data-type='unsigned long' data-ref="112ident">ident</dfn> = <a class="ref" href="../Include/pythread.h.html#PyThread_get_thread_ident" title='PyThread_get_thread_ident' data-ref="PyThread_get_thread_ident">PyThread_get_thread_ident</a>();</td></tr>
<tr><th id="1141">1141</th><td>    <b>if</b> (<a class="local col2 ref" href="#112ident" title='ident' data-ref="112ident">ident</a> == <a class="macro" href="../Include/pythread.h.html#21" title="((unsigned long)-1)" data-ref="_M/PYTHREAD_INVALID_THREAD_ID">PYTHREAD_INVALID_THREAD_ID</a>) {</td></tr>
<tr><th id="1142">1142</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>, <q>"no current thread ident"</q>);</td></tr>
<tr><th id="1143">1143</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1144">1144</th><td>    }</td></tr>
<tr><th id="1145">1145</th><td>    <b>return</b> <a class="ref" href="../Include/longobject.h.html#PyLong_FromUnsignedLong" title='PyLong_FromUnsignedLong' data-ref="PyLong_FromUnsignedLong">PyLong_FromUnsignedLong</a>(<a class="local col2 ref" href="#112ident" title='ident' data-ref="112ident">ident</a>);</td></tr>
<tr><th id="1146">1146</th><td>}</td></tr>
<tr><th id="1147">1147</th><td></td></tr>
<tr><th id="1148">1148</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char get_ident_doc[] = &quot;get_ident() -&gt; integer\n\nReturn a non-zero integer that uniquely identifies the current thread\namongst other threads that exist simultaneously.\nThis may be used to identify per-thread resources.\nEven though on some platforms threads identities may appear to be\nallocated consecutive numbers starting at 1, this behavior should not\nbe relied upon, and the number should be seen purely as a magic cookie.\nA thread&apos;s identity may be reused for another thread after it exits.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="get_ident_doc" title='get_ident_doc' data-ref="get_ident_doc">get_ident_doc</dfn>,</td></tr>
<tr><th id="1149">1149</th><td><q>"get_ident() -&gt; integer\n\</q></td></tr>
<tr><th id="1150">1150</th><td><q>\n\</q></td></tr>
<tr><th id="1151">1151</th><td><q>Return a non-zero integer that uniquely identifies the current thread\n\</q></td></tr>
<tr><th id="1152">1152</th><td><q>amongst other threads that exist simultaneously.\n\</q></td></tr>
<tr><th id="1153">1153</th><td><q>This may be used to identify per-thread resources.\n\</q></td></tr>
<tr><th id="1154">1154</th><td><q>Even though on some platforms threads identities may appear to be\n\</q></td></tr>
<tr><th id="1155">1155</th><td><q>allocated consecutive numbers starting at 1, this behavior should not\n\</q></td></tr>
<tr><th id="1156">1156</th><td><q>be relied upon, and the number should be seen purely as a magic cookie.\n\</q></td></tr>
<tr><th id="1157">1157</th><td><q>A thread's identity may be reused for another thread after it exits."</q>);</td></tr>
<tr><th id="1158">1158</th><td></td></tr>
<tr><th id="1159">1159</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1160">1160</th><td><dfn class="tu decl def" id="thread__count" title='thread__count' data-type='PyObject * thread__count(PyObject * self)' data-ref="thread__count">thread__count</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col3 decl" id="113self" title='self' data-type='PyObject *' data-ref="113self">self</dfn>)</td></tr>
<tr><th id="1161">1161</th><td>{</td></tr>
<tr><th id="1162">1162</th><td>    <b>return</b> <a class="ref" href="../Include/longobject.h.html#PyLong_FromLong" title='PyLong_FromLong' data-ref="PyLong_FromLong">PyLong_FromLong</a>(<a class="tu ref" href="#nb_threads" title='nb_threads' data-use='r' data-ref="nb_threads">nb_threads</a>);</td></tr>
<tr><th id="1163">1163</th><td>}</td></tr>
<tr><th id="1164">1164</th><td></td></tr>
<tr><th id="1165">1165</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char _count_doc[] = &quot;_count() -&gt; integer\n\nReturn the number of currently running Python threads, excluding \nthe main thread. The returned number comprises all threads created\nthrough `start_new_thread()` as well as `threading.Thread`, and not\nyet finished.\n\nThis function is meant for internal and specialized purposes only.\nIn most applications `threading.enumerate()` should be used instead.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="_count_doc" title='_count_doc' data-ref="_count_doc">_count_doc</dfn>,</td></tr>
<tr><th id="1166">1166</th><td><q>"_count() -&gt; integer\n\</q></td></tr>
<tr><th id="1167">1167</th><td><q>\n\</q></td></tr>
<tr><th id="1168">1168</th><td><q>\</q></td></tr>
<tr><th id="1169">1169</th><td><q>Return the number of currently running Python threads, excluding \n\</q></td></tr>
<tr><th id="1170">1170</th><td><q>the main thread. The returned number comprises all threads created\n\</q></td></tr>
<tr><th id="1171">1171</th><td><q>through `start_new_thread()` as well as `threading.Thread`, and not\n\</q></td></tr>
<tr><th id="1172">1172</th><td><q>yet finished.\n\</q></td></tr>
<tr><th id="1173">1173</th><td><q>\n\</q></td></tr>
<tr><th id="1174">1174</th><td><q>This function is meant for internal and specialized purposes only.\n\</q></td></tr>
<tr><th id="1175">1175</th><td><q>In most applications `threading.enumerate()` should be used instead."</q>);</td></tr>
<tr><th id="1176">1176</th><td></td></tr>
<tr><th id="1177">1177</th><td><em>static</em> <em>void</em></td></tr>
<tr><th id="1178">1178</th><td><dfn class="tu decl def" id="release_sentinel" title='release_sentinel' data-type='void release_sentinel(void * wr)' data-ref="release_sentinel">release_sentinel</dfn>(<em>void</em> *<dfn class="local col4 decl" id="114wr" title='wr' data-type='void *' data-ref="114wr">wr</dfn>)</td></tr>
<tr><th id="1179">1179</th><td>{</td></tr>
<tr><th id="1180">1180</th><td>    <i>/* Tricky: this function is called when the current thread state</i></td></tr>
<tr><th id="1181">1181</th><td><i>       is being deleted.  Therefore, only simple C code can safely</i></td></tr>
<tr><th id="1182">1182</th><td><i>       execute here. */</i></td></tr>
<tr><th id="1183">1183</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col5 decl" id="115obj" title='obj' data-type='PyObject *' data-ref="115obj">obj</dfn> = <a class="macro" href="../Include/weakrefobject.h.html#77" title="((((PyObject*)(((PyWeakReference *)(wr))-&gt;wr_object))-&gt;ob_refcnt) &gt; 0 ? ((PyWeakReference *)(wr))-&gt;wr_object : (&amp;_Py_NoneStruct))" data-ref="_M/PyWeakref_GET_OBJECT">PyWeakref_GET_OBJECT</a>(<a class="local col4 ref" href="#114wr" title='wr' data-ref="114wr">wr</a>);</td></tr>
<tr><th id="1184">1184</th><td>    <a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col6 decl" id="116lock" title='lock' data-type='lockobject *' data-ref="116lock">lock</dfn>;</td></tr>
<tr><th id="1185">1185</th><td>    <b>if</b> (<a class="local col5 ref" href="#115obj" title='obj' data-ref="115obj">obj</a> != <a class="macro" href="../Include/object.h.html#910" title="(&amp;_Py_NoneStruct)" data-ref="_M/Py_None">Py_None</a>) {</td></tr>
<tr><th id="1186">1186</th><td>        <a class="macro" href="../../include/assert.h.html#88" title="(((((PyObject*)(obj))-&gt;ob_type) == &amp;Locktype) ? (void) (0) : __assert_fail (&quot;Py_TYPE(obj) == &amp;Locktype&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1186, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="macro" href="../Include/object.h.html#118" title="(((PyObject*)(obj))-&gt;ob_type)" data-ref="_M/Py_TYPE">Py_TYPE</a>(<a class="local col5 ref" href="#115obj" title='obj' data-ref="115obj">obj</a>) == &amp;<a class="tu ref" href="#Locktype" title='Locktype' data-use='a' data-ref="Locktype">Locktype</a>);</td></tr>
<tr><th id="1187">1187</th><td>        <a class="local col6 ref" href="#116lock" title='lock' data-ref="116lock">lock</a> = (<a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *) <a class="local col5 ref" href="#115obj" title='obj' data-ref="115obj">obj</a>;</td></tr>
<tr><th id="1188">1188</th><td>        <b>if</b> (<a class="local col6 ref" href="#116lock" title='lock' data-ref="116lock">lock</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='r' data-ref="(anonymous)::locked">locked</a>) {</td></tr>
<tr><th id="1189">1189</th><td>            <a class="ref" href="../Include/pythread.h.html#PyThread_release_lock" title='PyThread_release_lock' data-ref="PyThread_release_lock">PyThread_release_lock</a>(<a class="local col6 ref" href="#116lock" title='lock' data-ref="116lock">lock</a>-&gt;<a class="tu ref" href="#(anonymous)::lock_lock" title='(anonymous struct)::lock_lock' data-use='r' data-ref="(anonymous)::lock_lock">lock_lock</a>);</td></tr>
<tr><th id="1190">1190</th><td>            <a class="local col6 ref" href="#116lock" title='lock' data-ref="116lock">lock</a>-&gt;<a class="tu ref" href="#(anonymous)::locked" title='(anonymous struct)::locked' data-use='w' data-ref="(anonymous)::locked">locked</a> = <var>0</var>;</td></tr>
<tr><th id="1191">1191</th><td>        }</td></tr>
<tr><th id="1192">1192</th><td>    }</td></tr>
<tr><th id="1193">1193</th><td>    <i>/* Deallocating a weakref with a NULL callback only calls</i></td></tr>
<tr><th id="1194">1194</th><td><i>       PyObject_GC_Del(), which can't call any Python code. */</i></td></tr>
<tr><th id="1195">1195</th><td>    <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(wr); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1195, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col4 ref" href="#114wr" title='wr' data-ref="114wr">wr</a>);</td></tr>
<tr><th id="1196">1196</th><td>}</td></tr>
<tr><th id="1197">1197</th><td></td></tr>
<tr><th id="1198">1198</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1199">1199</th><td><dfn class="tu decl def" id="thread__set_sentinel" title='thread__set_sentinel' data-type='PyObject * thread__set_sentinel(PyObject * self)' data-ref="thread__set_sentinel">thread__set_sentinel</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col7 decl" id="117self" title='self' data-type='PyObject *' data-ref="117self">self</dfn>)</td></tr>
<tr><th id="1200">1200</th><td>{</td></tr>
<tr><th id="1201">1201</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col8 decl" id="118wr" title='wr' data-type='PyObject *' data-ref="118wr">wr</dfn>;</td></tr>
<tr><th id="1202">1202</th><td>    <a class="typedef" href="../Include/pystate.h.html#PyThreadState" title='PyThreadState' data-type='struct _ts' data-ref="PyThreadState">PyThreadState</a> *<dfn class="local col9 decl" id="119tstate" title='tstate' data-type='PyThreadState *' data-ref="119tstate">tstate</dfn> = <a class="ref" href="../Include/pystate.h.html#PyThreadState_Get" title='PyThreadState_Get' data-ref="PyThreadState_Get">PyThreadState_Get</a>();</td></tr>
<tr><th id="1203">1203</th><td>    <a class="typedef" href="#lockobject" title='lockobject' data-type='struct lockobject' data-ref="lockobject">lockobject</a> *<dfn class="local col0 decl" id="120lock" title='lock' data-type='lockobject *' data-ref="120lock">lock</dfn>;</td></tr>
<tr><th id="1204">1204</th><td></td></tr>
<tr><th id="1205">1205</th><td>    <b>if</b> (<a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete_data" title='_ts::on_delete_data' data-ref="_ts::on_delete_data">on_delete_data</a> != <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="1206">1206</th><td>        <i>/* We must support the re-creation of the lock from a</i></td></tr>
<tr><th id="1207">1207</th><td><i>           fork()ed child. */</i></td></tr>
<tr><th id="1208">1208</th><td>        <a class="macro" href="../../include/assert.h.html#88" title="((tstate-&gt;on_delete == &amp;release_sentinel) ? (void) (0) : __assert_fail (&quot;tstate-&gt;on_delete == &amp;release_sentinel&quot;, &quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1208, __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete" title='_ts::on_delete' data-ref="_ts::on_delete">on_delete</a> == &amp;<a class="tu ref" href="#release_sentinel" title='release_sentinel' data-use='a' data-ref="release_sentinel">release_sentinel</a>);</td></tr>
<tr><th id="1209">1209</th><td>        <a class="local col8 ref" href="#118wr" title='wr' data-ref="118wr">wr</a> = (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete_data" title='_ts::on_delete_data' data-ref="_ts::on_delete_data">on_delete_data</a>;</td></tr>
<tr><th id="1210">1210</th><td>        <a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete" title='_ts::on_delete' data-ref="_ts::on_delete">on_delete</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1211">1211</th><td>        <a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete_data" title='_ts::on_delete_data' data-ref="_ts::on_delete_data">on_delete_data</a> = <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1212">1212</th><td>        <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(wr); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1212, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col8 ref" href="#118wr" title='wr' data-ref="118wr">wr</a>);</td></tr>
<tr><th id="1213">1213</th><td>    }</td></tr>
<tr><th id="1214">1214</th><td>    <a class="local col0 ref" href="#120lock" title='lock' data-ref="120lock">lock</a> = <a class="tu ref" href="#newlockobject" title='newlockobject' data-use='c' data-ref="newlockobject">newlockobject</a>();</td></tr>
<tr><th id="1215">1215</th><td>    <b>if</b> (<a class="local col0 ref" href="#120lock" title='lock' data-ref="120lock">lock</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1216">1216</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1217">1217</th><td>    <i>/* The lock is owned by whoever called _set_sentinel(), but the weakref</i></td></tr>
<tr><th id="1218">1218</th><td><i>       hangs to the thread state. */</i></td></tr>
<tr><th id="1219">1219</th><td>    <a class="local col8 ref" href="#118wr" title='wr' data-ref="118wr">wr</a> = <a class="ref" href="../Include/weakrefobject.h.html#PyWeakref_NewRef" title='PyWeakref_NewRef' data-ref="PyWeakref_NewRef">PyWeakref_NewRef</a>((<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col0 ref" href="#120lock" title='lock' data-ref="120lock">lock</a>, <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>);</td></tr>
<tr><th id="1220">1220</th><td>    <b>if</b> (<a class="local col8 ref" href="#118wr" title='wr' data-ref="118wr">wr</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>) {</td></tr>
<tr><th id="1221">1221</th><td>        <a class="macro" href="../Include/object.h.html#787" title="do { PyObject *_py_decref_tmp = (PyObject *)(lock); if (_Py_RefTotal-- , --(_py_decref_tmp)-&gt;ob_refcnt != 0) { if (((PyObject*)_py_decref_tmp)-&gt;ob_refcnt &lt; 0) _Py_NegativeRefcount(&quot;/home/jon/workspace/cpython/Modules/_threadmodule.c&quot;, 1221, (PyObject *)(_py_decref_tmp)); } else _Py_Dealloc(_py_decref_tmp); } while (0)" data-ref="_M/Py_DECREF">Py_DECREF</a>(<a class="local col0 ref" href="#120lock" title='lock' data-ref="120lock">lock</a>);</td></tr>
<tr><th id="1222">1222</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1223">1223</th><td>    }</td></tr>
<tr><th id="1224">1224</th><td>    <a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete_data" title='_ts::on_delete_data' data-ref="_ts::on_delete_data">on_delete_data</a> = (<em>void</em> *) <a class="local col8 ref" href="#118wr" title='wr' data-ref="118wr">wr</a>;</td></tr>
<tr><th id="1225">1225</th><td>    <a class="local col9 ref" href="#119tstate" title='tstate' data-ref="119tstate">tstate</a>-&gt;<a class="ref" href="../Include/pystate.h.html#_ts::on_delete" title='_ts::on_delete' data-ref="_ts::on_delete">on_delete</a> = &amp;<a class="tu ref" href="#release_sentinel" title='release_sentinel' data-use='a' data-ref="release_sentinel">release_sentinel</a>;</td></tr>
<tr><th id="1226">1226</th><td>    <b>return</b> (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *) <a class="local col0 ref" href="#120lock" title='lock' data-ref="120lock">lock</a>;</td></tr>
<tr><th id="1227">1227</th><td>}</td></tr>
<tr><th id="1228">1228</th><td></td></tr>
<tr><th id="1229">1229</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char _set_sentinel_doc[] = &quot;_set_sentinel() -&gt; lock\n\nSet a sentinel lock that will be released when the current thread\nstate is finalized (after it is untied from the interpreter).\n\nThis is a private API for the threading module.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="_set_sentinel_doc" title='_set_sentinel_doc' data-ref="_set_sentinel_doc">_set_sentinel_doc</dfn>,</td></tr>
<tr><th id="1230">1230</th><td><q>"_set_sentinel() -&gt; lock\n\</q></td></tr>
<tr><th id="1231">1231</th><td><q>\n\</q></td></tr>
<tr><th id="1232">1232</th><td><q>Set a sentinel lock that will be released when the current thread\n\</q></td></tr>
<tr><th id="1233">1233</th><td><q>state is finalized (after it is untied from the interpreter).\n\</q></td></tr>
<tr><th id="1234">1234</th><td><q>\n\</q></td></tr>
<tr><th id="1235">1235</th><td><q>This is a private API for the threading module."</q>);</td></tr>
<tr><th id="1236">1236</th><td></td></tr>
<tr><th id="1237">1237</th><td><em>static</em> <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *</td></tr>
<tr><th id="1238">1238</th><td><dfn class="tu decl def" id="thread_stack_size" title='thread_stack_size' data-type='PyObject * thread_stack_size(PyObject * self, PyObject * args)' data-ref="thread_stack_size">thread_stack_size</dfn>(<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col1 decl" id="121self" title='self' data-type='PyObject *' data-ref="121self">self</dfn>, <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col2 decl" id="122args" title='args' data-type='PyObject *' data-ref="122args">args</dfn>)</td></tr>
<tr><th id="1239">1239</th><td>{</td></tr>
<tr><th id="1240">1240</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span> <dfn class="local col3 decl" id="123old_size" title='old_size' data-type='size_t' data-ref="123old_size">old_size</dfn>;</td></tr>
<tr><th id="1241">1241</th><td>    <a class="typedef" href="../Include/pyport.h.html#Py_ssize_t" title='Py_ssize_t' data-type='ssize_t' data-ref="Py_ssize_t">Py_ssize_t</a> <dfn class="local col4 decl" id="124new_size" title='new_size' data-type='Py_ssize_t' data-ref="124new_size">new_size</dfn> = <var>0</var>;</td></tr>
<tr><th id="1242">1242</th><td>    <em>int</em> <dfn class="local col5 decl" id="125rc" title='rc' data-type='int' data-ref="125rc">rc</dfn>;</td></tr>
<tr><th id="1243">1243</th><td></td></tr>
<tr><th id="1244">1244</th><td>    <b>if</b> (!<a class="ref" href="../Include/modsupport.h.html#PyArg_ParseTuple" title='PyArg_ParseTuple' data-ref="PyArg_ParseTuple">PyArg_ParseTuple</a>(<a class="local col2 ref" href="#122args" title='args' data-ref="122args">args</a>, <q>"|n:stack_size"</q>, &amp;<a class="local col4 ref" href="#124new_size" title='new_size' data-ref="124new_size">new_size</a>))</td></tr>
<tr><th id="1245">1245</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1246">1246</th><td></td></tr>
<tr><th id="1247">1247</th><td>    <b>if</b> (<a class="local col4 ref" href="#124new_size" title='new_size' data-ref="124new_size">new_size</a> &lt; <var>0</var>) {</td></tr>
<tr><th id="1248">1248</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_ValueError" title='PyExc_ValueError' data-ref="PyExc_ValueError">PyExc_ValueError</a>,</td></tr>
<tr><th id="1249">1249</th><td>                        <q>"size must be 0 or a positive value"</q>);</td></tr>
<tr><th id="1250">1250</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1251">1251</th><td>    }</td></tr>
<tr><th id="1252">1252</th><td></td></tr>
<tr><th id="1253">1253</th><td>    <a class="local col3 ref" href="#123old_size" title='old_size' data-ref="123old_size">old_size</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_get_stacksize" title='PyThread_get_stacksize' data-ref="PyThread_get_stacksize">PyThread_get_stacksize</a>();</td></tr>
<tr><th id="1254">1254</th><td></td></tr>
<tr><th id="1255">1255</th><td>    <a class="local col5 ref" href="#125rc" title='rc' data-ref="125rc">rc</a> = <a class="ref" href="../Include/pythread.h.html#PyThread_set_stacksize" title='PyThread_set_stacksize' data-ref="PyThread_set_stacksize">PyThread_set_stacksize</a>((<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t">size_t</span>) <a class="local col4 ref" href="#124new_size" title='new_size' data-ref="124new_size">new_size</a>);</td></tr>
<tr><th id="1256">1256</th><td>    <b>if</b> (<a class="local col5 ref" href="#125rc" title='rc' data-ref="125rc">rc</a> == -<var>1</var>) {</td></tr>
<tr><th id="1257">1257</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_Format" title='PyErr_Format' data-ref="PyErr_Format">PyErr_Format</a>(<a class="ref" href="../Include/pyerrors.h.html#PyExc_ValueError" title='PyExc_ValueError' data-ref="PyExc_ValueError">PyExc_ValueError</a>,</td></tr>
<tr><th id="1258">1258</th><td>                     <q>"size not valid: %zd bytes"</q>,</td></tr>
<tr><th id="1259">1259</th><td>                     <a class="local col4 ref" href="#124new_size" title='new_size' data-ref="124new_size">new_size</a>);</td></tr>
<tr><th id="1260">1260</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1261">1261</th><td>    }</td></tr>
<tr><th id="1262">1262</th><td>    <b>if</b> (<a class="local col5 ref" href="#125rc" title='rc' data-ref="125rc">rc</a> == -<var>2</var>) {</td></tr>
<tr><th id="1263">1263</th><td>        <a class="ref" href="../Include/pyerrors.h.html#PyErr_SetString" title='PyErr_SetString' data-ref="PyErr_SetString">PyErr_SetString</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>,</td></tr>
<tr><th id="1264">1264</th><td>                        <q>"setting stack size not supported"</q>);</td></tr>
<tr><th id="1265">1265</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1266">1266</th><td>    }</td></tr>
<tr><th id="1267">1267</th><td></td></tr>
<tr><th id="1268">1268</th><td>    <b>return</b> <a class="ref" href="../Include/longobject.h.html#PyLong_FromSsize_t" title='PyLong_FromSsize_t' data-ref="PyLong_FromSsize_t">PyLong_FromSsize_t</a>((<a class="typedef" href="../Include/pyport.h.html#Py_ssize_t" title='Py_ssize_t' data-type='ssize_t' data-ref="Py_ssize_t">Py_ssize_t</a>) <a class="local col3 ref" href="#123old_size" title='old_size' data-ref="123old_size">old_size</a>);</td></tr>
<tr><th id="1269">1269</th><td>}</td></tr>
<tr><th id="1270">1270</th><td></td></tr>
<tr><th id="1271">1271</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char stack_size_doc[] = &quot;stack_size([size]) -&gt; size\n\nReturn the thread stack size used when creating new threads.  The\noptional size argument specifies the stack size (in bytes) to be used\nfor subsequently created threads, and must be 0 (use platform or\nconfigured default) or a positive integer value of at least 32,768 (32k).\nIf changing the thread stack size is unsupported, a ThreadError\nexception is raised.  If the specified size is invalid, a ValueError\nexception is raised, and the stack size is unmodified.  32k bytes\n currently the minimum supported stack size value to guarantee\nsufficient stack space for the interpreter itself.\n\nNote that some platforms may have particular restrictions on values for\nthe stack size, such as requiring a minimum stack size larger than 32kB or\nrequiring allocation in multiples of the system memory page size\n- platform documentation should be referred to for more information\n(4kB pages are common; using multiples of 4096 for the stack size is\nthe suggested approach in the absence of more specific information).&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="stack_size_doc" title='stack_size_doc' data-ref="stack_size_doc">stack_size_doc</dfn>,</td></tr>
<tr><th id="1272">1272</th><td><q>"stack_size([size]) -&gt; size\n\</q></td></tr>
<tr><th id="1273">1273</th><td><q>\n\</q></td></tr>
<tr><th id="1274">1274</th><td><q>Return the thread stack size used when creating new threads.  The\n\</q></td></tr>
<tr><th id="1275">1275</th><td><q>optional size argument specifies the stack size (in bytes) to be used\n\</q></td></tr>
<tr><th id="1276">1276</th><td><q>for subsequently created threads, and must be 0 (use platform or\n\</q></td></tr>
<tr><th id="1277">1277</th><td><q>configured default) or a positive integer value of at least 32,768 (32k).\n\</q></td></tr>
<tr><th id="1278">1278</th><td><q>If changing the thread stack size is unsupported, a ThreadError\n\</q></td></tr>
<tr><th id="1279">1279</th><td><q>exception is raised.  If the specified size is invalid, a ValueError\n\</q></td></tr>
<tr><th id="1280">1280</th><td><q>exception is raised, and the stack size is unmodified.  32k bytes\n\</q></td></tr>
<tr><th id="1281">1281</th><td><q> currently the minimum supported stack size value to guarantee\n\</q></td></tr>
<tr><th id="1282">1282</th><td><q>sufficient stack space for the interpreter itself.\n\</q></td></tr>
<tr><th id="1283">1283</th><td><q>\n\</q></td></tr>
<tr><th id="1284">1284</th><td><q>Note that some platforms may have particular restrictions on values for\n\</q></td></tr>
<tr><th id="1285">1285</th><td><q>the stack size, such as requiring a minimum stack size larger than 32kB or\n\</q></td></tr>
<tr><th id="1286">1286</th><td><q>requiring allocation in multiples of the system memory page size\n\</q></td></tr>
<tr><th id="1287">1287</th><td><q>- platform documentation should be referred to for more information\n\</q></td></tr>
<tr><th id="1288">1288</th><td><q>(4kB pages are common; using multiples of 4096 for the stack size is\n\</q></td></tr>
<tr><th id="1289">1289</th><td><q>the suggested approach in the absence of more specific information)."</q>);</td></tr>
<tr><th id="1290">1290</th><td></td></tr>
<tr><th id="1291">1291</th><td><em>static</em> <a class="typedef" href="../Include/methodobject.h.html#PyMethodDef" title='PyMethodDef' data-type='struct PyMethodDef' data-ref="PyMethodDef">PyMethodDef</a> <dfn class="tu decl def" id="thread_methods" title='thread_methods' data-type='PyMethodDef [12]' data-ref="thread_methods">thread_methods</dfn>[] = {</td></tr>
<tr><th id="1292">1292</th><td>    {<q>"start_new_thread"</q>,        (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_start_new_thread" title='thread_PyThread_start_new_thread' data-ref="thread_PyThread_start_new_thread">thread_PyThread_start_new_thread</a>,</td></tr>
<tr><th id="1293">1293</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a>, <a class="ref" href="#1083" title='start_new_doc' data-ref="start_new_doc">start_new_doc</a>},</td></tr>
<tr><th id="1294">1294</th><td>    {<q>"start_new"</q>,               (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_start_new_thread" title='thread_PyThread_start_new_thread' data-ref="thread_PyThread_start_new_thread">thread_PyThread_start_new_thread</a>,</td></tr>
<tr><th id="1295">1295</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a>, <a class="ref" href="#1083" title='start_new_doc' data-ref="start_new_doc">start_new_doc</a>},</td></tr>
<tr><th id="1296">1296</th><td>    {<q>"allocate_lock"</q>,           (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_allocate_lock" title='thread_PyThread_allocate_lock' data-ref="thread_PyThread_allocate_lock">thread_PyThread_allocate_lock</a>,</td></tr>
<tr><th id="1297">1297</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1130" title='allocate_doc' data-ref="allocate_doc">allocate_doc</a>},</td></tr>
<tr><th id="1298">1298</th><td>    {<q>"allocate"</q>,                (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_allocate_lock" title='thread_PyThread_allocate_lock' data-ref="thread_PyThread_allocate_lock">thread_PyThread_allocate_lock</a>,</td></tr>
<tr><th id="1299">1299</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1130" title='allocate_doc' data-ref="allocate_doc">allocate_doc</a>},</td></tr>
<tr><th id="1300">1300</th><td>    {<q>"exit_thread"</q>,             (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_exit_thread" title='thread_PyThread_exit_thread' data-ref="thread_PyThread_exit_thread">thread_PyThread_exit_thread</a>,</td></tr>
<tr><th id="1301">1301</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1101" title='exit_doc' data-ref="exit_doc">exit_doc</a>},</td></tr>
<tr><th id="1302">1302</th><td>    {<q>"exit"</q>,                    (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_exit_thread" title='thread_PyThread_exit_thread' data-ref="thread_PyThread_exit_thread">thread_PyThread_exit_thread</a>,</td></tr>
<tr><th id="1303">1303</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1101" title='exit_doc' data-ref="exit_doc">exit_doc</a>},</td></tr>
<tr><th id="1304">1304</th><td>    {<q>"interrupt_main"</q>,          (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_PyThread_interrupt_main" title='thread_PyThread_interrupt_main' data-ref="thread_PyThread_interrupt_main">thread_PyThread_interrupt_main</a>,</td></tr>
<tr><th id="1305">1305</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1115" title='interrupt_doc' data-ref="interrupt_doc">interrupt_doc</a>},</td></tr>
<tr><th id="1306">1306</th><td>    {<q>"get_ident"</q>,               (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_get_ident" title='thread_get_ident' data-ref="thread_get_ident">thread_get_ident</a>,</td></tr>
<tr><th id="1307">1307</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1148" title='get_ident_doc' data-ref="get_ident_doc">get_ident_doc</a>},</td></tr>
<tr><th id="1308">1308</th><td>    {<q>"_count"</q>,                  (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread__count" title='thread__count' data-ref="thread__count">thread__count</a>,</td></tr>
<tr><th id="1309">1309</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1165" title='_count_doc' data-ref="_count_doc">_count_doc</a>},</td></tr>
<tr><th id="1310">1310</th><td>    {<q>"stack_size"</q>,              (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread_stack_size" title='thread_stack_size' data-ref="thread_stack_size">thread_stack_size</a>,</td></tr>
<tr><th id="1311">1311</th><td>     <a class="macro" href="../Include/methodobject.h.html#71" title="0x0001" data-ref="_M/METH_VARARGS">METH_VARARGS</a>, <a class="ref" href="#1271" title='stack_size_doc' data-ref="stack_size_doc">stack_size_doc</a>},</td></tr>
<tr><th id="1312">1312</th><td>    {<q>"_set_sentinel"</q>,           (<a class="typedef" href="../Include/methodobject.h.html#PyCFunction" title='PyCFunction' data-type='PyObject *(*)(PyObject *, PyObject *)' data-ref="PyCFunction">PyCFunction</a>)<a class="tu ref" href="#thread__set_sentinel" title='thread__set_sentinel' data-ref="thread__set_sentinel">thread__set_sentinel</a>,</td></tr>
<tr><th id="1313">1313</th><td>     <a class="macro" href="../Include/methodobject.h.html#74" title="0x0004" data-ref="_M/METH_NOARGS">METH_NOARGS</a>, <a class="ref" href="#1229" title='_set_sentinel_doc' data-ref="_set_sentinel_doc">_set_sentinel_doc</a>},</td></tr>
<tr><th id="1314">1314</th><td>    {<span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,                      <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>}           <i>/* sentinel */</i></td></tr>
<tr><th id="1315">1315</th><td>};</td></tr>
<tr><th id="1316">1316</th><td></td></tr>
<tr><th id="1317">1317</th><td></td></tr>
<tr><th id="1318">1318</th><td><i>/* Initialization function */</i></td></tr>
<tr><th id="1319">1319</th><td></td></tr>
<tr><th id="1320">1320</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char thread_doc[] = &quot;This module provides primitive operations to write multi-threaded programs.\nThe &apos;threading&apos; module provides a more convenient interface.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="thread_doc" title='thread_doc' data-ref="thread_doc">thread_doc</dfn>,</td></tr>
<tr><th id="1321">1321</th><td><q>"This module provides primitive operations to write multi-threaded programs.\n\</q></td></tr>
<tr><th id="1322">1322</th><td><q>The 'threading' module provides a more convenient interface."</q>);</td></tr>
<tr><th id="1323">1323</th><td></td></tr>
<tr><th id="1324">1324</th><td><a class="macro" href="../Include/pymacro.h.html#71" title="static char lock_doc[] = &quot;A lock object is a synchronization primitive.  To create a lock,\ncall threading.Lock().  Methods are:\n\nacquire() -- lock the lock, possibly blocking until it can be obtained\nrelease() -- unlock of the lock\nlocked() -- test whether the lock is currently locked\n\nA lock is not owned by the thread that locked it; another thread may\nunlock it.  A thread attempting to lock a lock that it has already locked\nwill block until another thread unlocks it.  Deadlocks may ensue.&quot;" data-ref="_M/PyDoc_STRVAR">PyDoc_STRVAR</a>(<dfn class="decl def" id="lock_doc" title='lock_doc' data-ref="lock_doc">lock_doc</dfn>,</td></tr>
<tr><th id="1325">1325</th><td><q>"A lock object is a synchronization primitive.  To create a lock,\n\</q></td></tr>
<tr><th id="1326">1326</th><td><q>call threading.Lock().  Methods are:\n\</q></td></tr>
<tr><th id="1327">1327</th><td><q>\n\</q></td></tr>
<tr><th id="1328">1328</th><td><q>acquire() -- lock the lock, possibly blocking until it can be obtained\n\</q></td></tr>
<tr><th id="1329">1329</th><td><q>release() -- unlock of the lock\n\</q></td></tr>
<tr><th id="1330">1330</th><td><q>locked() -- test whether the lock is currently locked\n\</q></td></tr>
<tr><th id="1331">1331</th><td><q>\n\</q></td></tr>
<tr><th id="1332">1332</th><td><q>A lock is not owned by the thread that locked it; another thread may\n\</q></td></tr>
<tr><th id="1333">1333</th><td><q>unlock it.  A thread attempting to lock a lock that it has already locked\n\</q></td></tr>
<tr><th id="1334">1334</th><td><q>will block until another thread unlocks it.  Deadlocks may ensue."</q>);</td></tr>
<tr><th id="1335">1335</th><td></td></tr>
<tr><th id="1336">1336</th><td><em>static</em> <b>struct</b> <a class="type" href="../Include/moduleobject.h.html#PyModuleDef" title='PyModuleDef' data-ref="PyModuleDef">PyModuleDef</a> <dfn class="tu decl def" id="threadmodule" title='threadmodule' data-type='struct PyModuleDef' data-ref="threadmodule">threadmodule</dfn> = {</td></tr>
<tr><th id="1337">1337</th><td>    <a class="macro" href="../Include/moduleobject.h.html#50" title="{ { 0, 0, 1, ((void*)0) }, ((void*)0), 0, ((void*)0), }" data-ref="_M/PyModuleDef_HEAD_INIT">PyModuleDef_HEAD_INIT</a>,</td></tr>
<tr><th id="1338">1338</th><td>    <q>"_thread"</q>,</td></tr>
<tr><th id="1339">1339</th><td>    <a class="ref" href="#1320" title='thread_doc' data-ref="thread_doc">thread_doc</a>,</td></tr>
<tr><th id="1340">1340</th><td>    -<var>1</var>,</td></tr>
<tr><th id="1341">1341</th><td>    <a class="tu ref" href="#thread_methods" title='thread_methods' data-ref="thread_methods">thread_methods</a>,</td></tr>
<tr><th id="1342">1342</th><td>    <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="1343">1343</th><td>    <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="1344">1344</th><td>    <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>,</td></tr>
<tr><th id="1345">1345</th><td>    <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span></td></tr>
<tr><th id="1346">1346</th><td>};</td></tr>
<tr><th id="1347">1347</th><td></td></tr>
<tr><th id="1348">1348</th><td></td></tr>
<tr><th id="1349">1349</th><td><a class="macro" href="../Include/pyport.h.html#685" title="PyObject*" data-ref="_M/PyMODINIT_FUNC">PyMODINIT_FUNC</a></td></tr>
<tr><th id="1350">1350</th><td><dfn class="decl def" id="PyInit__thread" title='PyInit__thread' data-ref="PyInit__thread">PyInit__thread</dfn>(<em>void</em>)</td></tr>
<tr><th id="1351">1351</th><td>{</td></tr>
<tr><th id="1352">1352</th><td>    <a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *<dfn class="local col6 decl" id="126m" title='m' data-type='PyObject *' data-ref="126m">m</dfn>, *<dfn class="local col7 decl" id="127d" title='d' data-type='PyObject *' data-ref="127d">d</dfn>, *<dfn class="local col8 decl" id="128v" title='v' data-type='PyObject *' data-ref="128v">v</dfn>;</td></tr>
<tr><th id="1353">1353</th><td>    <em>double</em> <dfn class="local col9 decl" id="129time_max" title='time_max' data-type='double' data-ref="129time_max">time_max</dfn>;</td></tr>
<tr><th id="1354">1354</th><td>    <em>double</em> <dfn class="local col0 decl" id="130timeout_max" title='timeout_max' data-type='double' data-ref="130timeout_max">timeout_max</dfn>;</td></tr>
<tr><th id="1355">1355</th><td></td></tr>
<tr><th id="1356">1356</th><td>    <i>/* Initialize types: */</i></td></tr>
<tr><th id="1357">1357</th><td>    <b>if</b> (<a class="ref" href="../Include/object.h.html#PyType_Ready" title='PyType_Ready' data-ref="PyType_Ready">PyType_Ready</a>(&amp;<a class="tu ref" href="#localdummytype" title='localdummytype' data-use='a' data-ref="localdummytype">localdummytype</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1358">1358</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1359">1359</th><td>    <b>if</b> (<a class="ref" href="../Include/object.h.html#PyType_Ready" title='PyType_Ready' data-ref="PyType_Ready">PyType_Ready</a>(&amp;<a class="tu ref" href="#localtype" title='localtype' data-use='a' data-ref="localtype">localtype</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1360">1360</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1361">1361</th><td>    <b>if</b> (<a class="ref" href="../Include/object.h.html#PyType_Ready" title='PyType_Ready' data-ref="PyType_Ready">PyType_Ready</a>(&amp;<a class="tu ref" href="#Locktype" title='Locktype' data-use='a' data-ref="Locktype">Locktype</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1362">1362</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1363">1363</th><td>    <b>if</b> (<a class="ref" href="../Include/object.h.html#PyType_Ready" title='PyType_Ready' data-ref="PyType_Ready">PyType_Ready</a>(&amp;<a class="tu ref" href="#RLocktype" title='RLocktype' data-use='a' data-ref="RLocktype">RLocktype</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1364">1364</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1365">1365</th><td></td></tr>
<tr><th id="1366">1366</th><td>    <i>/* Create the module and add the functions */</i></td></tr>
<tr><th id="1367">1367</th><td>    <a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a> = <a class="macro" href="../Include/modsupport.h.html#199" title="PyModule_Create2TraceRefs(&amp;threadmodule, 1013)" data-ref="_M/PyModule_Create">PyModule_Create</a>(&amp;<a class="tu ref" href="#threadmodule" title='threadmodule' data-use='a' data-ref="threadmodule">threadmodule</a>);</td></tr>
<tr><th id="1368">1368</th><td>    <b>if</b> (<a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1369">1369</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1370">1370</th><td></td></tr>
<tr><th id="1371">1371</th><td>    <a class="local col0 ref" href="#130timeout_max" title='timeout_max' data-ref="130timeout_max">timeout_max</a> = <a class="macro" href="../Include/pythread.h.html#45" title="9223372036854775807LL" data-ref="_M/PY_TIMEOUT_MAX">PY_TIMEOUT_MAX</a> / <var>1000000</var>;</td></tr>
<tr><th id="1372">1372</th><td>    <a class="local col9 ref" href="#129time_max" title='time_max' data-ref="129time_max">time_max</a> = <a class="ref" href="../../include/x86_64-linux-gnu/bits/mathcalls.h.html#184" title='floor' data-ref="floor">floor</a>(<a class="ref" href="../Include/pytime.h.html#_PyTime_AsSecondsDouble" title='_PyTime_AsSecondsDouble' data-ref="_PyTime_AsSecondsDouble">_PyTime_AsSecondsDouble</a>(<a class="macro" href="../Include/pytime.h.html#21" title="9223372036854775807LL" data-ref="_M/_PyTime_MAX">_PyTime_MAX</a>));</td></tr>
<tr><th id="1373">1373</th><td>    <a class="local col0 ref" href="#130timeout_max" title='timeout_max' data-ref="130timeout_max">timeout_max</a> = <a class="macro" href="../Include/pymacro.h.html#5" title="(((timeout_max) &gt; (time_max)) ? (time_max) : (timeout_max))" data-ref="_M/Py_MIN">Py_MIN</a>(<a class="local col0 ref" href="#130timeout_max" title='timeout_max' data-ref="130timeout_max">timeout_max</a>, <a class="local col9 ref" href="#129time_max" title='time_max' data-ref="129time_max">time_max</a>);</td></tr>
<tr><th id="1374">1374</th><td></td></tr>
<tr><th id="1375">1375</th><td>    <a class="local col8 ref" href="#128v" title='v' data-ref="128v">v</a> = <a class="ref" href="../Include/floatobject.h.html#PyFloat_FromDouble" title='PyFloat_FromDouble' data-ref="PyFloat_FromDouble">PyFloat_FromDouble</a>(<a class="local col0 ref" href="#130timeout_max" title='timeout_max' data-ref="130timeout_max">timeout_max</a>);</td></tr>
<tr><th id="1376">1376</th><td>    <b>if</b> (!<a class="local col8 ref" href="#128v" title='v' data-ref="128v">v</a>)</td></tr>
<tr><th id="1377">1377</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1378">1378</th><td>    <b>if</b> (<a class="ref" href="../Include/modsupport.h.html#PyModule_AddObject" title='PyModule_AddObject' data-ref="PyModule_AddObject">PyModule_AddObject</a>(<a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a>, <q>"TIMEOUT_MAX"</q>, <a class="local col8 ref" href="#128v" title='v' data-ref="128v">v</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1379">1379</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1380">1380</th><td></td></tr>
<tr><th id="1381">1381</th><td>    <i>/* Add a symbolic constant */</i></td></tr>
<tr><th id="1382">1382</th><td>    <a class="local col7 ref" href="#127d" title='d' data-ref="127d">d</a> = <a class="ref" href="../Include/moduleobject.h.html#PyModule_GetDict" title='PyModule_GetDict' data-ref="PyModule_GetDict">PyModule_GetDict</a>(<a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a>);</td></tr>
<tr><th id="1383">1383</th><td>    <a class="tu ref" href="#ThreadError" title='ThreadError' data-use='w' data-ref="ThreadError">ThreadError</a> = <a class="ref" href="../Include/pyerrors.h.html#PyExc_RuntimeError" title='PyExc_RuntimeError' data-ref="PyExc_RuntimeError">PyExc_RuntimeError</a>;</td></tr>
<tr><th id="1384">1384</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(ThreadError))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(<a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>);</td></tr>
<tr><th id="1385">1385</th><td></td></tr>
<tr><th id="1386">1386</th><td>    <a class="ref" href="../Include/dictobject.h.html#PyDict_SetItemString" title='PyDict_SetItemString' data-ref="PyDict_SetItemString">PyDict_SetItemString</a>(<a class="local col7 ref" href="#127d" title='d' data-ref="127d">d</a>, <q>"error"</q>, <a class="tu ref" href="#ThreadError" title='ThreadError' data-use='r' data-ref="ThreadError">ThreadError</a>);</td></tr>
<tr><th id="1387">1387</th><td>    <a class="tu ref" href="#Locktype" title='Locktype' data-use='m' data-ref="Locktype">Locktype</a>.<a class="ref" href="../Include/object.h.html#_typeobject::tp_doc" title='_typeobject::tp_doc' data-ref="_typeobject::tp_doc">tp_doc</a> = <a class="ref" href="#1324" title='lock_doc' data-ref="lock_doc">lock_doc</a>;</td></tr>
<tr><th id="1388">1388</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(&amp;Locktype))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(&amp;<a class="tu ref" href="#Locktype" title='Locktype' data-use='a' data-ref="Locktype">Locktype</a>);</td></tr>
<tr><th id="1389">1389</th><td>    <a class="ref" href="../Include/dictobject.h.html#PyDict_SetItemString" title='PyDict_SetItemString' data-ref="PyDict_SetItemString">PyDict_SetItemString</a>(<a class="local col7 ref" href="#127d" title='d' data-ref="127d">d</a>, <q>"LockType"</q>, (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)&amp;<a class="tu ref" href="#Locktype" title='Locktype' data-use='a' data-ref="Locktype">Locktype</a>);</td></tr>
<tr><th id="1390">1390</th><td></td></tr>
<tr><th id="1391">1391</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(&amp;RLocktype))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(&amp;<a class="tu ref" href="#RLocktype" title='RLocktype' data-use='a' data-ref="RLocktype">RLocktype</a>);</td></tr>
<tr><th id="1392">1392</th><td>    <b>if</b> (<a class="ref" href="../Include/modsupport.h.html#PyModule_AddObject" title='PyModule_AddObject' data-ref="PyModule_AddObject">PyModule_AddObject</a>(<a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a>, <q>"RLock"</q>, (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)&amp;<a class="tu ref" href="#RLocktype" title='RLocktype' data-use='a' data-ref="RLocktype">RLocktype</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1393">1393</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1394">1394</th><td></td></tr>
<tr><th id="1395">1395</th><td>    <a class="macro" href="../Include/object.h.html#783" title="( _Py_RefTotal++ , ((PyObject *)(&amp;localtype))-&gt;ob_refcnt++)" data-ref="_M/Py_INCREF">Py_INCREF</a>(&amp;<a class="tu ref" href="#localtype" title='localtype' data-use='a' data-ref="localtype">localtype</a>);</td></tr>
<tr><th id="1396">1396</th><td>    <b>if</b> (<a class="ref" href="../Include/modsupport.h.html#PyModule_AddObject" title='PyModule_AddObject' data-ref="PyModule_AddObject">PyModule_AddObject</a>(<a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a>, <q>"_local"</q>, (<a class="typedef" href="../Include/object.h.html#PyObject" title='PyObject' data-type='struct _object' data-ref="PyObject">PyObject</a> *)&amp;<a class="tu ref" href="#localtype" title='localtype' data-use='a' data-ref="localtype">localtype</a>) &lt; <var>0</var>)</td></tr>
<tr><th id="1397">1397</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1398">1398</th><td></td></tr>
<tr><th id="1399">1399</th><td>    <a class="tu ref" href="#nb_threads" title='nb_threads' data-use='w' data-ref="nb_threads">nb_threads</a> = <var>0</var>;</td></tr>
<tr><th id="1400">1400</th><td></td></tr>
<tr><th id="1401">1401</th><td>    <a class="tu ref" href="#str_dict" title='str_dict' data-use='w' data-ref="str_dict">str_dict</a> = <a class="ref" href="../Include/unicodeobject.h.html#PyUnicode_InternFromString" title='PyUnicode_InternFromString' data-ref="PyUnicode_InternFromString">PyUnicode_InternFromString</a>(<q>"__dict__"</q>);</td></tr>
<tr><th id="1402">1402</th><td>    <b>if</b> (<a class="tu ref" href="#str_dict" title='str_dict' data-use='r' data-ref="str_dict">str_dict</a> == <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>)</td></tr>
<tr><th id="1403">1403</th><td>        <b>return</b> <span class="macro" title="((void*)0)" data-ref="_M/NULL">NULL</span>;</td></tr>
<tr><th id="1404">1404</th><td></td></tr>
<tr><th id="1405">1405</th><td>    <i>/* Initialize the C thread library */</i></td></tr>
<tr><th id="1406">1406</th><td>    <a class="ref" href="../Include/pythread.h.html#PyThread_init_thread" title='PyThread_init_thread' data-ref="PyThread_init_thread">PyThread_init_thread</a>();</td></tr>
<tr><th id="1407">1407</th><td>    <b>return</b> <a class="local col6 ref" href="#126m" title='m' data-ref="126m">m</a>;</td></tr>
<tr><th id="1408">1408</th><td>}</td></tr>
<tr><th id="1409">1409</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2017-Aug-29</em> from project codebrowser revision <em>v3.6.0b2-99580-g07f1658</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
